<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Collaborative distributed version control @ KIT documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
      <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
      <link rel="stylesheet" type="text/css" href="_static/sphinx_lesson.css" />
      <link rel="stylesheet" type="text/css" href="_static/term_role_formatting.css" />
      <link rel="stylesheet" type="text/css" href="_static/sphinx_rtd_theme_ext_color_contrast.css" />
      <link rel="stylesheet" type="text/css" href="_static/tabs.css" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
        <script src="_static/minipres.js"></script>
        <script src="_static/tabs.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script data-domain="coderefinery.github.io" defer="defer" src="https://plausible.cs.aalto.fi/js/script.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="#" class="icon icon-home">
            Collaborative distributed version control @ KIT
          </a>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Episodes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="#document-commits">Quick recap on Git Basics: Commits and Branches</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-git-states">Beyond add and commit: undoing mistakes</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-archaeology">Inspecting history</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-internals">Optional: Git Internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-branches">Operating on Branches</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-collaboration-concepts">Concepts around collaboration</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-same-repository">Collaborating within the same repository: issues and pull requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-code-review">Code review demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-forking-workflow">How to contribute changes to repositories that belong to others</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-interrupted">Interrupted work</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-tooling">Tooling and practices that you might find useful</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-merge-tooling">Merge and beyond</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="#document-reference">Quick reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-exercises">List of exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-guide">Instructor guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#instructor-guide-original">Instructor guide - original</a></li>
<li class="toctree-l1"><a class="reference external" href="https://mmesiti.github.io/git-intermediate/lesson.pdf">PDF version</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://coderefinery.org/lessons/core/">All lessons</a></li>
<li class="toctree-l1"><a class="reference external" href="https://coderefinery.org/">CodeRefinery</a></li>
<li class="toctree-l1"><a class="reference external" href="https://coderefinery.org/lessons/reusing/">Reusing</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">Collaborative distributed version control @ KIT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="#" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Collaborative distributed version control @ KIT  documentation</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/mmesiti/git-intermediate/blob/main/content/index" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="collaborative-distributed-version-control-and-troubleshooting-kit">
<h1>Collaborative distributed version control and troubleshooting &#64; KIT<a class="headerlink" href="#collaborative-distributed-version-control-and-troubleshooting-kit" title="Link to this heading"></a></h1>
<p><em>This material was originally developed by <a class="reference external" href="https://coderefinery.org/">CodeRefinery</a>.
The original material is visible <a class="reference external" href="https://coderefinery.github.io/git-intermediate/">here</a>
and <a class="reference external" href="https://coderefinery.github.io/git-intro/">here</a>.
Pull requests and fixes are welcome!</em></p>
<p>The content of this workshop can be roughly divided in two parts.</p>
<section id="effective-collaborative-software-development">
<h2>Effective collaborative software development<a class="headerlink" href="#effective-collaborative-software-development" title="Link to this heading"></a></h2>
<p>How can we share work on a repository of files with others on the internet?</p>
<ul class="simple">
<li><p>Share an archive of the directory using email or using some file sharing service:
This would lead to many back and forth emails and would be difficult
keep all copies synchronized.</p></li>
<li><p>One person’s repository on the web: allows one person to keep track of
more projects, gain visibility, feedback, and recognition.</p></li>
<li><p>Common repository for a group: everyone can directly update the same repository.
Good for small groups.</p></li>
<li><p>Forks or copies with different owners: anyone can suggest changes, even without
advance permission. Maintainers approve what they agree with.</p></li>
</ul>
<p>Being able to share more easily (going down the above list) is <em>transformative</em>,
because it allows projects to scale to a new level.
<strong>This can’t be done without proper tools.</strong></p>
<p>We will discuss
the centralized as well as the forking workflows.<br />
During the workshop,
you will collaborate in small groups using the same <a class="reference internal" href="index.html#term-forge"><span class="xref std std-term">forge</span></a>.<br />
Some of the details might not apply to the forge you are using,
please focus on the general ideas.</p>
</section>
<section id="fixing-problems-using-git-and-fixing-git-problems">
<h2>Fixing problems using Git, and fixing Git problems<a class="headerlink" href="#fixing-problems-using-git-and-fixing-git-problems" title="Link to this heading"></a></h2>
<p>Version Control has been sometimes described as
“<em>an unlimited undo button</em>”,
that offers important ways
to tackle problems and gain insight during development
(typically, software development),
by inspecting the history and the state of all the files involved.</p>
<p>Of course, using a new tool
can introduce additional complexity
on top of an already complex workflow.
Being in control of the tool
can guarantee a much productive and stress-free experience,
especially when collaborating with other people.</p>
</section>
</section>
<section id="expected-learning-outcomes">
<h1>Expected learning outcomes<a class="headerlink" href="#expected-learning-outcomes" title="Link to this heading"></a></h1>
<div class="admonition-objectives objectives admonition" id="objectives-0">
<p class="admonition-title">Objectives</p>
<ol class="arabic simple">
<li><p>Be able to collaborate with others on remote repositories
hosted on Git <a class="reference external" href="https://en.wikipedia.org/wiki/Forge_(software)">Forges</a>
(e.g., GitHub, GitLab and other similar services);</p></li>
<li><p>Be able to use git tools to diagnose and fix problems in code or documents
(the content of the repository);</p></li>
<li><p>Be able to fix common issues encountered
when deviating from the simplest workflow
(<em>pull - add - commit - push</em>);</p></li>
<li><p>Bonus point: fix issues in this repository</p></li>
</ol>
</div>
<div class="admonition-prerequisites prerequisites admonition" id="prerequisites-0">
<p class="admonition-title">Prerequisites</p>
<ol class="arabic simple">
<li><p>Basic understanding of Git.</p></li>
<li><p>You need an account on a “Forge”, e.g.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com">github.com</a></p></li>
<li><p><a class="reference external" href="https://gitlab.com">gitlab.com</a></p></li>
<li><p><a class="reference external" href="https://gitlab.kit.edu">gitlab.kit.edu</a></p></li>
<li><p><a class="reference external" href="https://codeberg.org">codeberg.org</a></p></li>
</ul>
</li>
</ol>
</div>
<div class="toctree-wrapper compound">
<span id="document-commits"></span><section id="quick-recap-on-git-basics-commits-and-branches">
<h2>Quick recap on Git Basics: Commits and Branches<a class="headerlink" href="#quick-recap-on-git-basics-commits-and-branches" title="Link to this heading"></a></h2>
<p>The first and most basic task to do in Git is <em>record changes</em> using
commits.<br />
We will record changes in two ways:</p>
<ul class="simple">
<li><p>on a new branch (which supports multiple lines of work at once)</p></li>
<li><p>directly on the “main” branch (which happens to be the default branch here).</p></li>
</ul>
<div class="admonition-objectives objectives admonition" id="objectives-0">
<p class="admonition-title">Objectives</p>
<ul class="simple">
<li><p>Record new changes to our own copy of the project.</p></li>
<li><p>Understand adding changes in two separate branches.</p></li>
<li><p>See how to compare different versions.</p></li>
</ul>
</div>
<section id="glossary">
<h3>Glossary<a class="headerlink" href="#glossary" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://coderefinery.github.io/git-intro/reference/#term-commit" title="(in Introduction to version control with Git)"><span class="xref std std-term">commit</span></a>: Snapshot of the project
at a certain point in time,
gets a unique identifier
(called a <a class="reference external" href="https://coderefinery.github.io/git-intro/reference/#term-hash" title="(in Introduction to version control with Git)"><span class="xref std std-term">hash</span></a>, e.g. <code class="docutils literal notranslate"><span class="pre">c7f0e8bfc718be04525847fc7ac237f470add76e</span></code>).
Usually you can be lazy and use only the first 4 characters
wherever a commit hash is needed.</p></li>
<li><p><a class="reference external" href="https://coderefinery.github.io/git-intro/reference/#term-branch" title="(in Introduction to version control with Git)"><span class="xref std std-term">branch</span></a>: Independent development line. The main development line is often called <code class="docutils literal notranslate"><span class="pre">main</span></code>.</p></li>
<li><p><a class="reference external" href="https://coderefinery.github.io/git-intro/reference/#term-tag" title="(in Introduction to version control with Git)"><span class="xref std std-term">tag</span></a>: A pointer to one commit, to be able to refer to it later.
Like a “commemorative plaque”
that you attach to a particular commit (e.g. <code class="docutils literal notranslate"><span class="pre">phd-printed</span></code> or <code class="docutils literal notranslate"><span class="pre">paper-submitted</span></code>).</p></li>
<li><p><a class="reference external" href="https://coderefinery.github.io/git-intro/reference/#term-repository" title="(in Introduction to version control with Git)"><span class="xref std std-term">repository</span></a>: A copy of the project, contains all data and history (commits, branches, tags).</p></li>
<li><p><a class="reference internal" href="index.html#term-forge"><span class="xref std std-term">forge</span></a>: <em>a web-based collaborative software platform for both developing and sharing code</em>
(from <a class="reference external" href="https://en.wikipedia.org/wiki/Forge_(software)">wikipedia</a>),
e.g. GitHub or GitLab</p></li>
<li><p><a class="reference external" href="https://coderefinery.github.io/git-intro/reference/#term-clone" title="(in Introduction to version control with Git)"><span class="xref std std-term">cloning</span></a>: Copying the whole repository - the first time,
e.g. downloading it on your computer. It is not necessary to download each file one by one.</p></li>
<li><p><a class="reference external" href="https://coderefinery.github.io/git-intro/reference/#term-fork" title="(in Introduction to version control with Git)"><span class="xref std std-term">forking</span></a>: Cloning a repository (which is typically not yours) on a forge - your
copy (fork) stays on the forge and you can make changes to your copy.</p></li>
</ul>
</section>
<section id="merging">
<h3>Merging<a class="headerlink" href="#merging" title="Link to this heading"></a></h3>
<figure class="align-default" id="id1">
<a class="reference internal image-reference" href="_images/gophers.png"><img alt="Branching explained with a gopher" src="_images/gophers.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-text">What if two people, at the same time, make two different changes?  Git
can merge them together easily.  Image created using <a class="reference external" href="https://gopherize.me/">https://gopherize.me/</a>
(<a class="reference external" href="https://twitter.com/jay_gee/status/703360688618536960">inspiration</a>).</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="exercise-practice-creating-commits-and-branches">
<h3>Exercise: Practice creating commits and branches<a class="headerlink" href="#exercise-practice-creating-commits-and-branches" title="Link to this heading"></a></h3>
<div class="admonition-how-to-prepare-the-repository prerequisites admonition" id="prerequisites-0">
<p class="admonition-title">How to prepare the repository</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">Fork on github.com</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">Clone and push to new repository</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><ol class="arabic">
<li><p>Go to the repository view on GitHub <a class="reference external" href="https://github.com/coderefinery/recipe-book">https://github.com/coderefinery/recipe-book</a></p></li>
<li><p>First, on GitHub, click the button that says “Fork”.  It is towards
the top-right of the screen:</p>
<figure class="align-default">
<a class="with-border reference internal image-reference" href="_images/forking.png"><img alt="Screenshot on GitHub before clicking on &quot;Fork&quot;" class="with-border" src="_images/forking.png" style="width: 80%;" /></a>
</figure>
</li>
<li><p>You should shortly be redirected to your copy of the repository
<strong>YOUR_USER_NAME/recipe-book</strong>.</p></li>
</ol>
<p>At all times you should be aware of if you looking at <em>your</em> repository
or the <em>CodeRefinery <a class="reference external" href="https://coderefinery.github.io/git-intro/reference/#term-upstream" title="(in Introduction to version control with Git)"><span class="xref std std-term">upstream</span></a></em> repository.</p>
<ul class="simple">
<li><p>Your repository: https://github.com/<strong>USERNAME</strong>/recipe-book</p></li>
<li><p>CodeRefinery upstream repository: https://github.com/<strong>coderefinery</strong>/recipe-book</p></li>
</ul>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><p>This is necessary if you plan to use another forge than github.com.
It can also be a useful exercise.</p>
<div class="admonition-exercise exercise important admonition" id="exercise-0">
<p class="admonition-title">Exercise</p>
<p>In order to achieve an equivalent result,
you need to</p>
<ul class="simple">
<li><p>clone the repository <a class="reference external" href="https://github.com/coderefinery/recipe-book">https://github.com/coderefinery/recipe-book</a> locally
on your computer</p></li>
<li><p>create a properly named repository on the <a class="reference internal" href="index.html#term-forge"><span class="xref std std-term">forge</span></a> of your choice</p></li>
<li><p>push the newly created repository there.</p></li>
</ul>
<div class="admonition-detailed-steps solution important dropdown admonition" id="solution-0">
<p class="admonition-title">Detailed steps</p>
<p>Please follow these steps.
The Bash command needed for each step are shown along.</p>
<ol class="arabic">
<li><p>create a directory called <code class="docutils literal notranslate"><span class="pre">centralized-workflow-exercise</span></code> on your computer.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">mkdir centralized-workflow-exercise</span>
</pre></div>
</div>
</li>
<li><p>clone the repository <a class="reference external" href="https://github.com/coderefinery/recipe-book">https://github.com/coderefinery/recipe-book</a>
on your computer in the directory you just created:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git clone https://github.com/coderefinery/recipe-book</span>
</pre></div>
</div>
</li>
<li><p>Log into your preferred forge
and create an <strong>empty</strong> and <strong>public</strong> repository
called <code class="docutils literal notranslate"><span class="pre">recipe-book</span></code>.</p>
<ul class="simple">
<li><p>On GitLab, click the blue “New Project” button on the top right part of the page.
Among other things, remember to:</p>
<ul>
<li><p>Choose “Blank Project”,</p></li>
<li><p>Set the Visibility Level to be Public (this can be changed later)</p></li>
<li><p><strong>untick</strong> the box close to “Initialize repository with a README”</p></li>
</ul>
</li>
<li><p>On codeberg.org, click the <code class="docutils literal notranslate"><span class="pre">+</span></code> symbol on the top right corner of the page,
and Choose the “New Repository” option.</p></li>
</ul>
</li>
<li><p>Add the remote to your local repository. In this case,
we will use the name of the forge as the name of the remote.
If you configured ssh access:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git remote add &lt;forge-name&gt; git@&lt;forge-name&gt;:&lt;username&gt;/recipe-book</span>
</pre></div>
</div>
<p>If not, you can try https instead:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git remote add &lt;forge-name&gt; https://&lt;forge-name&gt;/&lt;username&gt;/recipe-book</span>
</pre></div>
</div>
</li>
<li><p>Push the main branch there:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git push &lt;forge-name&gt; main</span>
</pre></div>
</div>
</li>
</ol>
<p>Have a look at the <a class="reference internal" href="index.html#authentication"><span class="std std-ref">Authentication: connecting to the repository from your computer</span></a>
section if you have troubles problems during the push.</p>
</div>
</div>
</div></div>
</div>
<p>We offer <strong>three different paths</strong> of how to do this exercise:</p>
<ul class="simple">
<li><p>on GitHub</p></li>
<li><p>using VSCode</p></li>
<li><p>using the command line</p></li>
</ul>
<div class="admonition-exercise-practice-creating-commits-and-branches-20-min exercise important admonition" id="exercise-1">
<p class="admonition-title">Exercise: Practice creating commits and branches (20 min)</p>
<ol class="arabic simple">
<li><p>Make sure that you now work <strong>on your fork</strong> of the recipe-book
repository (<code class="docutils literal notranslate"><span class="pre">USER/recipe-book</span></code>, <em>not</em> <code class="docutils literal notranslate"><span class="pre">coderefinery/recipe-book</span></code>)</p></li>
<li><p>First create a new branch and then add a recipe to the branch and commit the change.</p></li>
<li><p>In a new commit, modify the recipe you just added.</p></li>
<li><p>Switch to the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch and modify a recipe there.</p></li>
<li><p>Browse the network and locate the commits that you just created (“Insights” -&gt; “Network”).</p></li>
<li><p>Compare the branch that you created with the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch. Can you find an easy way to see the differences?</p></li>
<li><p>Can you find a way to compare versions between two arbitrary commits in the repository?</p></li>
<li><p>Try to rename the branch that you created and then browse the network again.</p></li>
<li><p>Try to create a tag for one of the commits that you created (on GitHub,
create a “release”).</p></li>
</ol>
</div>
<p>The solution below goes over most of the answers, and you are
encouraged to use it when the hints aren’t enough - this is by
design.</p>
</section>
<section id="solution-and-walk-through">
<h3>Solution and walk-through<a class="headerlink" href="#solution-and-walk-through" title="Link to this heading"></a></h3>
<section id="make-sure-you-are-on-your-fork">
<h4>(1) Make sure you are on your fork<a class="headerlink" href="#make-sure-you-are-on-your-fork" title="Link to this heading"></a></h4>
<figure class="align-default" id="id2">
<a class="with-border reference internal image-reference" href="_images/fork1.png"><img alt="Screenshot on GitHub where we verify that we are on our fork." class="with-border" src="_images/fork1.png" style="width: 60%;" /></a>
<figcaption>
<p><span class="caption-text">You want to see your username in the URL and you want to see the “forked from
…” part.</span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="create-a-branch-and-add-a-recipe-to-the-branch">
<h4>(2) Create a branch and add a recipe to the branch<a class="headerlink" href="#create-a-branch-and-add-a-recipe-to-the-branch" title="Link to this heading"></a></h4>
<p>A recipe template is below.  This format is called “Markdown”, but it
doesn’t matter right now. You don’t have to use this particular template.</p>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span><span class="gh"># Recipe name</span>

<span class="gu">## Ingredients</span>

<span class="k">-</span><span class="w"> </span>Ingredient 1
<span class="k">-</span><span class="w"> </span>Ingredient 2


<span class="gu">## Instructions</span>

<span class="k">-</span><span class="w"> </span>Step 1
<span class="k">-</span><span class="w"> </span>Step 2
</pre></div>
</div>
<p>There is a <a class="reference internal" href="index.html#term-main"><span class="xref std std-term">main</span></a> branch that is default.  We want to create a
<em>different</em> <a class="reference external" href="https://coderefinery.github.io/git-intro/reference/#term-branch" title="(in Introduction to version control with Git)"><span class="xref std std-term">branch</span></a> for our new commit, because we will <em>merge</em> it later.
<a class="reference external" href="https://coderefinery.github.io/git-intro/reference/#term-commit" title="(in Introduction to version control with Git)"><span class="xref std std-term">Commit</span></a> is the verb to describe recording more changes, and also the
name of the thing you make.  A commit is identified by something such as
<code class="docutils literal notranslate"><span class="pre">554c187</span></code>.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-R2l0SHVi" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-1-R2l0SHVi" name="R2l0SHVi" role="tab" tabindex="0">GitHub</button><button aria-controls="panel-1-VlMgQ29kZQ==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tab" tabindex="-1">VS Code</button><button aria-controls="panel-1-Q29tbWFuZCBsaW5l" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tab" tabindex="-1">Command line</button></div><div aria-labelledby="tab-1-R2l0SHVi" class="sphinx-tabs-panel group-tab" id="panel-1-R2l0SHVi" name="R2l0SHVi" role="tabpanel" tabindex="0"><ol class="arabic">
<li><p>Where it says “main” at the top left, click, enter a new branch
name <code class="docutils literal notranslate"><span class="pre">new-recipe</span></code>, click on the offer to create the new branch
(“Create branch new-recipe from main”).</p>
<figure class="align-default">
<a class="with-border reference internal image-reference" href="_images/github-create-branch.png"><img alt="Screenshot on GitHub where we create a new branch." class="with-border" src="_images/github-create-branch.png" style="width: 60%;" /></a>
</figure>
</li>
<li><p>Change to some sub-directory, for example <code class="docutils literal notranslate"><span class="pre">sides</span></code></p></li>
<li><p>Make sure you are still on the <code class="docutils literal notranslate"><span class="pre">new-recipe</span></code> branch (it should say
it at the top), and click “Add file” → “Create new file” from the
upper right.</p></li>
<li><p>Enter a filename where it says “Name your file…”, with a <code class="docutils literal notranslate"><span class="pre">.md</span></code> at
the end.  Example: <code class="docutils literal notranslate"><span class="pre">mixed-nuts.md</span></code>.</p></li>
<li><p>Enter the recipe.  You can use the template above.</p></li>
<li><p>Click “Commit changes”</p></li>
<li><p>Enter a commit message. Then click “Commit
changes”.</p></li>
</ol>
<p>You should appear back at the file browser view, and see your new
recipe there.</p>
</div><div aria-labelledby="tab-1-VlMgQ29kZQ==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tabpanel" tabindex="0"><ol class="arabic simple">
<li><p>Make sure that you are on the main branch.</p></li>
<li><p>Version control button on left sidebar → Three dots in upper right of source control → Branch → Create branch.</p></li>
<li><p>VS Code automatically switches to the new branch.</p></li>
</ol>
<figure class="align-default" id="id3">
<a class="with-border reference internal image-reference" href="_images/vscode-create-branch.png"><img alt="VS Code screenshot of create branch" class="with-border" src="_images/vscode-create-branch.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-text">Creating a new branch in VS Code.</span><a class="headerlink" href="#id3" title="Link to this image"></a></p>
</figcaption>
</figure>
<ol class="arabic simple" start="4">
<li><p>Create a new file, for example <code class="docutils literal notranslate"><span class="pre">sides/mixed-nuts.md</span></code>.</p></li>
<li><p>In the version control sidebar, click the <code class="docutils literal notranslate"><span class="pre">+</span></code> sign to add the file for the next commit.</p></li>
<li><p>Enter a brief message and click “Commit”.</p></li>
</ol>
<figure class="align-default" id="id4">
<a class="with-border reference internal image-reference" href="_images/vscode-add-and-commit.png"><img alt="Screenshot of VS Code commit process" class="with-border" src="_images/vscode-add-and-commit.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-text">Committing a new file in VS Code.</span><a class="headerlink" href="#id4" title="Link to this image"></a></p>
</figcaption>
</figure>
</div><div aria-labelledby="tab-1-Q29tbWFuZCBsaW5l" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tabpanel" tabindex="0"><p>Create a new branch called <code class="docutils literal notranslate"><span class="pre">new-recipe</span></code> from <code class="docutils literal notranslate"><span class="pre">main</span></code> and switch to it:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>--create<span class="w"> </span>new-recipe<span class="w"> </span>main
</pre></div>
</div>
<p>Then create the new file. Finally add and commit the file:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>add<span class="w"> </span>sides/mixed-nuts.md
<span class="gp">$ </span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Add mixed nuts recipe&quot;</span>
</pre></div>
</div>
</div></div>
</section>
<section id="modify-the-recipe-with-a-new-commit">
<h4>(3) Modify the recipe with a new commit<a class="headerlink" href="#modify-the-recipe-with-a-new-commit" title="Link to this heading"></a></h4>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-R2l0SHVi" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-2-R2l0SHVi" name="R2l0SHVi" role="tab" tabindex="0">GitHub</button><button aria-controls="panel-2-VlMgQ29kZQ==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tab" tabindex="-1">VS Code</button><button aria-controls="panel-2-Q29tbWFuZCBsaW5l" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tab" tabindex="-1">Command line</button></div><div aria-labelledby="tab-2-R2l0SHVi" class="sphinx-tabs-panel group-tab" id="panel-2-R2l0SHVi" name="R2l0SHVi" role="tabpanel" tabindex="0"><p>This is similar to before, but we click on the existing file to
modify.</p>
<ol class="arabic simple">
<li><p>Click on your new recipe, for example <code class="docutils literal notranslate"><span class="pre">mixed-nuts.md</span></code>.</p></li>
<li><p>Click the edit button, the pencil icon at top-right.</p></li>
<li><p>Follow the “Commit changes” instructions as in the previous step.</p></li>
</ol>
</div><div aria-labelledby="tab-2-VlMgQ29kZQ==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tabpanel" tabindex="0"><p>Repeat as in the previous step.</p>
</div><div aria-labelledby="tab-2-Q29tbWFuZCBsaW5l" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tabpanel" tabindex="0"><p>Modify the file. Then commit the new change:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>add<span class="w"> </span>sides/mixed-nuts.md
<span class="gp">$ </span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Short summary of the change&quot;</span>
</pre></div>
</div>
<p>Make sure to replace “Short summary of the change” with a meaningful commit
message.</p>
</div></div>
</section>
<section id="switch-to-the-main-branch-and-modify-a-recipe-there">
<h4>(4) Switch to the main branch and modify a recipe there<a class="headerlink" href="#switch-to-the-main-branch-and-modify-a-recipe-there" title="Link to this heading"></a></h4>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-3-R2l0SHVi" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-3-R2l0SHVi" name="R2l0SHVi" role="tab" tabindex="0">GitHub</button><button aria-controls="panel-3-VlMgQ29kZQ==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-3-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tab" tabindex="-1">VS Code</button><button aria-controls="panel-3-Q29tbWFuZCBsaW5l" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-3-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tab" tabindex="-1">Command line</button></div><div aria-labelledby="tab-3-R2l0SHVi" class="sphinx-tabs-panel group-tab" id="panel-3-R2l0SHVi" name="R2l0SHVi" role="tabpanel" tabindex="0"><ol class="arabic simple">
<li><p>Go back to the main repository page (your user’s page).</p></li>
<li><p>In the branch switch view (top left above the file view), switch to
<code class="docutils literal notranslate"><span class="pre">main</span></code>.</p></li>
<li><p>Modify another recipe that already exists, following the pattern
from above. Don’t modify the one you just created (but it shouldn’t
even be visible on the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch).</p></li>
</ol>
</div><div aria-labelledby="tab-3-VlMgQ29kZQ==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-3-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tabpanel" tabindex="0"><p>Use the branch selector at the bottom to switch back to the main branch.  Repeat the same steps as above.</p>
<figure class="align-default" id="id5">
<a class="with-border reference internal image-reference" href="_images/vscode-change-branch.png"><img alt="VS Code screenshot" class="with-border" src="_images/vscode-change-branch.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-text">Switching branch via selector at bottom.</span><a class="headerlink" href="#id5" title="Link to this image"></a></p>
</figcaption>
</figure>
</div><div aria-labelledby="tab-3-Q29tbWFuZCBsaW5l" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-3-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tabpanel" tabindex="0"><p>First switch to the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>main
</pre></div>
</div>
<p>Then modify a file. Finally <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> and then commit the change:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Short summary of the change&quot;</span>
</pre></div>
</div>
</div></div>
</section>
<section id="browse-the-commits-you-just-made">
<h4>(5) Browse the commits you just made<a class="headerlink" href="#browse-the-commits-you-just-made" title="Link to this heading"></a></h4>
<p>Let’s look at what we did.  Now, the <code class="docutils literal notranslate"><span class="pre">main</span></code> and <code class="docutils literal notranslate"><span class="pre">new-recipe</span></code> branches
have diverged: both have some modifications. Try to find the commits
you created.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-4-R2l0SHVi" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-4-R2l0SHVi" name="R2l0SHVi" role="tab" tabindex="0">GitHub</button><button aria-controls="panel-4-VlMgQ29kZQ==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-4-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tab" tabindex="-1">VS Code</button><button aria-controls="panel-4-Q29tbWFuZCBsaW5l" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-4-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tab" tabindex="-1">Command line</button></div><div aria-labelledby="tab-4-R2l0SHVi" class="sphinx-tabs-panel group-tab" id="panel-4-R2l0SHVi" name="R2l0SHVi" role="tabpanel" tabindex="0"><p>Insights tab → Network view (just like we have done before).</p>
</div><div aria-labelledby="tab-4-VlMgQ29kZQ==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-4-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tabpanel" tabindex="0"><p>This requires an extension.  Opening the VS Code terminal lets you use the command line method.</p>
<figure class="align-default" id="id6">
<a class="with-border reference internal image-reference" href="_images/vscode-open-terminal.png"><img alt="VS Code screenshot as described" class="with-border" src="_images/vscode-open-terminal.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-text">View → Terminal will open a terminal at bottom.  This is a normal command line interface and very useful for work.  (Note the git-aware prompt that shows the current branch.  This requires other setup.)</span><a class="headerlink" href="#id6" title="Link to this image"></a></p>
</figcaption>
</figure>
</div><div aria-labelledby="tab-4-Q29tbWFuZCBsaW5l" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-4-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>log<span class="w"> </span>--graph<span class="w"> </span>--oneline<span class="w"> </span>--decorate<span class="w"> </span>--all<span class="w">  </span>
</pre></div>
</div>
<p>In my case I got:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="hll">* b4de93b (HEAD -&gt; main) add spring onion to poke
</span><span class="hll">| * dc5d6f0 (origin/new-recipe, new-recipe) adding chocolate to the mixed nuts recipe
</span><span class="hll">| * b4035e3 add mixed nuts recipe
</span>|/
*   554c187 (origin/main, origin/HEAD) Merge branch &#39;alex/fruit-salad&#39;
|\
| * 89d5ef9 fruit salad: instructions
| * 3bd2468 fruit salad: ingredients
* | 8bcb766 a todo note to not forget the instructions
|/
* b950c5c just fixing capitalization
* d18035e fix formatting
* 7051cca add some cilantro
* ae19e81 add categories for easier browsing
* a6fe629 we also need salad
* 30b89c4 document what this is about
*   fd12dc1 Merge branch &#39;radovan/lasagna&#39;
|\
| * 7753d43 vegetarian lasagna: instructions
| * aa0473e vegetarian lasagna: ingredients
* |   1e5a24a Merge branch &#39;radovan/poke&#39;
|\ \
| * | 5aa6687 oh no! forgot onion - adding
| * | cc84e4f working on a poke recipe
| |/
* | 9500901 a classic pumpkin pie recipe - yum!
* | 34ce939 drafting a recipe for a pasta, so far only ingredients
* | 28e5f26 recipe for a mushroom soup
|/
* a550963 reduce amount of salt
* f2d6d58 don&#39;t forget to enjoy
* 1fde064 add half an onion
* 4c1873e drafting a guacamole recipe
* 2992443 this will be licensed under CC0
* 084a1ea starting with an almost empty readme
</pre></div>
</div>
</div></div>
</section>
<section id="compare-the-branches">
<h4>(6) Compare the branches<a class="headerlink" href="#compare-the-branches" title="Link to this heading"></a></h4>
<p>Comparing changes is an important thing we need to do.  When using the
GitHub view only, this may not be so common, but we’ll show it so that
it makes sense later on.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-5-R2l0SHVi" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-5-R2l0SHVi" name="R2l0SHVi" role="tab" tabindex="0">GitHub</button><button aria-controls="panel-5-VlMgQ29kZQ==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-5-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tab" tabindex="-1">VS Code</button><button aria-controls="panel-5-Q29tbWFuZCBsaW5l" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-5-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tab" tabindex="-1">Command line</button></div><div aria-labelledby="tab-5-R2l0SHVi" class="sphinx-tabs-panel group-tab" id="panel-5-R2l0SHVi" name="R2l0SHVi" role="tabpanel" tabindex="0"><p>Next to the branch name switcher, click on “Branches” to get an overview.</p>
<p>Another way to compare branches or commits on GitHub is to adjust the following URL:
<code class="docutils literal notranslate"><span class="pre">https://github.com/USER/recipe-book/compare/VERSION1..VERSION2</span></code></p>
<p>Replace <code class="docutils literal notranslate"><span class="pre">USER</span></code> with your username and <code class="docutils literal notranslate"><span class="pre">VERSION1</span></code> and <code class="docutils literal notranslate"><span class="pre">VERSION2</span></code> with a commit hash or branch name.
Please try it out.</p>
</div><div aria-labelledby="tab-5-VlMgQ29kZQ==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-5-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tabpanel" tabindex="0"><p>This seems to require an extension.  We recommend you use the command line method.</p>
</div><div aria-labelledby="tab-5-Q29tbWFuZCBsaW5l" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-5-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>diff<span class="w"> </span>main<span class="w"> </span>new-recipe
</pre></div>
</div>
<p>Try also the other way around:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>diff<span class="w"> </span>new-recipe<span class="w"> </span>main
</pre></div>
</div>
<p>Try also this if you only want to see the file names that are different:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>diff<span class="w"> </span>--name-only<span class="w"> </span>main<span class="w"> </span>new-recipe
</pre></div>
</div>
</div></div>
</section>
<section id="compare-two-arbitrary-commits">
<h4>(7) Compare two arbitrary commits<a class="headerlink" href="#compare-two-arbitrary-commits" title="Link to this heading"></a></h4>
<p>This is similar to above, but not only between branches.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-6-R2l0SHVi" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-6-R2l0SHVi" name="R2l0SHVi" role="tab" tabindex="0">GitHub</button><button aria-controls="panel-6-VlMgQ29kZQ==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-6-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tab" tabindex="-1">VS Code</button><button aria-controls="panel-6-Q29tbWFuZCBsaW5l" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-6-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tab" tabindex="-1">Command line</button></div><div aria-labelledby="tab-6-R2l0SHVi" class="sphinx-tabs-panel group-tab" id="panel-6-R2l0SHVi" name="R2l0SHVi" role="tabpanel" tabindex="0"><p>Like above, one can compare commits on GitHub by adjusting the following URL:
<code class="docutils literal notranslate"><span class="pre">https://github.com/USER/recipe-book/compare/VERSION1..VERSION2</span></code></p>
<p>Replace <code class="docutils literal notranslate"><span class="pre">USER</span></code> with your username and <code class="docutils literal notranslate"><span class="pre">VERSION1</span></code> and <code class="docutils literal notranslate"><span class="pre">VERSION2</span></code> with a commit hash or branch name.
Please try it out.</p>
</div><div aria-labelledby="tab-6-VlMgQ29kZQ==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-6-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tabpanel" tabindex="0"><p>Again, we recommend using the Command Line method.</p>
</div><div aria-labelledby="tab-6-Q29tbWFuZCBsaW5l" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-6-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tabpanel" tabindex="0"><p>First try this to get a short overview of the commits:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>log<span class="w"> </span>--oneline
</pre></div>
</div>
<p>Then try to compare any two commit identifiers with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span></code>.</p>
</div></div>
</section>
<section id="renaming-a-branch">
<h4>(8) Renaming a branch<a class="headerlink" href="#renaming-a-branch" title="Link to this heading"></a></h4>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-7-R2l0SHVi" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-7-R2l0SHVi" name="R2l0SHVi" role="tab" tabindex="0">GitHub</button><button aria-controls="panel-7-VlMgQ29kZQ==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-7-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tab" tabindex="-1">VS Code</button><button aria-controls="panel-7-Q29tbWFuZCBsaW5l" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-7-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tab" tabindex="-1">Command line</button></div><div aria-labelledby="tab-7-R2l0SHVi" class="sphinx-tabs-panel group-tab" id="panel-7-R2l0SHVi" name="R2l0SHVi" role="tabpanel" tabindex="0"><p>Branch button → View all branches → three dots at right side → Rename branch.</p>
</div><div aria-labelledby="tab-7-VlMgQ29kZQ==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-7-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tabpanel" tabindex="0"><p>Version control sidebar → Three dots (same as in step 2) → Branch → Rename branch.  Make sure you are on the right branch before you start.</p>
</div><div aria-labelledby="tab-7-Q29tbWFuZCBsaW5l" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-7-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tabpanel" tabindex="0"><p>Renaming the current branch:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>branch<span class="w"> </span>-m<span class="w"> </span>better-recipe
</pre></div>
</div>
<p>Renaming a different branch:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>branch<span class="w"> </span>-m<span class="w"> </span>new-recipe<span class="w"> </span>better-recipe
</pre></div>
</div>
</div></div>
</section>
<section id="creating-a-tag">
<h4>(9) Creating a tag<a class="headerlink" href="#creating-a-tag" title="Link to this heading"></a></h4>
<p>Tags are a way to mark a specific commit as important, for example a release
version. They are also like a sticky note, but they don’t move when new
commits are added.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-8-R2l0SHVi" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-8-R2l0SHVi" name="R2l0SHVi" role="tab" tabindex="0">GitHub</button><button aria-controls="panel-8-VlMgQ29kZQ==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-8-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tab" tabindex="-1">VS Code</button><button aria-controls="panel-8-Q29tbWFuZCBsaW5l" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-8-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tab" tabindex="-1">Command line</button></div><div aria-labelledby="tab-8-R2l0SHVi" class="sphinx-tabs-panel group-tab" id="panel-8-R2l0SHVi" name="R2l0SHVi" role="tabpanel" tabindex="0"><p>Click on the branch switcher, and then on “Tags”, then on “View all tags”, then
“Create a new release”:</p>
<figure class="align-default">
<a class="with-border reference internal image-reference" href="_images/github-create-tag.png"><img alt="Screenshot on GitHub where we create a new tag." class="with-border" src="_images/github-create-tag.png" style="width: 60%;" /></a>
</figure>
<p>What GitHub calls releases are actually tags in Git with additional metadata.
For the purpose of this exercise we can use them interchangeably.</p>
</div><div aria-labelledby="tab-8-VlMgQ29kZQ==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-8-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tabpanel" tabindex="0"><p>Version control sidebar → Three dots (same as in step 2) → Tags → Creat tag.  Make sure you are on the expected commit before you do this.</p>
</div><div aria-labelledby="tab-8-Q29tbWFuZCBsaW5l" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-8-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tabpanel" tabindex="0"><p>Creating a tag:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>tag<span class="w"> </span>-a<span class="w"> </span>v1.0<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;New manuscript version of my recipe for the pre-print&quot;</span>
</pre></div>
</div>
<p>If this repository has a remote called <code class="docutils literal notranslate"><span class="pre">origin</span></code>,
you can publish the tag there:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>v1.0<span class="w"> </span>
</pre></div>
</div>
</div></div>
</section>
</section>
<section id="discussion">
<h3>Discussion<a class="headerlink" href="#discussion" title="Link to this heading"></a></h3>
<p>In this part, we saw how we can make changes to our files.
With <a class="reference external" href="https://coderefinery.github.io/git-intro/reference/#term-branch" title="(in Introduction to version control with Git)"><span class="xref std std-term">branches</span></a>, we can
track several lines of work at once, and can compare
their differences.</p>
<ul class="simple">
<li><p>You could commit directly to <code class="docutils literal notranslate"><span class="pre">main</span></code> if there is only one single line
of work and it’s only you.</p></li>
<li><p>You could commit to branches if there are multiple lines of work at
once, and you don’t want them to interfere with each other.</p></li>
<li><p>Tags are useful to mark a specific commit as important, for example a
release version.</p></li>
</ul>
</section>
</section>
<span id="document-git-states"></span><section id="beyond-add-and-commit-undoing-mistakes">
<h2>Beyond add and commit: undoing mistakes<a class="headerlink" href="#beyond-add-and-commit-undoing-mistakes" title="Link to this heading"></a></h2>
<p>Most git users will typically use <code class="docutils literal notranslate"><span class="pre">pull</span></code>, <code class="docutils literal notranslate"><span class="pre">add</span></code>, <code class="docutils literal notranslate"><span class="pre">commit</span></code> and <code class="docutils literal notranslate"><span class="pre">push</span></code>
and these 4 commands will perform &gt;95% of the operations needed.</p>
<p>To be in control of Git,
it is beneficial to know at least
how to undo these commands.</p>
<div class="admonition-objectives objectives admonition" id="objectives-0">
<p class="admonition-title">Objectives</p>
<ul class="simple">
<li><p>Undo <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code></p></li>
<li><p>Undo <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code></p></li>
<li><p>Understand that there are many states, and the complexity that this entails</p></li>
</ul>
</div>
<p>Git offers you <strong>many versions</strong> of any file in the repository:</p>
<ul class="simple">
<li><p>the one in the <a class="reference internal" href="index.html#term-working-tree"><span class="xref std std-term">working tree</span></a></p></li>
<li><p>the one in the <a class="reference internal" href="index.html#term-index"><span class="xref std std-term">index</span></a> (the index is also called “staging area”)</p></li>
<li><p>as many versions as there are commits.</p></li>
</ul>
<p>The committed versions cannot be changed,
but new commits can be created,
and the versions in the <a class="reference internal" href="index.html#term-working-tree"><span class="xref std std-term">working tree</span></a> and in the <a class="reference internal" href="index.html#term-index"><span class="xref std std-term">index</span></a>
can be overwritten.</p>
<p>As a result, there can be many commands
that are used to copy one version of a file into another.</p>
<section id="the-3-kinds-of-states-of-a-file-in-git">
<h3>The 3 kinds of states of a file in Git<a class="headerlink" href="#the-3-kinds-of-states-of-a-file-in-git" title="Link to this heading"></a></h3>
<figure class="align-default" id="id1">
<a class="reference internal image-reference" href="_images/git-trinity.png"><img alt="The states of a file in Git and the commands to copy version between them" src="_images/git-trinity.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-text">The different versions of a file in Git
and the commands that can be used to copy
them into each other.</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
<table class="docutils align-default" id="id2">
<caption><span class="caption-text">The 3 Kinds of State of a file in Git - Table version</span><a class="headerlink" href="#id2" title="Link to this table"></a></caption>
<tbody>
<tr class="row-odd"><td><p>from \ to</p></td>
<td><p>Working Tree</p></td>
<td><p>Index</p></td>
<td><p>HEAD</p></td>
</tr>
<tr class="row-even"><td><p>Working Tree</p></td>
<td></td>
<td><p>commit -a<br />
<strong>add</strong></p></td>
<td><p>commit -a</p></td>
</tr>
<tr class="row-odd"><td><p>Index</p></td>
<td><p><strong>restore</strong></p></td>
<td></td>
<td><p><strong>commit</strong></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;commit&gt;</span></code></p></td>
<td><p>checkout<br />
reset –hard<br />
<strong>restore –source &lt;…&gt;</strong></p></td>
<td><p>checkout<br />
reset –hard<br />
<strong>reset (–mixed)</strong><br />
<strong>restore (–source &lt;…&gt;) –staged</strong></p></td>
<td><p>checkout<br />
reset –hard<br />
reset (–mixed)<br />
<strong>reset –soft</strong></p></td>
</tr>
</tbody>
</table>
</section>
<section id="undoing-git-add">
<h3>Undoing <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code><a class="headerlink" href="#undoing-git-add" title="Link to this heading"></a></h3>
<p>Undoing <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">&lt;path&gt;</span></code> typically means
either
to remove the file from the index completely,
but leaving it in the working tree
or
to recover the previous state of a file
in the index
.
This might not be always possible,
but in most cases the previous state
is the one in the last commit (<code class="docutils literal notranslate"><span class="pre">HEAD</span></code>).</p>
<table class="docutils align-default" id="id3">
<caption><span class="caption-text">Undoing <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code></span><a class="headerlink" href="#id3" title="Link to this table"></a></caption>
<tbody>
<tr class="row-odd"><td><p><strong>Problem</strong></p></td>
<td><p><strong>Solution</strong></p></td>
</tr>
<tr class="row-even"><td><p>File should not be tracked at all</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">rm</span> <span class="pre">--cached</span> <span class="pre">&lt;filename&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Changes to file should not go<br />
in  the next commit</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">restore</span> <span class="pre">--staged</span> <span class="pre">&lt;filename&gt;</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="undoing-git-commit">
<h3>Undoing <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code><a class="headerlink" href="#undoing-git-commit" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">commit</span></code> command cannot actually be undone <em>completely</em>,
since it created another immutable <a class="reference internal" href="index.html#term-object"><span class="xref std std-term">object</span></a> in the git repository.</p>
<p><strong>Practically</strong>, there are some different effects of <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code>
that we might want to undo:</p>
<table class="docutils align-default" id="id4">
<caption><span class="caption-text">Undoing <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code></span><a class="headerlink" href="#id4" title="Link to this table"></a></caption>
<tbody>
<tr class="row-odd"><td><p><strong>Problem</strong></p></td>
<td><p><strong>Solution</strong></p></td>
<td><p><strong>Comments</strong></p></td>
</tr>
<tr class="row-even"><td><p>Change to the files<br />
in the repository</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">revert</span> <span class="pre">&lt;commit&gt;</span></code></p></td>
<td><p>Creates another commit<br />
with the opposite changes</p></td>
</tr>
<tr class="row-odd"><td><p>Forgot to add a file<br />
before committing</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code><br />
<code class="docutils literal notranslate"><span class="pre">--amend</span></code><br />
<code class="docutils literal notranslate"><span class="pre">--no-edit</span></code></p></td>
<td><p>You can add the file,<br />
and then run this command.<br />
<strong>Don’t do it after <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span></code></strong></p></td>
</tr>
<tr class="row-even"><td><p>Wrong commit message</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span>&#160; <span class="pre">--amend</span></code></p></td>
<td><p>You can change the commit message.<br />
<strong>Don’t do it after <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span></code></strong></p></td>
</tr>
<tr class="row-odd"><td><p>Branch has moved<br />
to new commit</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">reset</span></code><br />
<code class="docutils literal notranslate"><span class="pre">--soft</span></code><br />
<code class="docutils literal notranslate"><span class="pre">&lt;last-good-commit&gt;</span></code></p></td>
<td><p>Moves the current branch<br />
to the chosen commit.<br />
<strong>Don’t do it after <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span></code></strong></p></td>
</tr>
</tbody>
</table>
<div class="admonition-avoid-rewriting-published-history callout admonition" id="callout-0">
<p class="admonition-title">Avoid rewriting published history</p>
<p>If you have already published your changes
to a branch
with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span></code>
and someone has already seen them
(and perhaps started working on them)
using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">reset</span></code>
or <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">--amend</span></code>
could be considered <strong>very rude</strong>!</p>
<p>Why?</p>
<p>With those commands
you do,
in other words,
<em>rewrite the history</em> of the branch.
This means that the tracking information of the branches
in the other repositories might be inconsistent.</p>
<p>If someone works on a history that has been later rewritten, it might result in
introduction of undesired modifications to the repository. Moreover, it might be
hard to spot that such changes occurred.</p>
<p>In that case,
better to use</p>
</div>
</section>
<section id="patching-partial-commands">
<h3>Patching: Partial commands<a class="headerlink" href="#patching-partial-commands" title="Link to this heading"></a></h3>
<p>Most of the commands listed above
accept a <code class="docutils literal notranslate"><span class="pre">--patch</span></code> (or <code class="docutils literal notranslate"><span class="pre">-p</span></code>) option
that allows to interactively select
the parts (<em>hunks</em>) of a file that will be copied,
very useful when some additional finesse is required.</p>
<div class="admonition-take-home-messages keypoints admonition" id="keypoints-0">
<p class="admonition-title">Take-home messages</p>
<ul class="simple">
<li><p>To undo <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code>,
typically you need to copy the content of <code class="docutils literal notranslate"><span class="pre">HEAD</span></code>
into the index.
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">restore</span> <span class="pre">--staged</span> <span class="pre">&lt;file-path&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">reset</span></code>
will do it.</p></li>
<li><p>To undo a commit, typically you want to use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">revert</span></code>.
If you have not used <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span></code> yet,
you have fancier options.</p></li>
<li><p>A convenient guide
to get out of unpleasant situations
can be found <a class="reference external" href="https://dangitgit.com/en">here</a>.</p></li>
<li><p>An alternative explanation of many useful “life-saving” commands
is available <a class="reference external" href="https://coderefinery.github.io/git-intro/recovering/">here</a></p></li>
</ul>
</div>
</section>
</section>
<span id="document-archaeology"></span><section id="inspecting-history">
<h2>Inspecting history<a class="headerlink" href="#inspecting-history" title="Link to this heading"></a></h2>
<div class="admonition-objectives objectives admonition" id="objectives-0">
<p class="admonition-title">Objectives</p>
<ul class="simple">
<li><p>Be able find a line of code, find out why it was introduced and when.</p></li>
<li><p>Be able to quickly find the commit that changed a behavior.</p></li>
</ul>
</div>
<div class="admonition-instructor-note instructor-note admonition" id="instructor-note-0">
<p class="admonition-title">Instructor note</p>
<ul class="simple">
<li><p>30 min teaching/type-along</p></li>
<li><p>20 min exercise</p></li>
</ul>
</div>
<section id="command-line-github-and-vs-code">
<h3>Command line, GitHub, and VS Code<a class="headerlink" href="#command-line-github-and-vs-code" title="Link to this heading"></a></h3>
<p>As usual, we offer ways to do this with the command line, VS Code, and
GitHub.</p>
<ul class="simple">
<li><p><strong>Command line</strong> is most powerful and relatively easy with this.
You may also use it along with other things. If you haven’t tried
it yet, we’d recommend you to give it a try.</p></li>
<li><p>The <strong>GitHub</strong> web interface allows many things to be done, but not
everything.</p></li>
<li><p><strong>VS Code</strong> allows some of these, but for some it’s easier to open
the VS Code terminal and run git there.</p></li>
</ul>
</section>
<section id="our-toolbox-for-history-inspection">
<h3>Our toolbox for history inspection<a class="headerlink" href="#our-toolbox-for-history-inspection" title="Link to this heading"></a></h3>
<div class="admonition-instructor-note instructor-note admonition" id="instructor-note-1">
<p class="admonition-title">Instructor note</p>
<p>First the instructor demonstrates few commands on a real life example
repository <a class="reference external" href="https://github.com/networkx/networkx">https://github.com/networkx/networkx</a> (mentioned in the amazing site <a class="reference external" href="https://programminghistorian.org/">The
Programming Historian</a>).
Later we will practice these in an archaeology exercise (below).</p>
</div>
<section id="warm-up-git-history-browser">
<h4>Warm-up: <a class="reference external" href="https://githistory.xyz/">“Git History” browser</a><a class="headerlink" href="#warm-up-git-history-browser" title="Link to this heading"></a></h4>
<p>As a warm-up we can try the <a class="reference external" href="https://githistory.xyz/">“Git History” browser</a>
on the README.rst file of the <a class="reference external" href="https://github.com/networkx/networkx">networkx</a> repository:</p>
<ul class="simple">
<li><p>Visit and browse <a class="reference external" href="https://github.githistory.xyz/networkx/networkx/blob/main/README.rst">https://github.githistory.xyz/networkx/networkx/blob/main/README.rst</a> (use left/right keys).</p></li>
<li><p>You can try this on some of your GitHub repositories, too!</p></li>
</ul>
</section>
<section id="searching-text-patterns-in-the-repository">
<h4>Searching text patterns in the repository<a class="headerlink" href="#searching-text-patterns-in-the-repository" title="Link to this heading"></a></h4>
<p>With <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">grep</span></code> you can find all lines in a repository which contain some string or regular expression.
This is useful to find out where in the code some variable is used or
some error message printed.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-Q29tbWFuZCBsaW5l" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-0-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tab" tabindex="0">Command line</button><button aria-controls="panel-0-R2l0SHVi" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-R2l0SHVi" name="R2l0SHVi" role="tab" tabindex="-1">GitHub</button><button aria-controls="panel-0-VlMgQ29kZQ==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tab" tabindex="-1">VS Code</button><button aria-controls="panel-0-UlN0dWRpbw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-UlN0dWRpbw==" name="UlN0dWRpbw==" role="tab" tabindex="-1">RStudio</button></div><div aria-labelledby="tab-0-Q29tbWFuZCBsaW5l" class="sphinx-tabs-panel group-tab" id="panel-0-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tabpanel" tabindex="0"><p>The Git command is as described above:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>grep<span class="w"> </span>TEXT
<span class="gp">$ </span>git<span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;some text with spaces&quot;</span>
</pre></div>
</div>
<p>In the <a class="reference external" href="https://github.com/networkx/networkx">networkx</a> repository you can try:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/networkx/networkx
<span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>networkx
<span class="gp">$ </span>git<span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span>fixme
</pre></div>
</div>
<p>While <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">grep</span></code> searches the <strong>current state</strong> of the repository,
it is also possible to search through all changes with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span> <span class="pre">-S</span> <span class="pre">sometext</span></code>
which can be useful to find where something got removed.</p>
</div><div aria-labelledby="tab-0-R2l0SHVi" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-R2l0SHVi" name="R2l0SHVi" role="tabpanel" tabindex="0"><p>We can try the same example in the browser:
<a class="reference external" href="https://github.com/search?q=repo%3Anetworkx%2Fnetworkx%20fixme&amp;amp;type=code">https://github.com/search?q=repo%3Anetworkx%2Fnetworkx fixme&amp;type=code</a></p>
<figure class="align-default" id="id1">
<a class="with-border reference internal image-reference" href="_images/search.png"><img alt="Searching for &quot;fixme&quot; in a GitHub repository" class="with-border" src="_images/search.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-text">Searching for “fixme” in a GitHub repository.</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
</div><div aria-labelledby="tab-0-VlMgQ29kZQ==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tabpanel" tabindex="0"><p>Our example repository is <a class="reference external" href="https://github.com/networkx/networkx">https://github.com/networkx/networkx</a>.
From a new VS Code window, select “Clone Git repository” and enter
that URL.</p>
<p>Searching with the magnifying glass from the left sidebar is
equivalent to <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">grep</span></code>.</p>
</div><div aria-labelledby="tab-0-UlN0dWRpbw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-UlN0dWRpbw==" name="UlN0dWRpbw==" role="tabpanel" tabindex="0"><p>Edit → Find in files.</p>
<p>Use the command line method for more power.</p>
</div></div>
</section>
<section id="inspecting-individual-commits">
<h4>Inspecting individual commits<a class="headerlink" href="#inspecting-individual-commits" title="Link to this heading"></a></h4>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-Q29tbWFuZCBsaW5l" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-1-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tab" tabindex="0">Command line</button><button aria-controls="panel-1-R2l0SHVi" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-R2l0SHVi" name="R2l0SHVi" role="tab" tabindex="-1">GitHub</button><button aria-controls="panel-1-VlMgQ29kZQ==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tab" tabindex="-1">VS Code</button><button aria-controls="panel-1-UlN0dWRpbw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-UlN0dWRpbw==" name="UlN0dWRpbw==" role="tab" tabindex="-1">RStudio</button></div><div aria-labelledby="tab-1-Q29tbWFuZCBsaW5l" class="sphinx-tabs-panel group-tab" id="panel-1-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tabpanel" tabindex="0"><p>We have seen this one before already. Using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">show</span></code> we can inspect an individual commit if
we know its hash:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>show<span class="w"> </span>HASH
</pre></div>
</div>
<p>For instance:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>show<span class="w"> </span>759d589bdfa61aff99e0535938f14f67b01c83f7
</pre></div>
</div>
</div><div aria-labelledby="tab-1-R2l0SHVi" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-R2l0SHVi" name="R2l0SHVi" role="tabpanel" tabindex="0"><p>We can try the same example in the browser:
<a class="reference external" href="https://github.com/networkx/networkx/commit/759d589bdfa61aff99e0535938f14f67b01c83f7">https://github.com/networkx/networkx/commit/759d589bdfa61aff99e0535938f14f67b01c83f7</a></p>
<figure class="align-default" id="id2">
<a class="with-border reference internal image-reference" href="_images/show.png"><img alt="Inspecting an individual commit on GitHub" class="with-border" src="_images/show.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-text">Inspecting an individual commit on GitHub.</span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
</div><div aria-labelledby="tab-1-VlMgQ29kZQ==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tabpanel" tabindex="0"><p>We don’t know of a built-in way to see every single Git commit in
order (extensions allow this).  You can open the terminal and run
the command line option.</p>
<p>But, if you open single files, a “Timeline” view under the
explorer shows changes to <em>that file</em>.  You can click on a change
to see the details.</p>
</div><div aria-labelledby="tab-1-UlN0dWRpbw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-UlN0dWRpbw==" name="UlN0dWRpbw==" role="tabpanel" tabindex="0"><p>The graph view lets you select certain commits for viewing.  The search box lets you search for a certain commit by hash.</p>
<figure class="align-default">
<a class="with-border reference internal image-reference" href="_images/rstudio-graph-view.png"><img alt="RStudio screenshot as described" class="with-border" src="_images/rstudio-graph-view.png" style="width: 80%;" /></a>
</figure>
</div></div>
</section>
<section id="line-by-line-code-annotation-with-metadata">
<h4>Line-by-line code annotation with metadata<a class="headerlink" href="#line-by-line-code-annotation-with-metadata" title="Link to this heading"></a></h4>
<p>With <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">annotate</span></code> you can see line by line who and <strong>when</strong> the line was
modified last. It also prints the precise hash of the last change which
modified each line. Incredibly useful for reproducibility.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-Q29tbWFuZCBsaW5l" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-2-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tab" tabindex="0">Command line</button><button aria-controls="panel-2-R2l0SHVi" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-R2l0SHVi" name="R2l0SHVi" role="tab" tabindex="-1">GitHub</button><button aria-controls="panel-2-VlMgQ29kZQ==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tab" tabindex="-1">VS Code</button><button aria-controls="panel-2-UlN0dWRpbw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-UlN0dWRpbw==" name="UlN0dWRpbw==" role="tab" tabindex="-1">RStudio</button></div><div aria-labelledby="tab-2-Q29tbWFuZCBsaW5l" class="sphinx-tabs-panel group-tab" id="panel-2-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>annotate<span class="w"> </span>FILE
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>annotate<span class="w"> </span>networkx/convert_matrix.py
</pre></div>
</div>
<p>If you annotate in a terminal and the file is longer than the screen, Git by default uses the program <code class="docutils literal notranslate"><span class="pre">less</span></code> to
scroll the output.
Use <code class="docutils literal notranslate"><span class="pre">/sometext</span></code> <code class="docutils literal notranslate"><span class="pre">&lt;ENTER&gt;</span></code> to find “sometext” and you can cycle through the results with <code class="docutils literal notranslate"><span class="pre">n</span></code> (next) and <code class="docutils literal notranslate"><span class="pre">N</span></code> (last).
You can also use page up/down to scroll. You can quit with <code class="docutils literal notranslate"><span class="pre">q</span></code>.</p>
</div><div aria-labelledby="tab-2-R2l0SHVi" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-R2l0SHVi" name="R2l0SHVi" role="tabpanel" tabindex="0"><p>We can try the same example in the browser:
<a class="reference external" href="https://github.com/networkx/networkx/blame/main/networkx/convert_matrix.py">https://github.com/networkx/networkx/blame/main/networkx/convert_matrix.py</a></p>
<figure class="align-default" id="id3">
<a class="with-border reference internal image-reference" href="_images/annotate.png"><img alt="Screenshot of file annotation on GitHub" class="with-border" src="_images/annotate.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-text">Screenshot of file annotation on GitHub.</span><a class="headerlink" href="#id3" title="Link to this image"></a></p>
</figcaption>
</figure>
</div><div aria-labelledby="tab-2-VlMgQ29kZQ==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tabpanel" tabindex="0"><p>It seems this needs an extension.  We’d recommend trying the
command line method for now.</p>
</div><div aria-labelledby="tab-2-UlN0dWRpbw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-UlN0dWRpbw==" name="UlN0dWRpbw==" role="tabpanel" tabindex="0"><p>Use the command line method (from what we can tell).</p>
</div></div>
<div class="admonition-discussion discussion important admonition" id="discussion-0">
<p class="admonition-title">Discussion</p>
<p>Discuss how these relatively trivial changes affect the annotation:</p>
<ul class="simple">
<li><p>Wrapping long lines of text/code into shorter lines</p></li>
<li><p>Auto-formatting tools such as <code class="docutils literal notranslate"><span class="pre">black</span></code></p></li>
<li><p>Editors that automatically remove trailing whitespace</p></li>
</ul>
</div>
</section>
<section id="inspecting-code-in-the-past">
<h4>Inspecting code in the past<a class="headerlink" href="#inspecting-code-in-the-past" title="Link to this heading"></a></h4>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-3-Q29tbWFuZCBsaW5l" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-3-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tab" tabindex="0">Command line</button><button aria-controls="panel-3-R2l0SHVi" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-3-R2l0SHVi" name="R2l0SHVi" role="tab" tabindex="-1">GitHub</button><button aria-controls="panel-3-VlMgQ29kZQ==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-3-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tab" tabindex="-1">VS Code</button><button aria-controls="panel-3-UlN0dWRpbw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-3-UlN0dWRpbw==" name="UlN0dWRpbw==" role="tab" tabindex="-1">RStudio</button></div><div aria-labelledby="tab-3-Q29tbWFuZCBsaW5l" class="sphinx-tabs-panel group-tab" id="panel-3-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tabpanel" tabindex="0"><p>We can create branches pointing to a commit in the past.
This is the recommended mechanism to inspect old code:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>--create<span class="w"> </span>BRANCHNAME<span class="w"> </span>HASH
</pre></div>
</div>
<p>Example (lines starting with “#” are only comments):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="c1"># create branch called &quot;older-code&quot; from hash 347e6292419b</span>
<span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>--create<span class="w"> </span>older-code<span class="w"> </span>347e6292419bd0e4bff077fe971f983932d7a0e9

<span class="gp">$ </span><span class="c1"># now you can navigate and inspect the code as it was back then</span>
<span class="gp">$ </span><span class="c1"># ...</span>

<span class="gp">$ </span><span class="c1"># after we are done we can switch back to &quot;main&quot;</span>
<span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>main

<span class="gp">$ </span><span class="c1"># if we like we can delete the &quot;older-code&quot; branch</span>
<span class="gp">$ </span>git<span class="w"> </span>branch<span class="w"> </span>-d<span class="w"> </span>older-code
</pre></div>
</div>
<p>On old Git versions which do not know the <code class="docutils literal notranslate"><span class="pre">switch</span></code> command (before 2.23), you
need to use this instead:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>BRANCHNAME<span class="w"> </span>SOMEHASH
</pre></div>
</div>
</div><div aria-labelledby="tab-3-R2l0SHVi" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-3-R2l0SHVi" name="R2l0SHVi" role="tabpanel" tabindex="0"><p>We now know how to visit a specific commit:
<a class="reference external" href="https://github.com/networkx/networkx/commit/347e629">https://github.com/networkx/networkx/commit/347e629</a></p>
<p>Once we are there we can “Browse files” at that point in history.</p>
<figure class="align-default" id="id4">
<a class="with-border reference internal image-reference" href="_images/browse-files.png"><img alt="Browsing code in the past on GitHub" class="with-border" src="_images/browse-files.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-text">Browsing code in the past on GitHub.</span><a class="headerlink" href="#id4" title="Link to this image"></a></p>
</figcaption>
</figure>
</div><div aria-labelledby="tab-3-VlMgQ29kZQ==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-3-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tabpanel" tabindex="0"><p>Switch to “Source Control”, then the “…” menu, then “Branch”, then “Create new branch from…” and now you can type a commit identifier (hash).</p>
<p>Make sure you change back to the main branch when you are done.</p>
</div><div aria-labelledby="tab-3-UlN0dWRpbw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-3-UlN0dWRpbw==" name="UlN0dWRpbw==" role="tabpanel" tabindex="0"><p>It seems you can only create branches from the present (at least without extensions). Use the command line method.</p>
</div></div>
</section>
</section>
<section id="exercise">
<h3>Exercise<a class="headerlink" href="#exercise" title="Link to this heading"></a></h3>
<p>This is described with the command line method, but by looking above
you can translate to the other options.</p>
<div class="admonition-exercise-explore-basic-archaeology-commands-20-min exercise important admonition" id="exercise-0">
<p class="admonition-title">Exercise: Explore basic archaeology commands (20 min)</p>
<p>Let us explore the value of these commands in an exercise.  Future
exercises do not depend on this, so it is OK if you do not complete
it fully.</p>
<p>Exercise steps:</p>
<ul>
<li><p><strong>Make sure you are not inside another Git repository</strong> when running this
exercise. If you are, first step “outside” of it.
We want to avoid creating a Git repository inside another Git repository.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-4-Q29tbWFuZCBsaW5l" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-4-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tab" tabindex="0">Command line</button><button aria-controls="panel-4-R2l0SHVi" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-4-R2l0SHVi" name="R2l0SHVi" role="tab" tabindex="-1">GitHub</button><button aria-controls="panel-4-VlMgQ29kZQ==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-4-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tab" tabindex="-1">VS Code</button><button aria-controls="panel-4-UlN0dWRpbw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-4-UlN0dWRpbw==" name="UlN0dWRpbw==" role="tab" tabindex="-1">RStudio</button></div><div aria-labelledby="tab-4-Q29tbWFuZCBsaW5l" class="sphinx-tabs-panel group-tab" id="panel-4-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tabpanel" tabindex="0"><p>You can check if you are inside a Git repository with:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>status

<span class="go">fatal: not a git repository (or any of the parent directories): .git</span>
</pre></div>
</div>
<p>You want to see the above message which tells us that this is not a Git repository.</p>
</div><div aria-labelledby="tab-4-R2l0SHVi" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-4-R2l0SHVi" name="R2l0SHVi" role="tabpanel" tabindex="0"><p>This is not a problem in the GitHub web interface since we are not
creating a new local repository.</p>
</div><div aria-labelledby="tab-4-VlMgQ29kZQ==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-4-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tabpanel" tabindex="0"><p><strong>Warning: many of these exercise tasks aren’t possible in the VS Code interface without extensions.  You can use VS Code to clone the project, but be prepared to start the terminal to do the main tasks.</strong></p>
<p>“File” → “New Window”.</p>
</div><div aria-labelledby="tab-4-UlN0dWRpbw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-4-UlN0dWRpbw==" name="UlN0dWRpbw==" role="tabpanel" tabindex="0"><p><strong>Warning: many of these exercise tasks aren’t possible in the RStudio interface.  You can use RStudio to clone the project, but be prepared to start the terminal to do the main tasks.</strong></p>
<p>File → New Project.</p>
</div></div>
</li>
<li><p>Clone this repository:
<a class="reference external" href="https://github.com/networkx/networkx.git">https://github.com/networkx/networkx.git</a>.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-5-Q29tbWFuZCBsaW5l" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-5-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tab" tabindex="0">Command line</button><button aria-controls="panel-5-R2l0SHVi" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-5-R2l0SHVi" name="R2l0SHVi" role="tab" tabindex="-1">GitHub</button><button aria-controls="panel-5-VlMgQ29kZQ==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-5-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tab" tabindex="-1">VS Code</button><button aria-controls="panel-5-UlN0dWRpbw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-5-UlN0dWRpbw==" name="UlN0dWRpbw==" role="tab" tabindex="-1">RStudio</button></div><div aria-labelledby="tab-5-Q29tbWFuZCBsaW5l" class="sphinx-tabs-panel group-tab" id="panel-5-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/networkx/networkx.git
</pre></div>
</div>
</div><div aria-labelledby="tab-5-R2l0SHVi" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-5-R2l0SHVi" name="R2l0SHVi" role="tabpanel" tabindex="0"><p>Nothing to clone. We will try to inspect the repository directly on GitHub.</p>
</div><div aria-labelledby="tab-5-VlMgQ29kZQ==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-5-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tabpanel" tabindex="0"><p>From a new VS Code window, select “Clone Git repository” and enter
that URL.</p>
</div><div aria-labelledby="tab-5-UlN0dWRpbw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-5-UlN0dWRpbw==" name="UlN0dWRpbw==" role="tabpanel" tabindex="0"><p>From the new project window, choose Version Control → Git → and enter the URL</p>
</div></div>
</li>
<li><p>Then let us all <strong>make sure we are working on a well-defined version</strong> of the repository.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-6-Q29tbWFuZCBsaW5l" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-6-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tab" tabindex="0">Command line</button><button aria-controls="panel-6-R2l0SHVi" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-6-R2l0SHVi" name="R2l0SHVi" role="tab" tabindex="-1">GitHub</button><button aria-controls="panel-6-VlMgQ29kZQ==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-6-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tab" tabindex="-1">VS Code</button><button aria-controls="panel-6-UlN0dWRpbw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-6-UlN0dWRpbw==" name="UlN0dWRpbw==" role="tab" tabindex="-1">RStudio</button></div><div aria-labelledby="tab-6-Q29tbWFuZCBsaW5l" class="sphinx-tabs-panel group-tab" id="panel-6-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tabpanel" tabindex="0"><p>Step into the new directory and create an exercise branch from the
networkx-2.6.3 tag/release:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>networkx
<span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>--create<span class="w"> </span>exercise<span class="w"> </span>networkx-2.6.3
</pre></div>
</div>
<p>On old Git versions which do not know the <code class="docutils literal notranslate"><span class="pre">switch</span></code> command (before 2.23), you
need to use this instead:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>exercise<span class="w"> </span>networkx-2.6.3
</pre></div>
</div>
</div><div aria-labelledby="tab-6-R2l0SHVi" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-6-R2l0SHVi" name="R2l0SHVi" role="tabpanel" tabindex="0"><p>We can visit the version directly: <a class="reference external" href="https://github.com/networkx/networkx/tree/networkx-2.6.3">https://github.com/networkx/networkx/tree/networkx-2.6.3</a></p>
</div><div aria-labelledby="tab-6-VlMgQ29kZQ==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-6-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tabpanel" tabindex="0"><p>Switch to “Source Control”, then the “…” menu, then “Branch”, then “Create new branch from…” and select “networkx-2.6.3”.</p>
</div><div aria-labelledby="tab-6-UlN0dWRpbw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-6-UlN0dWRpbw==" name="UlN0dWRpbw==" role="tabpanel" tabindex="0"><p>Use the command line method (but you don’t need to <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">networkx</span></code>, the RStudio terminal starts in the right place.)  So, run this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>--create<span class="w"> </span>exercise<span class="w"> </span>networkx-2.6.3
</pre></div>
</div>
<p>(and if it doesn’t work, check Command Line for the command for older git)</p>
</div></div>
</li>
</ul>
<p>Then using the above toolbox try to:</p>
<ol class="arabic simple">
<li><p>Find the code line which contains <code class="docutils literal notranslate"><span class="pre">&quot;Logic</span> <span class="pre">error</span> <span class="pre">in</span> <span class="pre">degree_correlation&quot;</span></code>.</p></li>
<li><p>Find out when this line was last modified or added. Find the actual commit which modified that line.</p></li>
<li><p>Inspect that commit with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">show</span></code>.</p></li>
<li><p>Create a branch pointing to the past when that commit was created to be
able to browse and use the code as it was back then.</p></li>
<li><p>How would you bring the code to the version of the code right before that line was last modified?</p></li>
</ol>
<div class="admonition-solution solution important dropdown admonition" id="solution-0">
<p class="admonition-title">Solution</p>
<p>We provide here a solution for the command line but we also encourage you to
try to solve this in the browser.</p>
<ol class="arabic">
<li><p>We use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">grep</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;Logic error in degree_correlation&quot;</span>
</pre></div>
</div>
<p>This gives the output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">networkx</span><span class="o">/</span><span class="n">algorithms</span><span class="o">/</span><span class="n">threshold</span><span class="o">.</span><span class="n">py</span><span class="p">:</span>                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Logic error in degree_correlation&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">rdi</span><span class="p">)</span>
</pre></div>
</div>
<p>Maybe you also want to know the line number:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>grep<span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;Logic error in degree_correlation&quot;</span>
</pre></div>
</div>
</li>
<li><p>We use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">annotate</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>annotate<span class="w"> </span>networkx/algorithms/threshold.py
</pre></div>
</div>
<p>Then search for “Logic error” by typing “/Logic error” followed by Enter.
The last commit that modified it was <code class="docutils literal notranslate"><span class="pre">90544b4fa</span></code> (unless that line changed since).</p>
</li>
<li><p>We use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">show</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>show<span class="w"> </span>90544b4fa
</pre></div>
</div>
</li>
<li><p>Create a branch pointing to that commit (here we called the branch “past-code”):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>branch<span class="w"> </span>past-code<span class="w"> </span>90544b4fa
</pre></div>
</div>
</li>
<li><p>This is a compact way to access the first parent of <code class="docutils literal notranslate"><span class="pre">90544b4fa</span></code> (here we
called the branch “just-before”):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>--create<span class="w"> </span>just-before<span class="w"> </span>90544b4fa~1
</pre></div>
</div>
</li>
</ol>
</div>
</div>
</section>
<hr class="docutils" />
<section id="finding-out-when-something-broke-changed-with-git-bisect">
<h3>Finding out when something broke/changed with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">bisect</span></code><a class="headerlink" href="#finding-out-when-something-broke-changed-with-git-bisect" title="Link to this heading"></a></h3>
<p>This only works with the command line.</p>
<blockquote>
<div><p><em>“But I am sure it used to work! Strange.”</em></p>
</div></blockquote>
<p>Sometimes you realize that something broke.
You know that it used to work.
You do not know when it broke.</p>
<div class="admonition-how-would-you-solve-this discussion important admonition" id="discussion-1">
<p class="admonition-title">How would you solve this?</p>
<p>Before we go on first discuss how you would solve this problem: You know that it worked
500 commits ago but it does not work now.</p>
<ul class="simple">
<li><p>How would you find the commit which changed it?</p></li>
<li><p>Why could it be useful to know the commit that changed it?</p></li>
</ul>
</div>
<p>We will probably arrive at a solution which is similar to <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">bisect</span></code>:</p>
<ul>
<li><p>First find out a commit in past when it worked.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>bisect<span class="w"> </span>start
<span class="gp">$ </span>git<span class="w"> </span>bisect<span class="w"> </span>good<span class="w"> </span>f0ea950<span class="w">  </span><span class="c1"># this is a commit that worked</span>
<span class="gp">$ </span>git<span class="w"> </span>bisect<span class="w"> </span>bad<span class="w"> </span>main<span class="w">      </span><span class="c1"># last commit is broken</span>
</pre></div>
</div>
</li>
<li><p>Now compile and/or run and/or test and decide whether “good” or “bad”.</p></li>
<li><p>This is how you can tell Git that this was a working commit:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>bisect<span class="w"> </span>good
</pre></div>
</div>
</li>
<li><p>And this is how you can tell Git that this was not a working commit:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>bisect<span class="w"> </span>bad
</pre></div>
</div>
</li>
<li><p>Then bisect/iterate your way until you find the commit that broke it.</p></li>
<li><p>If you want to go back to start, type <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">bisect</span> <span class="pre">reset</span></code>.</p></li>
<li><p>This can even be automatized with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">bisect</span> <span class="pre">run</span> <span class="pre">SCRIPT</span></code>.
For this you write a script that returns zero/non-zero (success/failure).</p></li>
</ul>
</section>
<section id="optional-exercise-git-bisect">
<span id="exercise-bisect"></span><h3>Optional exercise: Git bisect<a class="headerlink" href="#optional-exercise-git-bisect" title="Link to this heading"></a></h3>
<p>This only works with the command line.</p>
<div class="admonition-optional-history-2-use-git-bisect-to-find-the-bad-commit exercise important admonition" id="exercise-1">
<p class="admonition-title">(optional) History-2: Use git bisect to find the bad commit</p>
<p>In this exercise, we use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">bisect</span></code> on an example repository.  It
is OK if you do not complete this exercise fully.</p>
<p>Begin by cloning <a class="reference external" href="https://github.com/coderefinery/git-bisect-exercise">https://github.com/coderefinery/git-bisect-exercise</a>.</p>
<p><strong>Motivation</strong></p>
<p>The motivation for this exercise is to be able to do archaeology with Git on a
source code where the bug is difficult to see visually. <strong>Finding the offending
commit is often more than half the debugging</strong>.</p>
<p><strong>Background</strong></p>
<p>The script <code class="docutils literal notranslate"><span class="pre">get_pi.py</span></code> approximates pi using terms of the Nilakantha series. It
should produce 3.14 but it does not. The script broke at some point and
produces 3.57 using the last commit:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python<span class="w"> </span>get_pi.py

<span class="go">3.57</span>
</pre></div>
</div>
<p>At some point within the 500 first commits, an error was introduced. The only
thing we know is that the first commit worked correctly.</p>
<p><strong>Your task</strong></p>
<ul class="simple">
<li><p>Clone this repository and use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">bisect</span></code> to find the commit which
broke the computation
(<a class="reference external" href="https://github.com/coderefinery/git-bisect-exercise#solutions-spoiler-alert">solution - spoiler alert!</a>).</p></li>
<li><p>Once you have found the offending commit, also practice navigating to the last good commit.</p></li>
<li><p>Bonus exercise:
Write a script that checks for a correct result and use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">bisect</span> <span class="pre">run</span></code> to
find the offending commit automatically
(<a class="reference external" href="https://github.com/coderefinery/git-bisect-exercise#solutions-spoiler-alert">solution - spoiler alert!</a>).</p></li>
</ul>
<p><strong>Hints</strong></p>
<p>Finding the first commit:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>log<span class="w"> </span>--oneline<span class="w"> </span><span class="p">|</span><span class="w"> </span>tail<span class="w"> </span>-n<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
<p>How to navigate to the parent of a commit with hash SOMEHASH:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>--create<span class="w"> </span>BRANCHNAME<span class="w"> </span>SOMEHASH~1
</pre></div>
</div>
<p>Instead of a tilde you can also use this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>--create<span class="w"> </span>BRANCHNAME<span class="w"> </span>SOMEHASH^
</pre></div>
</div>
</div>
</section>
<section id="summary">
<h3>Summary<a class="headerlink" href="#summary" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>git log/grep/annotate/show/bisect is a powerful combination when doing archaeology in a project on the command line.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">switch</span> <span class="pre">--create</span> <span class="pre">NAME</span> <span class="pre">HASH</span></code> is the recommended mechanism to inspect old code on the command line.</p></li>
<li><p>Most of these commands can be used in the GitHub web interface (except <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">bisect</span></code>).</p></li>
</ul>
</section>
</section>
<span id="document-internals"></span><section id="optional-git-internals">
<h2>Optional: Git Internals<a class="headerlink" href="#optional-git-internals" title="Link to this heading"></a></h2>
<div class="admonition-objectives objectives admonition" id="objectives-0">
<p class="admonition-title">Objectives</p>
<ul class="simple">
<li><p>Understand what is easy to do with git, and what is not easy</p></li>
</ul>
</div>
<div class="admonition-instructor-note instructor-note admonition" id="instructor-note-0">
<p class="admonition-title">Instructor note</p>
<ul class="simple">
<li><p>15 min teaching/type-along</p></li>
<li><p>15 min exercise</p></li>
</ul>
</div>
<section id="down-the-rabbit-hole">
<h3>Down the rabbit hole<a class="headerlink" href="#down-the-rabbit-hole" title="Link to this heading"></a></h3>
<p>When usually working with Git,
<strong>you will never need to go inside .git</strong>,
but in this exercise we will
in order to learn about</p>
<ul class="simple">
<li><p>how branches are implemented in Git,
and how to use them freely</p></li>
<li><p>how you can avoid losing data with Git.</p></li>
</ul>
<div class="admonition-prerequisites prerequisites admonition" id="prerequisites-0">
<p class="admonition-title">Prerequisites</p>
<p>For this exercise create a new repository and commit a couple of changes.
You can also clone this repository:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/mmesiti/merge-fu.git
</pre></div>
</div>
</div>
<p>Now that we’ve made a couple of commits let us look at what is happening under
the hood.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>.git
<span class="gp">$ </span>ls<span class="w"> </span>-l

<span class="go">drwxr-xr-x   - user 25 Aug 15:51 branches</span>
<span class="go">.rw-r--r-- 499 user 25 Aug 15:52 COMMIT_EDITMSG</span>
<span class="go">.rw-r--r--  92 user 25 Aug 15:51 config</span>
<span class="go">.rw-r--r--  73 user 25 Aug 15:51 description</span>
<span class="go">.rw-r--r--  21 user 25 Aug 15:51 HEAD</span>
<span class="go">drwxr-xr-x   - user 25 Aug 15:51 hooks</span>
<span class="go">.rw-r--r-- 137 user 25 Aug 15:52 index</span>
<span class="go">drwxr-xr-x   - user 25 Aug 15:51 info</span>
<span class="go">drwxr-xr-x   - user 25 Aug 15:52 logs</span>
<span class="go">drwxr-xr-x   - user 25 Aug 15:52 objects</span>
<span class="go">drwxr-xr-x   - user 25 Aug 15:51 refs</span>
</pre></div>
</div>
<p>Git stores everything under the .git folder in your repository.<br />
We will have a look at the <code class="docutils literal notranslate"><span class="pre">objects</span></code> and the <code class="docutils literal notranslate"><span class="pre">refs</span></code> directories.</p>
<p>In the <a class="reference internal" href="index.html#term-object"><span class="xref std std-term">objects</span></a> directory we find, among others, 3 kinds of objects:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">commit</span></code>s: These represent the commits we have made with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">blob</span></code>s: These represent snapshots of all the files we have ever added to the repo
with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tree</span></code>s: These represent directories containing the files we have added,
and reference other <code class="docutils literal notranslate"><span class="pre">tree</span></code>s (subdirectories) and <code class="docutils literal notranslate"><span class="pre">blob</span></code>s (files that we have added).</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">commit</span></code> objects contain information about the author and the commit message,
and every <code class="docutils literal notranslate"><span class="pre">commit</span></code> object references a single <code class="docutils literal notranslate"><span class="pre">tree</span></code> object.</p>
<p><strong>All objects are named as the SHA-1 hash (a 40-character hexadecimal string)
that is computed on their content.</strong><br />
This means that all objects are <em>immutable</em>.</p>
<figure class="align-default" id="id1">
<a class="reference internal image-reference" href="_images/commit-and-tree.png"><img alt="A commit inside Git" src="_images/commit-and-tree.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-text">States of a Git repository. Image from the <a class="reference external" href="https://git-scm.com/book/">Pro Git book</a>. License CC BY 3.0.</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
<div class="admonition-changes-and-their-effect-files-and-commits exercise important admonition" id="exercise-0">
<p class="admonition-title">Changes and their effect: files and commits</p>
<p>Refer to the figure above, and discuss:
which SHA-1 hashes would change in the diagram if:</p>
<ul class="simple">
<li><p>the content of the first file is changed,</p></li>
<li><p>we recreate a commit with another message or author</p></li>
<li><p>we recreate a commit with the same message or author</p></li>
</ul>
<p>Is it possibe to have multiple commits refer to the same tree?
What happens when you use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">revert</span></code>?</p>
<div class="admonition-solution solution important dropdown admonition" id="solution-0">
<p class="admonition-title">Solution</p>
<p>When reverting a commit B that happens after a commit A,
the new commit will point at the same tree as A.</p>
</div>
</div>
<p>Once you have several commits,
each commit object also links
to the hash of the previous commit(s)
(there is more than one previous commit for for merge commits).
The commits form a <a class="reference external" href="http://eagain.net/articles/git-for-computer-scientists/">directed acyclic graph</a>
(do not worry if the term is not familiar).</p>
<figure class="align-default" id="id2">
<a class="reference internal image-reference" href="_images/commits-and-parents.png"><img alt="A commit and its parents" src="_images/commits-and-parents.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-text">A commit and its parents. Image from the <a class="reference external" href="https://git-scm.com/book/">Pro Git book</a>. License CC BY 3.0.</span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
<div class="admonition-changes-and-their-effect-changing-history discussion important admonition" id="discussion-0">
<p class="admonition-title">Changes and their effect: changing history</p>
<p>Refer to the figure above, and discuss:
which SHA-1 hashes would change in the diagram if:</p>
<ul class="simple">
<li><p>The the 3rd commit were changed</p></li>
<li><p>The 2nd commit were changed</p></li>
</ul>
</div>
</section>
<section id="git-is-at-its-core-a-content-addressed-storage-system">
<h3>Git is at its core a content-addressed storage system<a class="headerlink" href="#git-is-at-its-core-a-content-addressed-storage-system" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>CAS: <a class="reference external" href="https://en.wikipedia.org/wiki/Content-addressable_storage">“mechanism for storing information that can be retrieved based on its content, not its storage location”</a></p></li>
<li><p>Content address is the content digest (SHA-1 checksum)</p></li>
<li><p>Stored data does not change,
so when we modify commits or add new version of the files,
we always create new objects.
Git doesn’t delete the old objects right away,
which is why it is <em>very hard to lose data if you commit it once</em>.</p></li>
</ul>
<div class="admonition-a-look-at-the-objects exercise important admonition" id="exercise-1">
<p class="admonition-title">A look at the objects</p>
<p>Let us poke a bit into raw objects! Start with:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>cat-file<span class="w"> </span>-p<span class="w"> </span>HEAD
</pre></div>
</div>
<p>Then explore the <code class="docutils literal notranslate"><span class="pre">tree</span></code> object, then the <code class="docutils literal notranslate"><span class="pre">file</span></code> object, etc. recursively using the hashes you see.</p>
</div>
</section>
<section id="demo-if-you-add-it-you-don-t-lose-it-for-a-while">
<h3>Demo: If you add it, you don’t lose it (for a while)<a class="headerlink" href="#demo-if-you-add-it-you-don-t-lose-it-for-a-while" title="Link to this heading"></a></h3>
<p>A common way to (apparently) lose work
is to use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> indiscriminately.</p>
<p>You make some changes to a file,
(let us call this version A)
you <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> them,
then you make some other changes
(let us call this version B)
and you <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> those again.</p>
<p>Now version A is apparently lost,
and if we realize that we need it back
we typically click nervously on the “undo” arrow of our editor.</p>
<p>But fear not! Try this.</p>
<ol class="arabic">
<li><p>Create a file named <code class="docutils literal notranslate"><span class="pre">test-add</span></code> with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="s1">&#39;Once a file has been git added, it is hard to lose!&#39;</span> <span class="o">&gt;</span> <span class="n">test</span><span class="o">-</span><span class="n">add</span>
</pre></div>
</div>
</li>
<li><p>Add it to the repository</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>add<span class="w"> </span>test-add
</pre></div>
</div>
</li>
<li><p>Now change the content of the file to be</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Ops</span>
</pre></div>
</div>
</li>
<li><p>And repeat the add command</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>add<span class="w"> </span>test-add
</pre></div>
</div>
</li>
<li><p>Apparently we have lost the previous version of the file.
But it is actually there, stored in a <em>dangling</em> blob object
(which is not referenced,
even indirectly,
by any <code class="docutils literal notranslate"><span class="pre">ref</span></code>)
We can see this with the command <code class="docutils literal notranslate"><span class="pre">fsck</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>fsck
<span class="go">Checking object directories: 100% (256/256), done.</span>
<span class="go">dangling blob dc3b15f60045eea7a87639436ed75021130579e0</span>
</pre></div>
</div>
<p>We can see the content of that blob
by passing its hash (shortened for convenience)
to the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">cat-file</span> <span class="pre">-p</span></code> command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>cat-file<span class="w"> </span>-p<span class="w"> </span>dc3b
<span class="go">Once a file has been git added, it is hard to lose!</span>
</pre></div>
</div>
</li>
</ol>
<p>Deletion of dangling objects is done by a <em>garbage collector</em>
that might be triggered automatically by some commands.</p>
<div class="admonition-discussion discussion important admonition" id="discussion-1">
<p class="admonition-title">Discussion</p>
<p>Discuss the findings with other course participants.</p>
</div>
</section>
</section>
<span id="document-branches"></span><section id="operating-on-branches">
<h2>Operating on Branches<a class="headerlink" href="#operating-on-branches" title="Link to this heading"></a></h2>
<p>A <a class="reference external" href="https://coderefinery.github.io/git-intro/reference/#term-branch" title="(in Introduction to version control with Git)"><span class="xref std std-term">branch</span></a> represents independent line of work.
Git internal structure makes it very easy to implement branches
as a thin layer of abstraction on its <em>Object database</em>.</p>
<div class="admonition-objectives objectives admonition" id="objectives-0">
<p class="admonition-title">Objectives</p>
<ul class="simple">
<li><p>Understand that branches are just pointers to commits</p></li>
<li><p>Manipulate local branches</p></li>
</ul>
</div>
<p>In this exercise we will look inside the <code class="docutils literal notranslate"><span class="pre">.git</span></code> directory
in order to learn about
how branches are implemented in Git,
and how to use them freely.</p>
<section id="demonstration-experimenting-with-branches">
<h3>Demonstration: experimenting with branches<a class="headerlink" href="#demonstration-experimenting-with-branches" title="Link to this heading"></a></h3>
<p><strong>Branches are pointers to commits</strong> that move over time.</p>
<p>We are starting from the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch and create an <code class="docutils literal notranslate"><span class="pre">idea</span></code> branch:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>status

<span class="go">On branch main</span>
<span class="go">nothing to commit, working tree clean</span>
<span class="gp">$ </span>git<span class="w"> </span>branch<span class="w"> </span>idea
<span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>idea
<span class="go">Switched to a new branch &#39;idea&#39;</span>
</pre></div>
</div>
<p>(Creating a branch and switching to it
can be done in a single command
with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">switch</span> <span class="pre">--create</span> <span class="pre">&lt;branch-name&gt;</span></code>)</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>branch

<span class="go">* idea</span>
<span class="go">  main</span>
</pre></div>
</div>
<p>Let us lift the hood and create few branches “manually”,
without using the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span></code> command.</p>
<p>Let us have a look at the <code class="docutils literal notranslate"><span class="pre">refs</span></code> directory:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ls<span class="w"> </span>-l<span class="w"> </span>.git/refs/heads

<span class="go">.rw-r--r-- 41 user 25 Aug 15:54 idea</span>
<span class="go">.rw-r--r-- 41 user 25 Aug 15:52 main</span>
</pre></div>
</div>
<p>Let us check what the <code class="docutils literal notranslate"><span class="pre">idea</span></code> file looks like
(do not worry if the hash is different):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cat<span class="w"> </span>.git/ref/heads/idea

<span class="go">045e3db14740c60684d745e5fb891ae71e335611</span>
</pre></div>
</div>
<p>Now let us replicate this file:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cp<span class="w"> </span>.git/refs/heads/idea<span class="w"> </span>.git/refs/heads/idea-2
<span class="gp">$ </span>cp<span class="w"> </span>.git/refs/heads/idea<span class="w"> </span>.git/refs/heads/idea-3
</pre></div>
</div>
<p>Let us go up two levels and inspect the file <code class="docutils literal notranslate"><span class="pre">HEAD</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cat<span class="w"> </span>.git/HEAD

<span class="go">ref: refs/heads/idea</span>
</pre></div>
</div>
<p>Let us open this file and change it to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ref</span><span class="p">:</span> <span class="n">refs</span><span class="o">/</span><span class="n">heads</span><span class="o">/</span><span class="n">idea</span><span class="o">-</span><span class="mi">3</span>
</pre></div>
</div>
<p>Now - on which branch are we?</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>branch

<span class="go">  idea</span>
<span class="go">  idea-2</span>
<span class="go">* idea-3</span>
<span class="go">  main</span>
</pre></div>
</div>
<div class="admonition-exercise exercise important admonition" id="exercise-0">
<p class="admonition-title">Exercise</p>
<p>By changing the content of <code class="docutils literal notranslate"><span class="pre">.git/HEAD</span></code>
we have manually “switched”
from a branch
to another one
that actually points
to the same commit.</p>
<p>What would have happened if we changed HEAD to point to a branch
that does not point to the same commit
as the one we were on before?
What would we see with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code>?</p>
</div>
<div class="admonition-branches-on-different-repositories exercise important admonition" id="exercise-1">
<p class="admonition-title">Branches on different repositories</p>
<p>How are branches on different repositories related to each other?</p>
<div class="admonition-solution solution important dropdown admonition" id="solution-0">
<p class="admonition-title">Solution</p>
<p>After creating a branch, one can use the <code class="docutils literal notranslate"><span class="pre">--set-upstream-to</span></code> options</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>branch<span class="w"> </span>&lt;new-branch&gt;
<span class="gp">$ </span>git<span class="w"> </span>branch<span class="w"> </span>&lt;new-branch&gt;<span class="w"> </span>--set-upstream-to<span class="o">=</span>&lt;remote&gt;/&lt;branch&gt;
</pre></div>
</div>
<p>to set the default <em>upstream</em> branch.</p>
<p>When pushing, it is possible to use the verbose command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>push<span class="w"> </span>&lt;repository&gt;<span class="w"> </span>&lt;local-branch&gt;:&lt;remote-branch&gt;
</pre></div>
</div>
<p>Typically <code class="docutils literal notranslate"><span class="pre">&lt;local-branch&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;remote-branch&gt;</span></code> are the same,
and <code class="docutils literal notranslate"><span class="pre">:&lt;remote-branch&gt;</span></code> is omitted it is assumed to be equal to <code class="docutils literal notranslate"><span class="pre">&lt;local-branch&gt;</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span></code> can also use the default upstream branch
if configured correctly:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>config<span class="w"> </span>--local<span class="w"> </span>push.default<span class="w"> </span>upstream
</pre></div>
</div>
<p>But typically there is no need for such complex setups.</p>
</div>
</div>
</section>
<section id="deleting-branches-also-by-mistake-and-undoing-it">
<h3>Deleting branches (also by mistake - and undoing it)<a class="headerlink" href="#deleting-branches-also-by-mistake-and-undoing-it" title="Link to this heading"></a></h3>
<p>Let us add some work on the branch <code class="docutils literal notranslate"><span class="pre">idea-3</span></code>, and create some additional commits.</p>
<p>Let’s assume we want to remove the branch <code class="docutils literal notranslate"><span class="pre">idea-2</span></code>,
to tidy up our repository.</p>
<p>We first switch to <code class="docutils literal notranslate"><span class="pre">main</span></code>, then try to remove the useless branch</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>main
<span class="gp">$ </span>git<span class="w"> </span>branch<span class="w"> </span>-d<span class="w"> </span>idea-3
<span class="go">error: The branch &#39;idea-3&#39; is not fully merged.</span>
</pre></div>
</div>
<p>We are sure we want to delete, so we use the <code class="docutils literal notranslate"><span class="pre">-D</span></code> option.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>branch<span class="w"> </span>-D<span class="w"> </span>idea-3
</pre></div>
</div>
<p>We then get distracted and go doing something else.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>clear
</pre></div>
</div>
<p>Wait a moment! We deleted the wrong branch. Is our work lost?
Using</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>reflog
</pre></div>
</div>
<p>we can see all the last commits pointed at by HEAD,
and among them there will be the one which was referenced by <code class="docutils literal notranslate"><span class="pre">idea-3</span></code>
before we deleted it.
We can check it out and recreate our branch.</p>
</section>
<section id="moving-branches-back-to-where-they-pointed">
<h3>Moving branches back to where they pointed<a class="headerlink" href="#moving-branches-back-to-where-they-pointed" title="Link to this heading"></a></h3>
<p>When using many commands,
we move forward the branch we are on.</p>
<p>We can make a branch point back to where it pointed before
by switching to it and using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">reset</span> <span class="pre">--soft</span></code>.</p>
<p>If we do not exactly remember where it pointed,
we can use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">reflog</span> <span class="pre">&lt;branch</span> <span class="pre">name&gt;</span></code>
to get an idea of where it was moved.</p>
</section>
<section id="visualizing-branches-efficiently">
<h3>Visualizing branches efficiently<a class="headerlink" href="#visualizing-branches-efficiently" title="Link to this heading"></a></h3>
<p>When working with branches on the command line,
it is useful to look at the log with the following command
(or something similar):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>log<span class="w"> </span>--oneline<span class="w"> </span>--graph<span class="w"> </span>--all
</pre></div>
</div>
<p>It is inconvenient to type such a long message every time.
Git allows us to configure an alias for it,
in this case it will be called <code class="docutils literal notranslate"><span class="pre">graph</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>alias.graph<span class="w"> </span><span class="s2">&quot;log --all --oneline --graph --decorate&quot;</span>
</pre></div>
</div>
<p>After this configuration,
we will be able to use <code class="docutils literal notranslate"><span class="pre">graph</span></code> as a git command
with the same effect as the original, longer command.</p>
</section>
</section>
<span id="document-collaboration-concepts"></span><section id="concepts-around-collaboration">
<h2>Concepts around collaboration<a class="headerlink" href="#concepts-around-collaboration" title="Link to this heading"></a></h2>
<div class="admonition-objectives objectives admonition" id="objectives-0">
<p class="admonition-title">Objectives</p>
<ul class="simple">
<li><p>Be able to decide whether to divide work at the branch level or at the repository level.</p></li>
</ul>
</div>
<div class="admonition-instructor-note instructor-note admonition" id="instructor-note-0">
<p class="admonition-title">Instructor note</p>
<ul class="simple">
<li><p>15 min teaching</p></li>
</ul>
</div>
<section id="motivation">
<h3>Motivation<a class="headerlink" href="#motivation" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Someone has given you access to a repository online and you want to contribute?</p></li>
<li><p>We will review how to make a copy and send changes back.</p></li>
<li><p>Then, we make a “pull request” that allows a review.</p></li>
<li><p>Once we know how code review works, we will be able to:</p>
<ul>
<li><p>propose changes to repositories of others</p></li>
<li><p>review changes submitted by external contributors.</p></li>
</ul>
</li>
</ul>
</section>
<section id="cloning-a-repository">
<h3>Cloning a repository<a class="headerlink" href="#cloning-a-repository" title="Link to this heading"></a></h3>
<p>In order to make a copy a repository (a <strong>clone</strong>),
the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span></code> command can be used.
Cloning of a repository is of relevance in a few different situations:</p>
<ul class="simple">
<li><p>Working on your own, cloning is the way to copy a repository on,
e.g., a personal computer, a server, and a supercomputer.</p></li>
<li><p>The original repository could be a repository that you or your colleague own.
A common use case for cloning is when working together
within a smaller team where everyone has read and write access to the same git repository.</p></li>
<li><p>Alternatively, cloning can be made from a public repository of a code
that you would like to use.
Perhaps you have no intention to work on the code,
but would like to stay in tune with the latest developments,
also in-between releases of new versions of the code.</p></li>
<li><p>Your work is not visible to others, because it is on your computer.</p></li>
</ul>
<figure class="align-default" id="id1">
<a class="with-border reference internal image-reference" href="_images/clone.png"><img alt="Cloning" class="with-border" src="_images/clone.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-text">Cloning</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="forking-a-repository">
<h3>Forking a repository<a class="headerlink" href="#forking-a-repository" title="Link to this heading"></a></h3>
<p><strong>Forking</strong> a repository on a <a class="reference internal" href="index.html#term-forge"><span class="xref std std-term">forge</span></a> creates a clone
that reside under a different account on the same forge (a <strong>fork</strong>).<br />
It is typically done to work on a git repository you cannot write to.</p>
<ul class="simple">
<li><p>Your work is visible to others, because it is on the web</p></li>
<li><p>commits in the fork can be made to any branch (including <code class="docutils literal notranslate"><span class="pre">main</span></code> or <code class="docutils literal notranslate"><span class="pre">master</span></code>)</p></li>
<li><p>The commits that are made within the branches of the fork repository can be contributed back to the parent repository by means of pull (or merge) requests.</p></li>
</ul>
<figure class="align-default" id="id2">
<a class="with-border reference internal image-reference" href="_images/fork.png"><img alt="Forking" class="with-border" src="_images/fork.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-text">Forking</span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
<div class="admonition-exercise exercise important admonition" id="exercise-0">
<p class="admonition-title">Exercise</p>
<p>What is the difference between forking and then cloning (your fork, to your computer) vs
cloning (to your computer) and then pushing to a brand new repository?</p>
<div class="admonition-solution solution important dropdown admonition" id="solution-0">
<p class="admonition-title">Solution</p>
<ol class="arabic">
<li><p>Forking on a forge and then cloning creates links:</p>
<ul class="simple">
<li><p>from your fork to the original repository;</p></li>
<li><p>from clone to your fork.</p></li>
</ul>
</li>
<li><p>When cloning and then pushing to a new repository,
you will create links:</p>
<ul class="simple">
<li><p>from your clone to the original repository;</p></li>
<li><p>from your clone to the new repository.</p></li>
</ul>
<p>Your repository on the forge will not have a link to the original repository
and will not be listed as a fork of the original repository.</p>
</li>
</ol>
</div>
</div>
</section>
<section id="generating-from-templates-and-importing">
<h3>Generating from templates and importing<a class="headerlink" href="#generating-from-templates-and-importing" title="Link to this heading"></a></h3>
<p>There are two more ways to create “copies” of repositories into your user space:</p>
<ul class="simple">
<li><p>A repository can be marked as <strong>template</strong>
and new repositories can be <strong>generated</strong> from it
like using a cookie-cutter.
The newly created repository will start with a new history.</p></li>
<li><p>You can <strong>import</strong> a repository from another hosting service or web address.
This will preserve the history of the imported project
and features like Wikis, issues and the like.</p></li>
</ul>
<div class="admonition-discussion discussion important admonition" id="discussion-0">
<p class="admonition-title">Discussion</p>
<ul class="simple">
<li><p>Visit one of the repositories/projects that you have used recently and try to find out
how many forks exist and where they are.</p></li>
<li><p>In which situations could it be useful to start from a “template” repository by generating?</p></li>
</ul>
</div>
</section>
<section id="synchronizing-changes-between-repositories">
<h3>Synchronizing changes between repositories<a class="headerlink" href="#synchronizing-changes-between-repositories" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>We need a mechanism to communicate changes between the repositories.</p></li>
<li><p>We will <strong>pull</strong> or <strong>fetch</strong> updates <strong>from</strong> remote repositories (we will soon discuss the difference between pull and fetch).</p></li>
<li><p>We will <strong>push</strong> updates <strong>to</strong> remote repositories.</p></li>
<li><p>We will learn how to suggest changes within repositories on a <a class="reference internal" href="index.html#term-forge"><span class="xref std std-term">forge</span></a> and across repositories (<strong>pull request</strong>).</p></li>
<li><p>Repositories that are forked or cloned do not automatically synchronize themselves:
We will learn how to update forks (by pulling from the “central” repository).</p></li>
<li><p>A main difference between cloning a repository and forking a repository is that</p>
<ul>
<li><p><strong>cloning</strong> is a general operation for generating copies of a repository to different computers</p></li>
<li><p><strong>forking</strong> is a particular operation implemented on <a class="reference internal" href="index.html#term-forge"><span class="xref std std-term">forges</span></a> (that includes cloning)</p></li>
</ul>
</li>
</ul>
<figure class="align-default" id="id3">
<a class="with-border reference internal image-reference" href="_images/forkandclone.png"><img alt="Forking and cloning" class="with-border" src="_images/forkandclone.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-text">Forking and cloning</span><a class="headerlink" href="#id3" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="authentication-connecting-to-the-repository-from-your-computer">
<span id="authentication"></span><h3>Authentication: connecting to the repository from your computer<a class="headerlink" href="#authentication-connecting-to-the-repository-from-your-computer" title="Link to this heading"></a></h3>
<p>There are mainly two ways to do authentication:</p>
<ul class="simple">
<li><p>SSH keys</p></li>
<li><p>HTTPS</p></li>
</ul>
<p>Please have a look at
this <a class="reference external" href="https://coderefinery.github.io/installation/ssh/">guide by CodeRefinery</a>
for a general introduction to authentication options.</p>
<p>We suggest setting up and using an <strong>SSH key</strong>,
since it is a form of authentication
that is also used on other services
(e.g., to access HPC systems).
For a step-by-step guide
look at <a class="reference external" href="https://swcarpentry.github.io/git-novice/07-github.html#ssh-background-and-setup">this walkthrough by Software Carpentry</a>.</p>
<p>Authentication via HTTPS might require less set up,
if password authentication is allowed.<br />
If not, you can use a <strong>personal access token</strong>
as a drop-in replacement,
which can be configured at these pages:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://gitlab.com/-/user_settings/personal_access_tokens">gitlab.com</a></p></li>
<li><p><a class="reference external" href="https://gitlab.kit.edu/-/user_settings/personal_access_tokens">gitlab.kit.edu</a></p></li>
</ul>
</section>
<section id="problems-in-collaborative-software-development">
<h3>Problems in Collaborative Software development<a class="headerlink" href="#problems-in-collaborative-software-development" title="Link to this heading"></a></h3>
<p>Merging can be a difficult moment
in the life cycle of a software.</p>
<p>Git will try to do <em>reasonable</em> operations
when merging two different lines of work,
but:</p>
<ul class="simple">
<li><p>There might be an detectable ambiguity in the way that
two different lines of work can be reconciled
(this leads to a conflict)</p></li>
<li><p>the results are not guaranteed
to give you working software all the times
(i.e., you don’t get a conflict,
but the result is not correct either - <em>this is scarier</em>).</p></li>
</ul>
<p>Contributing to the main branch
as often as possible,
to make the changes as small as possible,
is a possible approach to reduce
the difficulty related to merging.</p>
<p>In the following chapters we will focus
on tools that ease the <em>communication</em> aspect
of collaborative software development.</p>
</section>
</section>
<span id="document-same-repository"></span><section id="collaborating-within-the-same-repository-issues-and-pull-requests">
<h2>Collaborating within the same repository: issues and pull requests<a class="headerlink" href="#collaborating-within-the-same-repository-issues-and-pull-requests" title="Link to this heading"></a></h2>
<p>In this episode, we will learn how to collaborate within the same repository.
We will learn how to cross-reference issues and pull requests, how to review
pull requests, and how to use draft pull requests.</p>
<p>This exercise will form a good basis for collaboration that is suitable for
most research groups.</p>
<section id="exercise">
<h3>Exercise<a class="headerlink" href="#exercise" title="Link to this heading"></a></h3>
<p>In this exercise, we will contribute to a repository via a <a class="reference internal" href="index.html#term-pull-request"><span class="xref std std-term">pull request</span></a>.  This means that you propose some change, and then it is
accepted (or not).</p>
<div class="admonition-exercise-preparation prerequisites admonition" id="prerequisites-1">
<p class="admonition-title">Exercise preparation</p>
<p>First, we need to get access to some repository to which we will
contribute.</p>
<ol class="arabic simple">
<li><p>Form not too large groups (4-5 persons),
which have accounts on the same <a class="reference internal" href="index.html#term-forge"><span class="xref std std-term">forge</span></a>.</p></li>
<li><p>Each group needs to appoint someone who will host the shared
repository: the <em>maintainer</em>.
This is typically the exercise lead (if available).  Everyone else
is a <em>collaborator</em>.</p></li>
<li><p>The <strong>maintainer</strong> (one person per group) generates a new repository
called <code class="docutils literal notranslate"><span class="pre">centralized-workflow-exercise</span></code>
on the selected <a class="reference internal" href="index.html#term-forge"><span class="xref std std-term">forge</span></a>:</p></li>
</ol>
<div class="admonition-how-to-prepare-the-repository prerequisites admonition" id="prerequisites-0">
<p class="admonition-title">How to prepare the repository</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">On github.com</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">On other Forges: Clone and Push to new repository</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><p>The repository can be generated
from the template <a class="reference external" href="https://github.com/coderefinery/template-centralized-workflow-exercise">https://github.com/coderefinery/template-centralized-workflow-exercise</a>
(There is no need to tick <em>“Include all branches”</em> for this exercise):</p>
<figure class="align-default">
<a class="reference internal image-reference" href="_images/generate_repo.png"><img alt="Screenshot of generating the exercise repository" src="_images/generate_repo.png" style="width: 100%;" /></a>
</figure>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><p>Unfortunately:</p>
<ul class="simple">
<li><p>Templates on GitLab are more restrictive than on GitHub,
so they cannot be used to set up this exercise.</p></li>
<li><p>on the Forgejo fork of Codeberg the templating feature is not (yet) available.</p></li>
</ul>
<div class="admonition-exercise exercise important admonition" id="exercise-0">
<p class="admonition-title">Exercise</p>
<p>In order to achieve an equivalent result,
you need to</p>
<ul class="simple">
<li><p>clone the repository <a class="reference external" href="https://github.com/coderefinery/template-centralized-workflow-exercise">https://github.com/coderefinery/template-centralized-workflow-exercise</a> locally
on your computer</p></li>
<li><p>delete the <code class="docutils literal notranslate"><span class="pre">.git</span></code> directory to get rid of all the history</p></li>
<li><p>re-initialize the repo in the directory</p></li>
<li><p>add the content of the directory and create a first commit</p></li>
<li><p>create a properly named repository on the <a class="reference internal" href="index.html#term-forge"><span class="xref std std-term">forge</span></a> of your choice</p></li>
<li><p>push the newly created repository there.</p></li>
</ul>
<div class="admonition-detailed-steps solution important dropdown admonition" id="solution-0">
<p class="admonition-title">Detailed steps</p>
<p>Please follow these steps.
The Bash command needed for each step are shown along.</p>
<ol class="arabic">
<li><p>create a directory called <code class="docutils literal notranslate"><span class="pre">centralized-workflow-exercise</span></code> on your computer.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">mkdir centralized-workflow-exercise</span>
</pre></div>
</div>
</li>
<li><p>clone the repository <a class="reference external" href="https://github.com/coderefinery/template-centralized-workflow-exercise">https://github.com/coderefinery/template-centralized-workflow-exercise</a>
on your computer in the directory you just created:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git clone https://github.com/coderefinery/template-centralized-workflow-exercise \</span>
<span class="go">          centralized-workflow-exercise</span>
</pre></div>
</div>
</li>
<li><p>We need to delete the whole history to avoid distractions.
To do this, remove the <code class="docutils literal notranslate"><span class="pre">.git</span></code> directory:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">rm -r centralized-workflow-exercise/.git</span>
</pre></div>
</div>
</li>
<li><p>Initialize again the repository:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd centralized-workflow-exercise</span>
<span class="go">git init</span>
</pre></div>
</div>
</li>
<li><p>Add everything</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git add . # &#39;.&#39; means the whole repository</span>
</pre></div>
</div>
</li>
<li><p>Create a first commit</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git commit -m &quot;Initial commit&quot;</span>
</pre></div>
</div>
</li>
<li><p>Log into your preferred forge
and create an <strong>empty</strong> and <strong>public</strong> repository
called <code class="docutils literal notranslate"><span class="pre">centralized-workflow-exercise</span></code>.</p>
<ul class="simple">
<li><p>On GitLab, click the blue “New Project” button on the top right part of the page.
Among other things, remember to:</p>
<ul>
<li><p>Choose “Blank Project”,</p></li>
<li><p>Set the Visibility Level to be Public (this can be changed later)</p></li>
<li><p><strong>untick</strong> the box close to “Initialize repository with a README”</p></li>
</ul>
</li>
<li><p>On codeberg.org, click the <code class="docutils literal notranslate"><span class="pre">+</span></code> symbol on the top right corner of the page,
and Choose the “New Repository” option.</p></li>
</ul>
</li>
<li><p>Add the remote to your local repository. In this case,
we will use the name of the forge as the name of the remote.
If you configured ssh access:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git remote add &lt;forge-name&gt; git@&lt;forge-name&gt;:&lt;username&gt;/centralized-workflow-exercise</span>
</pre></div>
</div>
<p>If not, you can try https instead:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git remote add &lt;forge-name&gt; https://&lt;forge-name&gt;/&lt;username&gt;/centralized-workflow-exercise</span>
</pre></div>
</div>
</li>
<li><p>Push the main branch there:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git push &lt;forge-name&gt; main</span>
</pre></div>
</div>
</li>
</ol>
<p>Have a look at the <a class="reference internal" href="index.html#authentication"><span class="std std-ref">Authentication: connecting to the repository from your computer</span></a>
section if you have troubles problems during the push.</p>
</div>
</div>
</div></div>
<ul class="simple">
<li><p>Then <strong>everyone in your group</strong> needs their account on the <a class="reference internal" href="index.html#term-forge"><span class="xref std std-term">forge</span></a>
to be added as collaborator to the exercise repository:</p>
<ul>
<li><p>Collaborators give their usernames on the forge to their chosen maintainer.</p></li>
<li><p>Maintainer gives the other group members the newly created repository URL.</p></li>
<li><p>Maintainer adds participants as collaborators to their project.</p>
<ul>
<li><p>on github.com: Settings -&gt; Collaborators and teams -&gt; Manage access -&gt; Add people.</p></li>
<li><p>on GitLab: Manage -&gt; Members -&gt; Invite Members.
Choose at least the Maintainer role for this exercise</p></li>
<li><p>on Codeberg: Settings -&gt; Collaborators</p></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Don’t forget to accept the invitation</strong></p>
<ul>
<li><p>Check your personal area on the forge of choice (look for your notifications)</p></li>
<li><p>Alternatively check the inbox for the email account you registered with
the forge.</p>
<ul>
<li><p>GitHub emails you an invitation link, but if you don’t receive it
you can go to your GitHub notifications in the top right corner. The
maintainer can also “copy invite link” and share it within the group.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul id="unwatch">
<li><p><strong>Watching and unwatching repositories</strong></p>
<ul class="simple">
<li><p>Now that you are a collaborator, you get notified about new issues
and pull/merge requests via email.</p></li>
<li><p>If you do not wish this, you can “unwatch” a repository (top of
the project page).</p></li>
<li><p>However, we recommend watching repositories you are interested
in. You can learn things from experts just by watching the
activity that come through a popular project.</p></li>
</ul>
<figure class="align-default" id="id1">
<img alt="Unwatching a repository" src="_images/unwatch.png" />
<figcaption>
<p><span class="caption-text">Unwatch a repository by clicking “Unwatch” in the repository view,
then “Participating and &#64;mentions” - this way, you will get
notifications about your own interactions.</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
</li>
</ul>
</div>
</div>
<div class="admonition-exercise-collaborating-within-the-same-repository-45-min exercise important admonition" id="exercise-1">
<p class="admonition-title">Exercise: Collaborating within the same repository (45 min)</p>
<p><strong>Technical requirements</strong> (from installation instructions):</p>
<ul class="simple">
<li><p>If you create the commits locally: <a class="reference external" href="https://coderefinery.github.io/installation/ssh/">Being able to authenticate to GitHub</a></p></li>
</ul>
<p><strong>Skills that you will practice:</strong></p>
<ul class="simple">
<li><p>Cloning a repository (<a class="reference external" href="https://coderefinery.github.io/git-intro/local-workflow/">CodeRefinery lesson</a>)</p></li>
<li><p>Creating a branch (<a class="reference external" href="https://coderefinery.github.io/git-intro/commits/">CodeRefinery lesson</a>)</p></li>
<li><p>Committing a change on the new branch (<a class="reference external" href="https://coderefinery.github.io/git-intro/commits/">CodeRefinery lesson</a>)</p></li>
<li><p>Submit a pull request towards the main branch (<a class="reference external" href="https://coderefinery.github.io/git-intro/merging/">CodeRefinery lesson</a>)</p></li>
<li><p>If you create the changes locally, you will need to <strong>push</strong> them to the remote repository.</p></li>
<li><p>Learning what a protected branch is and how to modify a protected branch: using a pull request.</p></li>
<li><p>Cross-referencing issues and pull requests.</p></li>
<li><p>Practice to review a pull request.</p></li>
<li><p>Learn about the value of draft pull requests.</p></li>
</ul>
<p><strong>Exercise tasks</strong>:</p>
<ol class="arabic simple">
<li><p>Open an issue where you describe the change you want to make. Note down the
issue number since you will need it later.</p></li>
<li><p>Create a new branch.</p></li>
<li><p>Make a change to the recipe book on the new branch and in the commit
cross-reference the issue you opened (see the walk-through below
for how to do that).</p></li>
<li><p>Push your new branch (with the new commit) to the repository you
are working on.</p></li>
<li><p>Open a pull request towards the main branch.</p></li>
<li><p>Review somebody else’s pull request and give constructive feedback. Merge their pull request.</p></li>
<li><p>Try to create a new branch with some half-finished work and open a draft
pull request. Verify that the draft pull request cannot be merged since it
is not meant to be merged yet.</p></li>
</ol>
</div>
</section>
<section id="solution-and-hints">
<h3>Solution and hints<a class="headerlink" href="#solution-and-hints" title="Link to this heading"></a></h3>
<section id="opening-an-issue">
<h4>(1) Opening an issue<a class="headerlink" href="#opening-an-issue" title="Link to this heading"></a></h4>
<p>This is done through the web interface of your preferred <a class="reference internal" href="index.html#term-forge"><span class="xref std std-term">forge</span></a>.
For example, you could give the name of the recipe you want to add
(so that others don’t add the same one).</p>
<ul class="simple">
<li><p>On github.com and codeberg.org: Top row -&gt; the “Issues” tab.</p></li>
<li><p>On GitLab: Left side -&gt; Plan -&gt; Issues</p></li>
</ul>
</section>
<section id="create-a-new-branch">
<h4>(2) Create a new branch.<a class="headerlink" href="#create-a-new-branch" title="Link to this heading"></a></h4>
<p>You have two options:</p>
<ul class="simple">
<li><p>make the branch in the web interface (CodeRefinery lesson - refresher, for GitHub: <a class="reference external" href="https://coderefinery.github.io/git-intro/commits/" title="(in Introduction to version control with Git)"><span>Committing changes</span></a> )</p></li>
<li><p>If working locally, you need to know <a class="reference external" href="https://coderefinery.github.io/git-intro/local-workflow/" title="(in Introduction to version control with Git)"><span class="xref std std-doc">how to work locally</span></a>.</p></li>
</ul>
<p>Note: on GitLab, it is possible to create a merge request
(and a branch) directly from an issue.</p>
</section>
<section id="make-a-change-adding-the-recipe">
<h4>(3) Make a change adding the recipe<a class="headerlink" href="#make-a-change-adding-the-recipe" title="Link to this heading"></a></h4>
<p>Add a new file with the recipe in it.  Commit the file. In the commit
message, include the note about the issue number, saying that this
will close that issue.</p>
<section id="cross-referencing-issues-and-pull-requests">
<h5>Cross-referencing issues and pull requests<a class="headerlink" href="#cross-referencing-issues-and-pull-requests" title="Link to this heading"></a></h5>
<p>Each issue and each pull request gets a number and you can cross-reference them.</p>
<p>When you open an issue, note down the issue number (in this case it is <code class="docutils literal notranslate"><span class="pre">#2</span></code>):</p>
<figure class="align-default">
<a class="with-border reference internal image-reference" href="_images/issue-number.png"><img alt="Each issue gets a number" class="with-border" src="_images/issue-number.png" style="width: 60%;" /></a>
</figure>
<p>You can reference this issue number in a commit message or in a pull request, like in this
commit message:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>this is the new recipe; fixes #2
</pre></div>
</div>
<p>If you forget to do that in your commit message, you can also reference the issue
in the pull request description. And instead of <code class="docutils literal notranslate"><span class="pre">fixes</span></code> you can also use <code class="docutils literal notranslate"><span class="pre">closes</span></code> or <code class="docutils literal notranslate"><span class="pre">resolves</span></code>
or <code class="docutils literal notranslate"><span class="pre">fix</span></code> or <code class="docutils literal notranslate"><span class="pre">close</span></code> or <code class="docutils literal notranslate"><span class="pre">resolve</span></code> (case insensitive).</p>
<p>Then observe what happens in the issue once your commit gets merged: it will
automatically close the issue and create a link between the issue and the
commit. This is very useful for tracking what changes were made in response to
which issue and to know from when until when precisely the issue was open.</p>
</section>
</section>
<section id="push-to-your-forge-as-a-new-branch">
<h4>(4) Push to your forge as a new branch<a class="headerlink" href="#push-to-your-forge-as-a-new-branch" title="Link to this heading"></a></h4>
<p>Covered in <a class="reference external" href="https://coderefinery.github.io/git-intro/local-workflow/" title="(in Introduction to version control with Git)"><span>Cloning a Git repository and working locally</span></a>.</p>
<p>Push the branch to the repository. You should end up with a branch
visible in the web view of your forge.</p>
<p>This is only necessary if you created the changes locally. If you created the
changes directly on the web interface of the forge, you can skip this step.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-VlMgQ29kZQ==" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-1-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tab" tabindex="0">VS Code</button><button aria-controls="panel-1-Q29tbWFuZCBsaW5l" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tab" tabindex="-1">Command line</button></div><div aria-labelledby="tab-1-VlMgQ29kZQ==" class="sphinx-tabs-panel group-tab" id="panel-1-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tabpanel" tabindex="0"><p>In VS Code, you can “publish the branch” to the remote repository by clicking
the cloud icon in the bottom left corner of the window:</p>
<figure class="align-default">
<a class="with-border reference internal image-reference" href="_images/vscode-publish-branch.png"><img alt="Publishing a branch in VS Code" class="with-border" src="_images/vscode-publish-branch.png" style="width: 60%;" /></a>
</figure>
</div><div aria-labelledby="tab-1-Q29tbWFuZCBsaW5l" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tabpanel" tabindex="0"><p>If you have a local branch <code class="docutils literal notranslate"><span class="pre">my-branch</span></code> and you want to push it to the remote
and make it visible there, first verify what your remote is:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>remote<span class="w"> </span>--verbose

<span class="go">origin	git@github.com:user/centralized-workflow-exercise.git (fetch)</span>
<span class="go">origin	git@github.com:user/centralized-workflow-exercise.git (push)</span>
</pre></div>
</div>
<p>In this case the remote is called <code class="docutils literal notranslate"><span class="pre">origin</span></code> and refers to the address
<code class="docutils literal notranslate"><span class="pre">git&#64;github.com:user/centralized-workflow-exercise.git</span></code>.
Both can be used interchangeably.
Make sure it points to the right repository,
ideally a repository that you can write to.</p>
<p>Now that you have a remote, you can push your branch to it:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>my-branch
</pre></div>
</div>
<p>This will create a new branch on the remote repository with the same name as
your local branch.</p>
<p>You can also do this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>push<span class="w"> </span>--set-upstream<span class="w"> </span>origin<span class="w"> </span>my-branch
</pre></div>
</div>
<p>This will connect the local branch and the remote branch so that in the future
you can just type <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span></code> and <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span></code> without specifying the branch name
(but this depends on your Git configuration).</p>
<p><strong>Troubleshooting</strong></p>
<p>If you don’t have a remote yet, you can add one called <code class="docutils literal notranslate"><span class="pre">origin</span></code> with (adjust <code class="docutils literal notranslate"><span class="pre">ADDRESS</span></code> to your repository address):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>origin<span class="w"> </span>ADDRESS
</pre></div>
</div>
<p>ADDRESS is the part that you copy from here:</p>
<figure class="align-default">
<a class="with-border reference internal image-reference" href="_images/clone-address.png"><img alt="Copying the clone address from GitHub" class="with-border" src="_images/clone-address.png" style="width: 60%;" /></a>
</figure>
</div><p>If the remote points to the wrong place, you can change it with:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>remote<span class="w"> </span>set-url<span class="w"> </span>origin<span class="w"> </span>NEWADDRESS
</pre></div>
</div>
<div class="docutils">
</div>
</div>
</section>
<section id="open-a-pull-request-towards-the-main-branch">
<h4>(5) Open a pull request towards the main branch<a class="headerlink" href="#open-a-pull-request-towards-the-main-branch" title="Link to this heading"></a></h4>
<p>This is done through the GitHub web interface.  We saw this in, for
example, in a <a class="reference external" href="https://coderefinery.github.io/git-intro/merging/">previous lesson</a>.</p>
</section>
<section id="reviewing-pull-requests">
<h4>(6) Reviewing pull requests<a class="headerlink" href="#reviewing-pull-requests" title="Link to this heading"></a></h4>
<p>You review through the web interface.</p>
<p>Checklist for reviewing a pull request:</p>
<ul class="simple">
<li><p>Be kind, on the other side is a human who has put effort into this.</p></li>
<li><p>Be constructive: if you see a problem, suggest a solution.</p></li>
<li><p>Towards which branch is this directed?</p></li>
<li><p>Is the title descriptive?</p></li>
<li><p>Is the description informative?</p></li>
<li><p>Scroll down to see commits.</p></li>
<li><p>Scroll down to see the changes.</p></li>
<li><p>If you get incredibly many changes, also consider the license or copyright
and ask where all that code is coming from.</p></li>
<li><p>Again, be kind and constructive.</p></li>
<li><p>Later we will learn how to suggest changes directly in the pull request.</p></li>
</ul>
<p>If someone is new, it’s often nice to say something encouraging in the
comments before merging (even if it’s just “thanks”).  If all is good
and there’s not much else to say, you could merge directly.</p>
</section>
<section id="draft-wip-pull-requests">
<h4>(7) Draft/WIP pull requests<a class="headerlink" href="#draft-wip-pull-requests" title="Link to this heading"></a></h4>
<p>Try to create a draft pull request:</p>
<figure class="align-default">
<a class="with-border reference internal image-reference" href="_images/draft-pr.png"><img alt="Creating a draft pull request" class="with-border" src="_images/draft-pr.png" style="width: 60%;" /></a>
</figure>
<p>Verify that the draft pull request cannot be merged until it is marked as ready
for review:</p>
<figure class="align-default">
<a class="with-border reference internal image-reference" href="_images/draft-pr-wip.png"><img alt="Draft pull request cannot be merged" class="with-border" src="_images/draft-pr-wip.png" style="width: 60%;" /></a>
</figure>
<p>Draft/WIP pull requests can be useful for:</p>
<ul class="simple">
<li><p><strong>Feedback</strong>: You can open a pull request early to get feedback on your work without
signaling that it is ready to merge.</p></li>
<li><p><strong>Information</strong>: They can help communicating to others that a change is coming up and in
progress.</p></li>
<li><p><strong>Discussion</strong>: while an issue can be used to discuss a problem,
a draft pull request can be used to show a possible solution</p></li>
</ul>
</section>
<section id="what-is-a-protected-branch-and-how-to-modify-it">
<h4>What is a protected branch? And how to modify it?<a class="headerlink" href="#what-is-a-protected-branch-and-how-to-modify-it" title="Link to this heading"></a></h4>
<p>A protected branch is a branch that has some restrictions.
For example, it cannot (accidentally) deleted or force-pushed to.
It is also possible to require that a branch cannot
be directly pushed to or modified, but that changes must be submitted
via a pull or merge request
(that can be accepted or rejected by the owners or maintainers of the repository).</p>
<p>To protect a branch in your own repository:</p>
<ul class="simple">
<li><p>on github.com and codeberg.org: “Settings” -&gt; “Branches”.</p></li>
<li><p>on GitLab: “Settings” -&gt; Repository -&gt; Branches</p></li>
</ul>
</section>
<section id="summary">
<h4>Summary<a class="headerlink" href="#summary" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p>Issue/bug tracking is a very important part of the code development process.</p></li>
<li><p>We practiced working with issues and pull requests, and how they can be related</p></li>
<li><p>The pull request allowed us to contribute to a repository
without directly changing its content, but ask for permission.
This is appropriate in many collaborative development scenarios.</p></li>
</ul>
</section>
</section>
</section>
<span id="document-code-review"></span><section id="code-review-demo">
<h2>Code review demo<a class="headerlink" href="#code-review-demo" title="Link to this heading"></a></h2>
<p>Here we will practice the code review process.
We will learn:</p>
<ul class="simple">
<li><p>how to ask for changes in a pull request;</p></li>
<li><p>how to suggest a change in a pull request;</p></li>
<li><p>how to modify a pull request.</p></li>
</ul>
<p>This will enable research groups to work more collaboratively,
which should help to</p>
<ul class="simple">
<li><p>improve the code quality</p></li>
<li><p>learn from each other.</p></li>
</ul>
<p>Note that <em>pair programming</em>
is usually seen as possible alternative
to code review.<br />
Compared to the practice of code review,
it has its own pros and cons.</p>
<section id="exercise">
<h3>Exercise<a class="headerlink" href="#exercise" title="Link to this heading"></a></h3>
<div class="admonition-exercise-preparation prerequisites admonition" id="prerequisites-0">
<p class="admonition-title">Exercise preparation</p>
<p>We can continue in the same exercise repository which we have used in the
previous episode.</p>
</div>
<div class="admonition-exercise-practicing-code-review-25-min exercise important admonition" id="exercise-0">
<p class="admonition-title">Exercise: Practicing code review (25 min)</p>
<p><strong>Technical requirements</strong>:</p>
<ul class="simple">
<li><p>If you create the commits locally: <a class="reference internal" href="index.html#authentication"><span class="std std-ref">Being able to authenticate to your preferred forge</span></a></p></li>
</ul>
<p><strong>What should be familiar</strong>:</p>
<ul class="simple">
<li><p>Creating a branch (<a class="reference external" href="https://coderefinery.github.io/git-intro/commits/">lesson from CodeRefinery</a>)</p></li>
<li><p>Committing a change on the new branch (<a class="reference external" href="https://coderefinery.github.io/git-intro/commits/">lesson from CodeRefinery</a>)</p></li>
<li><p>Opening and merging pull requests (<a class="reference external" href="https://coderefinery.github.io/git-intro/merging/">lesson from CodeRefinery</a>)</p></li>
</ul>
<p><strong>What will be new</strong> in this exercise:</p>
<ul class="simple">
<li><p>As a reviewer, we will learn how to ask for changes in a pull request.</p></li>
<li><p>As a reviewer, we will learn how to suggest a change in a pull request.</p></li>
<li><p>As a submitter, we will learn how to modify a pull request without closing
the incomplete one and opening a new one.</p></li>
</ul>
<p><strong>Exercise tasks</strong>:</p>
<ol class="arabic simple">
<li><p>Create a new branch and one or few commits: in these improve something but also
deliberately introduce a typo and also a larger mistake which we will want to fix during the code review.</p></li>
<li><p>Open a pull request towards the main branch.</p></li>
<li><p>As a reviewer to somebody else’s pull request, ask for an improvement and
also directly suggest a change for the small typo. (Hint:
suggestions are possible through the GitHub web interface, view of
a pull request, “Files changed” view, after selecting some lines.
Look for the “±” button.)</p></li>
<li><p>As the submitter, learn how to accept the suggested change.  (Hint:
GitHub web interface, “Files Changed” view.)</p></li>
<li><p>As the submitter, improve the pull request without having to close and open
a new one: by adding a new commit to the same branch. (Hint: push
to the branch again.)</p></li>
<li><p>Once the changes are addressed, merge the pull request.</p></li>
</ol>
</div>
</section>
<section id="help-and-discussion">
<h3>Help and discussion<a class="headerlink" href="#help-and-discussion" title="Link to this heading"></a></h3>
<p>From here on out, we don’t give detailed steps to the solution.  You
need to combine what you know, and the extra info below, in order to
solve the above.</p>
<section id="asking-for-changes-in-a-pull-request-2-ways">
<h4>Asking for changes in a pull request: 2 ways<a class="headerlink" href="#asking-for-changes-in-a-pull-request-2-ways" title="Link to this heading"></a></h4>
<ol class="arabic">
<li><p>Either in the comment field of the pull request:</p>
<figure class="align-default">
<a class="with-border reference internal image-reference" href="_images/comment.png"><img alt="Screenshot of a pull request comment field" class="with-border" src="_images/comment.png" style="width: 60%;" /></a>
</figure>
</li>
<li><p>Or by using the “Review changes”:</p>
<figure class="align-default">
<a class="with-border reference internal image-reference" href="_images/files-changed.png"><img alt="Screenshot of a pull request navigating to the &quot;Review changes&quot; tab" class="with-border" src="_images/files-changed.png" style="width: 100%;" /></a>
</figure>
</li>
</ol>
<p>And always please be kind and constructive in your comments. Remember that the
goal is not gate-keeping but <strong>collaborative learning</strong>.</p>
</section>
<section id="suggest-a-change-in-a-pull-request-as-a-reviewer">
<h4>Suggest a change in a pull request as a reviewer<a class="headerlink" href="#suggest-a-change-in-a-pull-request-as-a-reviewer" title="Link to this heading"></a></h4>
<p>If you see a very small problem that is easy to fix,
add a comment
by clicking on the sign next to the line number in the tab that shows the changes:</p>
<figure class="align-default">
<a class="with-border reference internal image-reference" href="_images/leave-comment.png"><img alt="Screenshot of leaving a comment to a line in a pull request (github.com)" class="with-border" src="_images/leave-comment.png" style="width: 100%;" /></a>
</figure>
<p>Here you can comment on specific lines or even line ranges.</p>
<p>Click on the “Add suggestion/Insert suggestion” symbol. Now you can fix the tiny problem (in this
case a typo) and then click on the “Add single comment” button:</p>
<figure class="align-default">
<a class="with-border reference internal image-reference" href="_images/add-suggestion.png"><img alt="Sequence of clicks to add a suggestion to a line in a pull request" class="with-border" src="_images/add-suggestion.png" style="width: 60%;" /></a>
</figure>
<p>The result is this and the submitter can accept the change with a single click:</p>
<figure class="align-default">
<a class="with-border reference internal image-reference" href="_images/commit-suggestion.png"><img alt="Screenshot of a pull request with a suggested change" class="with-border" src="_images/commit-suggestion.png" style="width: 60%;" /></a>
</figure>
<p>After accepting with “Commit suggestion”, the improvement gets added to the
pull request.</p>
</section>
<section id="how-to-modify-a-pull-request-to-address-the-review-comments">
<h4>How to modify a pull request to address the review comments<a class="headerlink" href="#how-to-modify-a-pull-request-to-address-the-review-comments" title="Link to this heading"></a></h4>
<p>If the reviewer asks for changes, it is not necessary to close the pull request
and later open a new one. It can even be counter-productive to do so: This can
fragment the discussion and the history of the pull request and can make it
harder to understand the context of the changes.</p>
<p>A much better mechanism to recognize that pull requests are not implemented
from a specific commit to a specific branch, but <strong>always from a branch to a
branch</strong>.</p>
<p>This means that you can make amendments to the pull request by adding new
commits to the same source branch. This way the pull request will be updated
automatically and the reviewer can see the new changes and comment on them.</p>
<p>The fact that pull requests are from branch to branch also strongly suggests
that it is a good practice to create a new branch for each pull request.
Otherwise you could accidentally modify an open pull request by adding new
commits to the source branch.</p>
</section>
</section>
<section id="summary">
<h3>Summary<a class="headerlink" href="#summary" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Our process isn’t just about code now.  It’s about discussion and
working together to make the whole process better.</p></li>
<li><p>GitHub discussions and reviewing is quite powerful and can make
small changes easy.</p></li>
</ul>
</section>
</section>
<span id="document-forking-workflow"></span><section id="how-to-contribute-changes-to-repositories-that-belong-to-others">
<h2>How to contribute changes to repositories that belong to others<a class="headerlink" href="#how-to-contribute-changes-to-repositories-that-belong-to-others" title="Link to this heading"></a></h2>
<p>In this episode we prepare you to suggest and contribute changes to
repositories that belong to others. These might be open source projects that
you use in your work.</p>
<p>We will see how Git and services like GitHub or GitLab can be used to suggest
modification without having to ask for write access to the repository and
accept modifications without having to grant write access to others.</p>
<section id="exercise">
<h3>Exercise<a class="headerlink" href="#exercise" title="Link to this heading"></a></h3>
<div class="admonition-exercise-preparation prerequisites admonition" id="prerequisites-0">
<p class="admonition-title">Exercise preparation</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">Part of team/exercise room</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">Following on your own</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><p><strong>Maintainer (team lead)</strong>:</p>
<ul class="simple">
<li><p>Create an exercise repository by
<a class="reference external" href="https://help.github.com/en/articles/creating-a-repository-from-a-template">generating from a template</a>
using this template: <a class="reference external" href="https://github.com/coderefinery/template-forking-workflow-exercise">https://github.com/coderefinery/template-forking-workflow-exercise</a>
called <code class="docutils literal notranslate"><span class="pre">forking-workflow-exercise</span></code></p></li>
<li><p>In this case we <strong>do not add collaborators</strong> to the repository (this is the point of this example).</p></li>
<li><p>Share the link to the newly created repository with your group.</p></li>
</ul>
<p><strong>Learners in exercise team</strong>: Fork the newly created repository (not the
“coderefinery” one) and then <strong>clone your fork</strong> (if you wish to work locally).</p>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><p>The instructors are the <strong>maintainers</strong>.  All watchers are
<strong>collaborators</strong>.</p>
<p>We create(d) these the day before hopefully.  <strong>Choose only one to
work with</strong>:</p>
<ul class="simple">
<li><p>Not recorded:
<a class="reference external" href="https://github.com/cr-workshop-exercises/forking-workflow-exercise">https://github.com/cr-workshop-exercises/forking-workflow-exercise</a> (this
will not be shown on stream or recorded in our videos, but is be public on
the internet until it is deleted)</p></li>
<li><p>Recorded:
<a class="reference external" href="https://github.com/cr-workshop-exercises/forking-workflow-exercise-recorded">https://github.com/cr-workshop-exercises/forking-workflow-exercise-recorded</a>
(this will be shown on stream and recorded, <strong>your username and comments
may appear in the recorded video on YouTube</strong>)</p></li>
</ul>
<p>Here we don’t need your GitHub usernames because the point of this exercise
is to show that we can collaborate without granting write permissions.</p>
<p>Learners following on their own: Fork one of these two repositories
and then <strong>clone your fork</strong> to your computer (if you wish to work locally).</p>
</div></div>
</div>
<div class="admonition-exercise-collaborating-within-the-same-repository-25-min exercise important admonition" id="exercise-0">
<p class="admonition-title">Exercise: Collaborating within the same repository (25 min)</p>
<p><strong>Technical requirements</strong>:</p>
<ul class="simple">
<li><p>If you create the commits locally: <a class="reference external" href="https://coderefinery.github.io/installation/ssh/">Being able to authenticate to GitHub</a></p></li>
</ul>
<p><strong>What is familiar</strong> from the previous workshop days:</p>
<ul class="simple">
<li><p>Forking a repository (<a class="reference external" href="https://coderefinery.github.io/git-intro/browsing/">previous lesson</a>)</p></li>
<li><p>Creating a branch (<a class="reference external" href="https://coderefinery.github.io/git-intro/commits/">previous lesson</a>)</p></li>
<li><p>Committing a change on the new branch (<a class="reference external" href="https://coderefinery.github.io/git-intro/commits/">previous lesson</a>)</p></li>
<li><p>Opening and merging pull requests (<a class="reference external" href="https://coderefinery.github.io/git-intro/merging/">previous lesson</a>)</p></li>
</ul>
<p><strong>What will be new</strong> in this exercise:</p>
<ul class="simple">
<li><p>Opening a pull request towards the upstream repository.</p></li>
<li><p>Pull requests can be coupled with automated testing.</p></li>
<li><p>Learning that your fork can get out of date.</p></li>
<li><p>After the pull requests are merged, updating your fork with the changes.</p></li>
<li><p>Learn how to approach other people’s repositories with ideas, changes, and requests.</p></li>
</ul>
<p><strong>Exercise tasks</strong>:</p>
<ol class="arabic simple">
<li><p>Open an issue in the upstream exercise repository where you describe the
change you want to make. Take note of the issue number.</p></li>
<li><p>Create a new branch in your fork of the repository.</p></li>
<li><p>Make a change to the recipe book on the new branch and in the commit cross-reference the issue you opened.
See the walk-through below for how to do this.</p></li>
<li><p>Open a pull request towards the upstream repository.</p></li>
<li><p>Team leaders will merge the pull requests. For individual participants, the
instructors and workshop organizers will review and merge the pull requests.
During the review, pay attention to the automated test step (here for
demonstration purposes, we test whether the recipe contains an ingredients
and an instructions sections).</p></li>
<li><p>After few pull requests are merged, update your fork with the changes.</p></li>
<li><p>Check that in your fork you can see changes from other people’s pull requests.</p></li>
</ol>
</div>
</section>
<section id="help-and-discussion">
<h3>Help and discussion<a class="headerlink" href="#help-and-discussion" title="Link to this heading"></a></h3>
<section id="opening-a-pull-request-towards-the-upstream-repository">
<h4>Opening a pull request towards the upstream repository<a class="headerlink" href="#opening-a-pull-request-towards-the-upstream-repository" title="Link to this heading"></a></h4>
<p>We have learned in the previous episode that pull requests are always from
branch to branch. But the branch can be in a different repository.</p>
<p>When you open a pull request in a fork, by default GitHub will suggest to
direct it towards the default branch of the upstream repository.</p>
<p>This can be changed and it should always be verified, but in this case this is
exactly what we want to do, from fork towards upstream:</p>
<figure class="align-default">
<a class="with-border reference internal image-reference" href="_images/pull-request-form.png"><img alt="Screenshot of a pull request from fork towards upstream" class="with-border" src="_images/pull-request-form.png" style="width: 100%;" /></a>
</figure>
</section>
<section id="pull-requests-can-be-coupled-with-automated-testing">
<h4>Pull requests can be coupled with automated testing<a class="headerlink" href="#pull-requests-can-be-coupled-with-automated-testing" title="Link to this heading"></a></h4>
<p>We added an automated test here just for fun and so that you see that this is
possible to do.</p>
<p>In this exercise, the test is silly. It will check whether the recipe contains
both an ingredients and an instructions section.</p>
<p>In this example the test failed:</p>
<figure class="align-default">
<a class="with-border reference internal image-reference" href="_images/all-checks-failed.png"><img alt="Screenshot of a failed test in a pull request" class="with-border" src="_images/all-checks-failed.png" style="width: 60%;" /></a>
</figure>
<p>Click on the “Details” link to see the details of the failed test:</p>
<figure class="align-default">
<a class="with-border reference internal image-reference" href="_images/check-details.png"><img alt="Screenshot of details why the test failed" class="with-border" src="_images/check-details.png" style="width: 60%;" /></a>
</figure>
<p><strong>How can this be useful?</strong></p>
<ul class="simple">
<li><p>The project can define what kind of tests are expected to pass before a pull
request can be merged.</p></li>
<li><p>The reviewer can see the results of the tests, without having to run them
locally.</p></li>
</ul>
<p><strong>How does it work?</strong></p>
<ul class="simple">
<li><p>We added a <a class="reference external" href="https://github.com/coderefinery/recipe-book-template/blob/main/.github/workflows/check-recipes.yml">GitHub Actions workflow</a>
to automatically run on each push or pull request towards the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch.</p></li>
</ul>
<p>What tests or steps can you image for your project to run automatically with
each pull request?</p>
</section>
<section id="how-to-update-your-fork-with-changes-from-upstream">
<h4>How to update your fork with changes from upstream<a class="headerlink" href="#how-to-update-your-fork-with-changes-from-upstream" title="Link to this heading"></a></h4>
<p>This used to be difficult but now it is two mouse clicks.</p>
<p>Navigate to your fork and notice how GitHub tells you that your fork is behind.
In my case, it is 9 commits behind upstream. To fix this, click on “Sync fork”
and then “Update branch”:</p>
<figure class="align-default">
<a class="with-border reference internal image-reference" href="_images/sync-fork.png"><img alt="Screenshot on GitHub fork page showing that the fork is behind" class="with-border" src="_images/sync-fork.png" style="width: 80%;" /></a>
</figure>
<p>After the update my “branch is up to date” with the upstream repository:</p>
<figure class="align-default">
<a class="with-border reference internal image-reference" href="_images/fork-after-update.png"><img alt="Screenshot on GitHub after fork has been updated" class="with-border" src="_images/fork-after-update.png" style="width: 80%;" /></a>
</figure>
</section>
<section id="how-to-approach-other-peoples-repositories-with-ideas-changes-and-requests">
<h4>How to approach other people’s repositories with ideas, changes, and requests<a class="headerlink" href="#how-to-approach-other-peoples-repositories-with-ideas-changes-and-requests" title="Link to this heading"></a></h4>
<p><strong>Contributing very minor changes</strong></p>
<ul class="simple">
<li><p>Clone or fork+clone repository</p></li>
<li><p>Create a branch</p></li>
<li><p>Commit and push change</p></li>
<li><p>Open a pull request or merge request</p></li>
</ul>
<p><strong>If you observe an issue and have an idea how to fix it</strong></p>
<ul class="simple">
<li><p>Open an issue in the repository you wish to contribute to</p></li>
<li><p>Describe the problem</p></li>
<li><p>If you have a suggestion on how to fix it, describe your suggestion</p></li>
<li><p>Possibly <strong>discuss and get feedback</strong></p></li>
<li><p>If you are working on the fix, indicate it in the issue so that others know that somebody is working on it and who is working on it</p></li>
<li><p>Submit your fix as pull request or merge request which references/closes the issue</p></li>
</ul>
<div class="admonition-motivation admonition">
<p class="admonition-title">Motivation</p>
<ul class="simple">
<li><p><strong>Inform others about an observed problem</strong></p></li>
<li><p>Make it clear whether this issue is up for grabs or already being worked on</p></li>
</ul>
</div>
<p><strong>If you have an idea for a new feature</strong></p>
<ul class="simple">
<li><p>Open an issue in the repository you wish to contribute to</p></li>
<li><p>In the issue, write a short proposal for your suggested change or new feature</p></li>
<li><p>Motivate why and how you wish to do this</p></li>
<li><p>Also indicate where you are unsure and where you would like feedback</p></li>
<li><p><strong>Discuss and get feedback before you code</strong></p></li>
<li><p>Once you start coding, indicate that you are working on it</p></li>
<li><p>Once you are done, submit your new feature as pull request or merge request which references/closes the issue/proposal</p></li>
</ul>
<div class="admonition-motivation admonition">
<p class="admonition-title">Motivation</p>
<ul class="simple">
<li><p><strong>Get agreement and feedback before writing 5000 lines of code</strong> which might be rejected</p></li>
<li><p>If we later wonder why something was done, we have the issue/proposal as
reference and can read up on the reasoning behind a code change</p></li>
</ul>
</div>
</section>
</section>
<section id="summary">
<h3>Summary<a class="headerlink" href="#summary" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>This forking workflow lets you propose changes to repositories for
which <em>you have no access</em>.</p></li>
<li><p>This is the way that much modern open-source software works.</p></li>
<li><p>You can now contribute to any project you can view.</p></li>
</ul>
</section>
</section>
<span id="document-interrupted"></span><section id="interrupted-work">
<h2>Interrupted work<a class="headerlink" href="#interrupted-work" title="Link to this heading"></a></h2>
<div class="admonition-objectives objectives admonition" id="objectives-0">
<p class="admonition-title">Objectives</p>
<ul class="simple">
<li><p>Learn to switch context or abort work without panicking.</p></li>
</ul>
</div>
<div class="admonition-instructor-note instructor-note admonition" id="instructor-note-0">
<p class="admonition-title">Instructor note</p>
<ul class="simple">
<li><p>10 min teaching/type-along</p></li>
<li><p>15 min exercise</p></li>
</ul>
</div>
<div class="admonition-keypoints keypoints admonition" id="keypoints-0">
<p class="admonition-title">Keypoints</p>
<ul class="simple">
<li><p>There is almost never reason to clone a fresh copy to complete a task that
you have in mind.</p></li>
<li><p>Sometimes Git suggests to “stash your changes”. What is this about?</p></li>
</ul>
</div>
<section id="frequent-situation-interrupted-work">
<h3>Frequent situation: interrupted work<a class="headerlink" href="#frequent-situation-interrupted-work" title="Link to this heading"></a></h3>
<p>We all wish that we could write beautiful perfect code. But the real world is
much more chaotic:</p>
<ul class="simple">
<li><p>You are in the middle of a “Jackson-Pollock-style” debugging spree with 27 modified files
and debugging prints everywhere.</p></li>
<li><p>Your colleague comes in and wants you to fix/commit something right now.</p></li>
<li><p>What to do?</p></li>
</ul>
<p>Git provides lots of ways to switch tasks without ruining everything.</p>
<div class="admonition-ways-to-switch-context discussion important admonition" id="discussion-0">
<p class="admonition-title">Ways to switch context</p>
<p>What strategies have you used in the past?</p>
<p>Have you created a new clone of the repository to leave your original directory intact?
Have you used <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">worktree</span></code>?</p>
</div>
</section>
<section id="option-1-stashing">
<h3>Option 1: Stashing<a class="headerlink" href="#option-1-stashing" title="Link to this heading"></a></h3>
<p>The <strong>stash</strong> is the first and easiest place to temporarily “stash”
things.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">stash</span> <span class="pre">push</span></code> will put working directory and staging area changes
away.  Your code will be same as last commit.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">stash</span> <span class="pre">pop</span></code> will return to the state you were before.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">stash</span> <span class="pre">list</span></code> will list the current stashes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">stash</span> <span class="pre">push</span> <span class="pre">-m</span> <span class="pre">&quot;message&quot;</span></code> is like the first, but will give it a message.
Useful if it might last a while.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">stash</span> <span class="pre">push</span> <span class="pre">[-p]</span> <span class="pre">[filename]</span></code> will stash certain files files
and/or by patches.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">stash</span> <span class="pre">drop</span></code> will drop the most recent stash (or whichever stash
you give).</p></li>
<li><p>The stashes form a stack, so you can stash several batches of modifications.</p></li>
</ul>
<section id="exercise-stashing">
<span id="id1"></span><h4>Exercise: Stashing<a class="headerlink" href="#exercise-stashing" title="Link to this heading"></a></h4>
<div class="admonition-interrupted-1-stash-some-uncommitted-work exercise important admonition" id="exercise-0">
<p class="admonition-title">Interrupted-1: Stash some uncommitted work</p>
<ol class="arabic simple">
<li><p>Make a change.</p></li>
<li><p>Check status/diff, stash the change with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">stash</span></code>, check status/diff again.</p></li>
<li><p>Make a separate, unrelated change which doesn’t touch the same
lines.  Commit this change.</p></li>
<li><p>Pop off the stash you saved with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">stash</span> <span class="pre">pop</span></code>, and check status/diff.</p></li>
<li><p>Optional: Do the same but stash twice.  Also check <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">stash</span> <span class="pre">list</span></code>.
Can you pop the stashes in the opposite order?</p></li>
<li><p>Advanced: What happens if stashes conflict with other changes? Make
a change and stash it.  Modify the same line or one right above or
below.  Pop the stash back.  Resolve the conflict.  Note there is no
extra commit.</p></li>
<li><p>Advanced: what does <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">graph</span></code> show when you have something
stashed?</p></li>
</ol>
<div class="admonition-solution solution important dropdown admonition" id="solution-0">
<p class="admonition-title">Solution</p>
<p>5: Yes you can. With <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">stash</span> <span class="pre">pop</span> <span class="pre">INDEX</span></code> you can decie which stash
index to pop.</p>
<p>6: In this case Git will ask us to resolve the conflict the same way
when resolving conflicts between two branches.</p>
<p>7: It shows an additional commit hash with <code class="docutils literal notranslate"><span class="pre">refs/stash</span></code>.</p>
</div>
</div>
<div class="admonition-stashing-all exercise important admonition" id="exercise-1">
<p class="admonition-title">Stashing all</p>
<p>Sometimes we want to stash
files that are not yet tracked by git
(i.e., have not been <code class="docutils literal notranslate"><span class="pre">add</span></code>ed).
How would we do that?
Look at the man page using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">help</span> <span class="pre">stash</span></code>.</p>
<div class="admonition-solution solution important dropdown admonition" id="solution-1">
<p class="admonition-title">Solution</p>
<p>By passing the option <code class="docutils literal notranslate"><span class="pre">-a</span></code>,
we are telling <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">stash</span></code>
to take every file in our working tree,
including untracked and ignored files.</p>
</div>
</div>
<div class="admonition-comments exercise important admonition" id="exercise-2">
<p class="admonition-title">Comments</p>
<p>The option <code class="docutils literal notranslate"><span class="pre">-m</span></code> to add a message is optional. Why use it?</p>
<div class="admonition-solution solution important dropdown admonition" id="solution-2">
<p class="admonition-title">Solution</p>
<p>By looking at the output of <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">stash</span> <span class="pre">list</span></code>,
it will be much easier to determine which stash we are interested in.</p>
</div>
</div>
<div class="admonition-stash-vs-commit exercise important admonition" id="exercise-3">
<p class="admonition-title">Stash vs commit</p>
<p>In what sense are stashes similar to commits?</p>
<div class="admonition-solution solution important dropdown admonition" id="solution-3">
<p class="admonition-title">Solution</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Stashing is roughly equivalent to
```console
git switch -c tempbranch; git add -u; git commit -m &#39;temp commit&#39;}).
```
In particular, stashes are identified as `commit` objects in the object database,
and they are referenced by `refs/stash` and the reflog of the &quot;stash&quot; reference.
</pre></div>
</div>
</div>
<h2 class="rubric" id="option-2-create-branches">Option 2: Create branches</h2>
<p>You can use branches almost like you have already been doing if you
need to save some work.  You need to do something else for a bit?
Sounds like a good time to make a feature branch.</p>
<p>You basically know how to do this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>--create<span class="w"> </span>temporary<span class="w">  </span><span class="c1"># create a branch and switch to it</span>
<span class="gp">$ </span>git<span class="w"> </span>add<span class="w"> </span>PATHS<span class="w">                  </span><span class="c1"># stage changes</span>
<span class="gp">$ </span>git<span class="w"> </span>commit<span class="w">                     </span><span class="c1"># commit them</span>
<span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>main<span class="w">                </span><span class="c1"># back to main, continue your work there ...</span>
<span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>temporary<span class="w">           </span><span class="c1"># continue again on &quot;temporary&quot; where you left off</span>
</pre></div>
</div>
</div>
<p>Later you can merge it to main or rebase it on top of main and resume work.</p>
</section>
</section>
<section id="storing-various-junk-you-don-t-need-but-don-t-want-to-get-rid-of">
<h3>Storing various junk you don’t need but don’t want to get rid of<a class="headerlink" href="#storing-various-junk-you-don-t-need-but-don-t-want-to-get-rid-of" title="Link to this heading"></a></h3>
<p>It happens often that you do something and don’t need it, but you don’t want to
lose it right away.  You can use either of the above strategies to stash/branch
it away: using branches is probably better because branches are less easily
overlooked if you come back to the repository in few weeks.  Note that if you
try to use a branch after a long time, conflicts might get really bad but at
least you have the data still.</p>
</section>
</section>
<span id="document-tooling"></span><section id="tooling-and-practices-that-you-might-find-useful">
<h2>Tooling and practices that you might find useful<a class="headerlink" href="#tooling-and-practices-that-you-might-find-useful" title="Link to this heading"></a></h2>
<div class="admonition-objectives objectives admonition" id="objectives-0">
<p class="admonition-title">Objectives</p>
<ul class="simple">
<li><p>A bird’s eye view of git-related tooling</p></li>
<li><p>Install and configure 1 tool of your choice so that you can start using it</p></li>
</ul>
</div>
<section id="difftools-and-merge-tools">
<h3>Difftools and merge tools.<a class="headerlink" href="#difftools-and-merge-tools" title="Link to this heading"></a></h3>
<p>There are many file types
for which
the usual output of <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span></code>
can be
from difficult to read
to just completely impossible to understand.</p>
<ul class="simple">
<li><p>For Jupyter notebooks: <a class="reference external" href="https://nbdime.readthedocs.io/en/latest/">nbdime</a></p></li>
<li><p>For Latex: <a class="reference external" href="https://www.ctan.org/pkg/latexdiff">Latexdiff</a> (not git-related)
and <a class="reference external" href="https://gitlab.com/git-latexdiff/git-latexdiff">git-latexdiff</a>.
Latex is still a text-based format,
but a PDF-rendered view of the differences can be more readable.</p></li>
<li><p>There are also tools for images
(e.g., <a class="reference external" href="https://github.com/ewanmellor/git-diff-image?tab=readme-ov-file">git-diff-image</a>)</p></li>
</ul>
</section>
<section id="automation-git-hooks">
<h3>Automation: Git Hooks<a class="headerlink" href="#automation-git-hooks" title="Link to this heading"></a></h3>
<p>Git can be configured to perform
some tasks automatically
when some events happen.</p>
<p>Most notable tasks:</p>
<ul class="simple">
<li><p>auto-formatting: is your code properly formatted?
This is important because:</p>
<ul>
<li><p>proper formatting improves readability</p></li>
<li><p>consistently using automatic formatting
makes the output of <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span></code> much more informative
(for easier code reviews)
There are tools for every language you use:</p></li>
<li><p>for Python: <a class="reference external" href="https://black.readthedocs.io/en/stable/">black</a></p></li>
<li><p>for C/C++: <a class="reference external" href="https://clang.llvm.org/docs/ClangFormat.html">clang-format</a></p></li>
</ul>
</li>
<li><p>Linting: there are automated tools that can spot bad practices in writing code</p>
<ul>
<li><p>for Python: <a class="reference external" href="https://pylint.readthedocs.io/en/stable/">pylint</a></p></li>
<li><p>for C/C++: <a class="reference external" href="https://clang.llvm.org/extra/clang-tidy/">clang-tidy</a></p></li>
<li><p>for bash shell scripts: <a class="reference external" href="https://www.shellcheck.net/">shellcheck</a></p></li>
</ul>
</li>
<li><p>Spellchecking (useful for documentation)</p></li>
<li><p>compiling/building, deploying services or documentation</p></li>
<li><p>Launch a test suite</p></li>
</ul>
<p>Such tasks can be performed as part of a <em>git hook</em>.
Git hooks are executable programs
in the <code class="docutils literal notranslate"><span class="pre">.git/hooks/</span></code> directory.</p>
<p>The most commonly used is the <em>pre-commit</em> hook,
which runs when you call <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code>, before the commit message is created.
Auto-formatting, linting tools
and anything that is quick enough
can be run here.</p>
<div class="admonition-try-them-out exercise important admonition" id="exercise-0">
<p class="admonition-title">Try them out!</p>
<p>Install and/or configure some of the mentioned tooling
that can be helpful for your daily workflow.</p>
</div>
<p>Another hook typically used is <em>post-receive</em>.
When it is configured on a remote repository,
it runs after a push.
The <em>post-receive</em> hook is typically used
to start the run of a test suite,
or to notify other services
that the push happened.</p>
</section>
<section id="automation-github-actions-gitlab-ci-cd-et-similia">
<h3>Automation: GitHub Actions, GitLab CI/CD (et similia)<a class="headerlink" href="#automation-github-actions-gitlab-ci-cd-et-similia" title="Link to this heading"></a></h3>
<p>Automation platforms like,
e.g. <a class="reference external" href="https://docs.github.com/en/actions">GitHub actions</a>
and <a class="reference external" href="https://docs.gitlab.com/ee/ci/">GitLab CI/CD</a>
build on top of the idea of the post-receive hook,
and are commonly used for (including but not limited to):</p>
<ul class="simple">
<li><p>run a test suite and present the results in a web interface;</p></li>
<li><p>build the software and make it available for download;</p></li>
<li><p>build and deploy documentation.</p></li>
</ul>
</section>
</section>
<span id="document-merge-tooling"></span><section id="merge-and-beyond">
<h2>Merge and beyond<a class="headerlink" href="#merge-and-beyond" title="Link to this heading"></a></h2>
<p>Git exposes many commands
that can be used to
add the work done in a branch
into another branch.</p>
<p>For the following demonstration,
you can clone a toy repository
created on purpose:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/mmesiti/merge-fu.git
<span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>merge-fu
</pre></div>
</div>
<p>Have a look at the branch structure:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>graph<span class="w"> </span><span class="c1"># alias for git log --oneline --all --graph --decorate</span>
</pre></div>
</div>
<p>For what follows,
we do not want to see all the branches all the time,
so we want to define a <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">gl</span></code> alias <em>locally</em>
without the <code class="docutils literal notranslate"><span class="pre">--all</span></code> flag:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>config<span class="w"> </span>alias.gl<span class="w"> </span>--oneline<span class="w"> </span>--graph<span class="w"> </span>--decorate
</pre></div>
</div>
<p>so that we can use it like this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>gl<span class="w"> </span>branch-1<span class="w"> </span>branch-2
</pre></div>
</div>
<section id="merge">
<h3>Merge<a class="headerlink" href="#merge" title="Link to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">merge</span></code> is the classic command
that is used join
(potentially more than 2)
branches together.</p>
<p>It will create an additional commit,
called the <em>merge commit</em>.</p>
<p>When Git cannot determine unambiguously
how to merge two versions of a given file,
it will produce a <em>conflict</em>.</p>
<p>Solving conflicts requires some practice
and typically some thought.</p>
<p>Complex conflicts
can be made easier to understand
by configuring git to show also
the version in the <a class="reference external" href="https://www.git-scm.com/docs/git-merge-base"><em>merge base</em></a>
in addition to the two conflicting versions:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git config --global merge.conflictstyle diff3</span>
</pre></div>
</div>
<p>Using a <em>merge tool</em> can also help
when there are large change sets to merge.
Please refer to the <a class="reference external" href="https://www.git-scm.com/docs/git-mergetool">documentation</a>
for more information.</p>
<section id="merge-conflict-and-abort">
<h4>Merge Conflict and abort<a class="headerlink" href="#merge-conflict-and-abort" title="Link to this heading"></a></h4>
<p>Let us now try to merge <code class="docutils literal notranslate"><span class="pre">branch-1</span></code>
into <code class="docutils literal notranslate"><span class="pre">branch-2</span></code>.
We first need to create
the local branches
that match the remote ones:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>branch<span class="w"> </span>branch-1<span class="w"> </span>origin/branch-1
<span class="gp">$ </span>git<span class="w"> </span>branch<span class="w"> </span>branch-2<span class="w"> </span>origin/branch-2
</pre></div>
</div>
<p>We can check what are the differences
between the two branches:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>diff<span class="w"> </span>branch-1<span class="w"> </span>branch-2
<span class="go">diff --git a/text-file.txt b/text-file.txt</span>
<span class="go">index b7062f5..ce1f6b8 100644</span>
<span class="go">--- a/text-file.txt</span>
<span class="go">+++ b/text-file.txt</span>
<span class="go">@@ -1,4 +1,4 @@</span>
<span class="go"> 1st line</span>
<span class="go"> 2nd line</span>
<span class="go"> 3rd line</span>
<span class="go">-4th line on branch 1</span>
<span class="go">+4th line on branch 2</span>
</pre></div>
</div>
<div class="admonition-predict-conflicts exercise important admonition" id="exercise-0">
<p class="admonition-title">Predict conflicts</p>
<p>Will the merge between branch-1 and branch-2 cause a conflict?
Why?</p>
<div class="admonition-solution solution important dropdown admonition" id="solution-0">
<p class="admonition-title">Solution</p>
<p>Unfortunately, yes.
Both versions have appended lines at the end,
and Git cannot determine in which order they need to be.</p>
</div>
</div>
<p>First of all,
to do the merge
we need to switch to <code class="docutils literal notranslate"><span class="pre">branch-2</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>branch-2
</pre></div>
</div>
<p>We will get a conflict:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>merge<span class="w"> </span>branch-1
<span class="go">Auto-merging text-file.txt</span>
<span class="go">CONFLICT (content): Merge conflict in text-file.txt</span>
<span class="go">Automatic merge failed; fix conflicts and then commit the result.</span>
</pre></div>
</div>
<p>We can check the content of <code class="docutils literal notranslate"><span class="pre">text-file.txt</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cat<span class="w"> </span>text-file.txt
<span class="go">1st line</span>
<span class="go">2nd line</span>
<span class="go">3rd line</span>
<span class="go">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span>
<span class="go">4th line on branch 2</span>
<span class="go">||||||| 874ebe0</span>
<span class="go">4th line</span>
<span class="go">=======</span>
<span class="go">4th line on branch 1</span>
<span class="go">&gt;&gt;&gt;&gt;&gt;&gt;&gt; branch-1</span>
</pre></div>
</div>
<p>If we know how to solve it,
we can modify the file,
stage it and commit.</p>
<p>But what to do in the unhappy situation
where we are not sure how to proceed?
We stop the merge with the command</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>merge<span class="w"> </span>--abort
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--abort</span></code> option
is a useful “handbrake”
that works also with other commands.</p>
</section>
</section>
<section id="no-conflicts-but-still-wrong">
<h3>No conflicts, but still wrong<a class="headerlink" href="#no-conflicts-but-still-wrong" title="Link to this heading"></a></h3>
<p>There are cases where
a conflictless <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">merge</span></code>
can introduce a bug.</p>
<p>For example,
switch to the branch <code class="docutils literal notranslate"><span class="pre">python-example</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>python-example
</pre></div>
</div>
<p>Check the content of the <code class="docutils literal notranslate"><span class="pre">example.py</span></code> file:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cat<span class="w"> </span>example.py
<span class="go">def add1(n):</span>
<span class="go">    res = n</span>

<span class="go">    print(&quot;This function adds 1 to the input&quot;)</span>

<span class="go">    return res</span>
</pre></div>
</div>
<p>This is obviously wrong:
the function is not adding 1.</p>
<p>Fortunately, we have already two possible fixes,
by Alice and Bob.
One is on branch <code class="docutils literal notranslate"><span class="pre">python-example-fix-1</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>python-example-fix-1
<span class="gp">$ </span>cat<span class="w"> </span>example.py
<span class="go">def add1(n):</span>
<span class="go">    res = n + 1</span>

<span class="go">    print(&quot;This function adds 1 to the input&quot;)</span>

<span class="go">    return res</span>
</pre></div>
</div>
<p>And another is on branch <code class="docutils literal notranslate"><span class="pre">pythyon-example-fix-2</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>python-example-fix-2
<span class="gp">$ </span>cat<span class="w"> </span>example.py
<span class="go">def add1(n):</span>
<span class="go">    res = n</span>

<span class="go">    print(&quot;This function adds 1 to the input&quot;)</span>

<span class="go">    return res + 1</span>
</pre></div>
</div>
<p>They are just one commit away from <code class="docutils literal notranslate"><span class="pre">python-example</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>gl<span class="w"> </span>python-example-fix-1<span class="w"> </span>python-example-fix-2
<span class="go">* 4d8b65f (origin/python-example-fix-2, python-example-fix-2) fix add1</span>
<span class="go">| * 0392b16 (origin/python-example-fix-1, python-example-fix-1) fix add1</span>
<span class="go">|/  </span>
<span class="go">* ff35a6e (HEAD -&gt; python-example, origin/python-example) add python example</span>
<span class="go">* 874ebe0 (origin/main, origin/HEAD, main) First commit</span>
</pre></div>
</div>
<p>Excellent!
We will merge them both
into <code class="docutils literal notranslate"><span class="pre">python-example</span></code>,
to make everybody feel like
their work is appreciated.
We switch to the <code class="docutils literal notranslate"><span class="pre">python-example</span></code> branch:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>python-example
<span class="go">Switched to branch &#39;python-example&#39;</span>
<span class="go">Your branch is up to date with &#39;origin/python-example&#39;.</span>
</pre></div>
</div>
<p>We merge first <code class="docutils literal notranslate"><span class="pre">python-example-fix-1</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git merge python-example-fix-1 
Updating ff35a6e..0392b16
Fast-forward
 example.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)
</pre></div>
</div>
<p>This merge is a <em>fast forward</em>:
<code class="docutils literal notranslate"><span class="pre">python-example-fix-1</span></code> is a direct descendant of
the <code class="docutils literal notranslate"><span class="pre">python-example</span></code>
so <code class="docutils literal notranslate"><span class="pre">python-example</span></code> can be just moved forward
without too much thinking.</p>
<p>We then merge <code class="docutils literal notranslate"><span class="pre">python-example-fix-2</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git merge python-example-fix-2
Auto-merging example.py
Merge made by the &#39;ort&#39; strategy.
 example.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)
</pre></div>
</div>
<p>The file is now <strong>wrong</strong>, though:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cat<span class="w"> </span>example.py
<span class="go">def add1(n):</span>
<span class="go">    res = n + 1</span>

<span class="go">    print(&quot;This function adds 1 to the input&quot;)</span>

<span class="go">    return res + 1</span>
</pre></div>
</div>
<p>We are adding 1 twice!</p>
<p>This is obviously a contrived example.
But it shows that:</p>
<ol class="arabic simple">
<li><p>conflicts might be annoying,
but are actually a good thing;</p></li>
<li><p>merges should always be checked in some way,
by a human and/or with an automatic test suite.</p></li>
</ol>
<p>To fix this, we can undo the commit
in one of the ways we have already seen.</p>
<div class="admonition-optional-revert-a-merge-commit exercise important admonition" id="exercise-1">
<p class="admonition-title">Optional: <code class="docutils literal notranslate"><span class="pre">revert</span></code> a merge commit</p>
<p>When reverting a merge commit,
it is not clear which is the parent commit
to which we want to revert.</p>
<p>Use the <code class="docutils literal notranslate"><span class="pre">-m</span></code> option
(<code class="docutils literal notranslate"><span class="pre">--mainline</span></code>)
to select the version
you want to revert to.
See the <a class="reference external" href="https://www.git-scm.com/docs/git-revert#Documentation/git-revert.txt--mparent-number">documentation</a>
for <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">revert</span></code>.</p>
</div>
</section>
<section id="cherry-pick">
<h3>Cherry-Pick<a class="headerlink" href="#cherry-pick" title="Link to this heading"></a></h3>
<p>There might be a commit in a branch
that we want to use,
without merging the whole branch on which it was created.</p>
<p>For this we will consider the branches
<code class="docutils literal notranslate"><span class="pre">proverbs</span></code> and ‘good-and-bad-commits’:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>gl<span class="w"> </span>proverbs<span class="w"> </span>good-and-bad-commits<span class="w"> </span>
</pre></div>
</div>
<p>The branch that contains our work is <code class="docutils literal notranslate"><span class="pre">proverbs</span></code>,
where we started a collection of popular pieces of wisdom.
Perhaps the branch <code class="docutils literal notranslate"><span class="pre">good-and-bad-commits</span></code>
contains some useful work?
We can check it with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span> <span class="pre">-p</span></code>,
which will show all the changes
along with the commit messages:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>log<span class="w"> </span>--oneline<span class="w"> </span>-p<span class="w"> </span>proverbs..good-and-bad-commits<span class="w"> </span><span class="p">|</span><span class="w"> </span>cat
<span class="go">9396ffd git is hard!!!!!</span>
<span class="go">diff --git a/wisdom.txt b/wisdom.txt</span>
<span class="go">index b3c8fac..ec51263 100644</span>
<span class="go">--- a/wisdom.txt</span>
<span class="go">+++ b/wisdom.txt</span>
<span class="go">@@ -4,3 +4,6 @@ Early to bed,</span>
<span class="go"> early to rise,</span>
<span class="go"> makes a man wealthy, </span>
<span class="go"> healthy, and wise.</span>
<span class="go">+</span>
<span class="go">+</span>
<span class="go">+I HATE VERSION CONTROL!</span>
<span class="go">82cfb15 Add proverb</span>
<span class="go">diff --git a/wisdom.txt b/wisdom.txt</span>
<span class="go">index c343ccb..b3c8fac 100644</span>
<span class="go">--- a/wisdom.txt</span>
<span class="go">+++ b/wisdom.txt</span>
<span class="go">@@ -1 +1,6 @@</span>
<span class="gp"> # </span>Old<span class="w"> </span>Proverbs
<span class="go">+</span>
<span class="go">+Early to bed,</span>
<span class="go">+early to rise,</span>
<span class="go">+makes a man wealthy, </span>
<span class="go">+healthy, and wise.</span>
</pre></div>
</div>
<p>here <code class="docutils literal notranslate"><span class="pre">proverbs..good-and-bad-commits</span></code>
is a way of specifying the range of commits
above <em>merge base</em> on the branch <code class="docutils literal notranslate"><span class="pre">good-and-bad-commits</span></code>.</p>
<p>Once we see the content of each commit,
we become interested in applying
the second-last commit on <code class="docutils literal notranslate"><span class="pre">good-and-bad-commits</span></code>
to the <code class="docutils literal notranslate"><span class="pre">proverb</span></code> branch.</p>
<p>To do so, we switch to the <code class="docutils literal notranslate"><span class="pre">proverb</span></code> branch</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>proverb
</pre></div>
</div>
<p>and use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">cherry-pick</span></code>
with the commit we want to apply</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>cherry-pick<span class="w">  </span>good-and-bad-commits~
<span class="go">Auto-merging wisdom.txt</span>
<span class="go">CONFLICT (content): Merge conflict in wisdom.txt</span>
<span class="go">error: could not apply 82cfb15... Add proverb</span>
<span class="go">hint: After resolving the conflicts, mark them with</span>
<span class="go">hint: &quot;git add/rm &lt;pathspec&gt;&quot;, then run</span>
<span class="go">hint: &quot;git cherry-pick --continue&quot;.</span>
<span class="go">hint: You can instead skip this commit with &quot;git cherry-pick --skip&quot;.</span>
<span class="go">hint: To abort and get back to the state before &quot;git cherry-pick&quot;,</span>
<span class="go">hint: run &quot;git cherry-pick --abort&quot;.</span>
</pre></div>
</div>
<p>We have a conflict,
but the resolution in this case is trivial.</p>
</section>
<section id="rebase">
<h3>Rebase<a class="headerlink" href="#rebase" title="Link to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">rebase</span></code> is an alternative to <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">merge</span></code>
that typically leads to a clearer commit history.</p>
<p>In particular:</p>
<ul class="simple">
<li><p>an additional merge commit is not necessary</p></li>
<li><p>the commit graph has no bifurcations</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">rebase</span></code> command
will try to reapply
all the commits on the current branch
on top of another branch
(which will be left untouched),
and then point the current branch
at the last commit.</p>
<div class="admonition-the-golden-rule-of-rebase callout admonition" id="callout-0">
<p class="admonition-title">The Golden Rule of Rebase</p>
<p>Do not be rude:
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">rebase</span></code> <em>rewrites history</em>.
Be very careful when rebasing public branches!</p>
</div>
<section id="rebase-demo">
<h4>Rebase demo<a class="headerlink" href="#rebase-demo" title="Link to this heading"></a></h4>
<p>For this demo we will switch on branch <code class="docutils literal notranslate"><span class="pre">rebase-me</span></code></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>rebase-me
</pre></div>
</div>
<p>and try to rebase it onto the branch <code class="docutils literal notranslate"><span class="pre">rebase-onto-this</span></code>,
which we need to create locally
from the remote branch,
with this command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>branch<span class="w"> </span>rebase-onto-this<span class="w"> </span>origin/rebase-onto-this
</pre></div>
</div>
<p>We can have a look
at the branch structure:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>gl<span class="w"> </span>rebase-me<span class="w"> </span>rebase-onto-this
<span class="go">* 3b514df (rebase-onto-this) Add line at end</span>
<span class="go">* e459dcd Add an intermezzo</span>
<span class="go">* a4cc39e (origin/branch-1, branch-1) 2nd commit - on branch-1</span>
<span class="go">| * d30163f (HEAD -&gt; rebase-me) 3rd commit - on branch rebase-me</span>
<span class="go">| * 98f36f0 2nd commit - on branch rebase-me</span>
<span class="go">|/  </span>
<span class="go">* 874ebe0 (origin/main, origin/HEAD, main) First commit</span>
</pre></div>
</div>
<p>We see that:</p>
<ul class="simple">
<li><p>there is a bifurcation at <code class="docutils literal notranslate"><span class="pre">874ebe0</span></code></p></li>
<li><p>our current branch (<code class="docutils literal notranslate"><span class="pre">rebase-me</span></code>)
has 2 commits above the merge base</p></li>
<li><p>the branch we want to rebase on
(<code class="docutils literal notranslate"><span class="pre">rebase-onto-this</span></code>)
has 3 commits above the merge base.</p></li>
</ul>
<p>To be able to compare the end result
with the initial situation,
we create a “backup branch” as a bookmark:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>branch<span class="w"> </span>rebase-me-original<span class="w"> </span>rebase-me
</pre></div>
</div>
<p>We now can do the proper rebase.
Make sure we are on the <code class="docutils literal notranslate"><span class="pre">rebase-me</span></code> branch:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>branch<span class="w"> </span>
<span class="go">  branch-1</span>
<span class="go">  branch-2</span>
<span class="go">  good-and-bad-commits</span>
<span class="go">  main</span>
<span class="go">  proverbs</span>
<span class="go">* rebase-me</span>
<span class="go">  rebase-me-original</span>
<span class="go">  rebase-onto-this</span>
</pre></div>
</div>
<p>then we invoke the rebase command
to rebase the current branch (<code class="docutils literal notranslate"><span class="pre">rebase-me</span></code>)
onto <code class="docutils literal notranslate"><span class="pre">rebase-onto-this</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>rebase<span class="w"> </span>rebase-onto-this
</pre></div>
</div>
<p>This command will try to apply
all the commits on the current branch (<code class="docutils literal notranslate"><span class="pre">rebase-me</span></code>)
onto the branch <code class="docutils literal notranslate"><span class="pre">rebase-onto-this</span></code>,
one at a time.
For each commit we might get a conflict,
which is the first thing</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Auto-merging text-file.txt</span>
<span class="go">CONFLICT (content): Merge conflict in text-file.txt</span>
<span class="go">error: could not apply 98f36f0... 2nd commit - on branch rebase-me</span>
<span class="go">hint: Resolve all conflicts manually, mark them as resolved with</span>
<span class="go">hint: &quot;git add/rm &lt;conflicted_files&gt;&quot;, then run &quot;git rebase --continue&quot;.</span>
<span class="go">hint: You can instead skip this commit: run &quot;git rebase --skip&quot;.</span>
<span class="go">hint: To abort and get back to the state before &quot;git rebase&quot;, run &quot;git rebase --abort&quot;.</span>
<span class="go">Could not apply 98f36f0... 2nd commit - on branch rebase-me</span>
</pre></div>
</div>
<p>We can resolve this conflict in the way we please.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="c1"># edit text-file.txt</span>
</pre></div>
</div>
<p>Once we are done,
we can add our changes:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>add<span class="w"> </span>text-file.txt
</pre></div>
</div>
<p>and tell rebase to continue to the next commit:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>rebase<span class="w"> </span>--continue
</pre></div>
</div>
<p>When rebase can automatically merge without commits,
it will not ask for our intervention,
but when there are conflicts it will stop and ask us to solve them,
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> the results
and then use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">rebase</span> <span class="pre">--continue</span></code>.</p>
<p>After all the commits on the current branch are processed,
we will get a linear commit history for the current branch:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>log<span class="w"> </span>--oneline
<span class="go">f5b0417 (HEAD -&gt; rebase-me) 3rd commit - on branch rebase-me</span>
<span class="go">3b514df (rebase-onto-this) Add line at end</span>
<span class="go">e459dcd Add an intermezzo</span>
<span class="go">a4cc39e (origin/branch-1, branch-1) 2nd commit - on branch-1</span>
<span class="go">874ebe0 (origin/main, origin/HEAD, main) First commit</span>
</pre></div>
</div>
<p>We can compare the new commit history
with the original position of the branch:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>gl<span class="w"> </span>rebase-me<span class="w"> </span>rebase-me-original
<span class="go">* f5b0417 (HEAD -&gt; rebase-me) 3rd commit - on branch rebase-me</span>
<span class="go">* 3b514df (rebase-onto-this) Add line at end</span>
<span class="go">* e459dcd Add an intermezzo</span>
<span class="go">* a4cc39e (origin/branch-1, branch-1) 2nd commit - on branch-1</span>
<span class="go">| * d30163f (rebase-me-original) 3rd commit - on branch rebase-me</span>
<span class="go">| * 98f36f0 2nd commit - on branch rebase-me</span>
<span class="go">|/  </span>
<span class="go">* 874ebe0 (origin/main, origin/HEAD, main) First commit</span>
</pre></div>
</div>
<p>As <code class="docutils literal notranslate"><span class="pre">merge</span></code> and <code class="docutils literal notranslate"><span class="pre">cherry-pick</span></code>,
<code class="docutils literal notranslate"><span class="pre">rebase</span></code> has a <code class="docutils literal notranslate"><span class="pre">--abort</span></code> option.</p>
<p>If we are not satisfied by the result of the rebase
after it completed,
we can use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">reflog</span> <span class="pre">rebase-me</span></code>
to determine the last satisfactory commit,
and use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">reset</span></code> to move the branch
to point there again.</p>
<p>Sometimes,
the same conflicts will need to be solved
over and over in the same way.
In such a situation, the <a class="reference external" href="https://git-scm.com/book/en/v2/Git-Tools-Rerere"><code class="docutils literal notranslate"><span class="pre">rerere</span></code> command</a>
(<code class="docutils literal notranslate"><span class="pre">re</span></code>use <code class="docutils literal notranslate"><span class="pre">re</span></code>corded <code class="docutils literal notranslate"><span class="pre">re</span></code>solution)
may come in handy.</p>
</section>
</section>
<section id="interactive-rebase">
<h3>Interactive rebase<a class="headerlink" href="#interactive-rebase" title="Link to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">rebase</span></code> has an interactive mode
(that can be entered using the <code class="docutils literal notranslate"><span class="pre">-i</span></code> flag,
or <code class="docutils literal notranslate"><span class="pre">--interactive</span></code>)
that can be used to
perform complex manipulations of
the commit history in a range.</p>
<p>It is very powerful,
and it is also used to clean the commit history
of a feature branch
before making a pull request
(in this case,
there are lower chances for conflicts
because we rebase
on a commit that is already
an ancestor of the current branch,
e.g. <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">rebase</span> <span class="pre">-i</span> <span class="pre">HEAD~3</span></code>).</p>
<p>It is possible to perform the following actions
on any commit in the range:</p>
<ul class="simple">
<li><p><strong>pick</strong>: keep it in the history;</p></li>
<li><p><strong>drop</strong>: dropt it from the history;</p></li>
<li><p><strong>reword</strong>: change only the commit message</p></li>
<li><p><strong>squash</strong>: remove the commit, but attribute its changes
to the previous picked commit.</p></li>
<li><p><strong>edit</strong>: change the files and the commit message
(even create new commits in the meantime - the opposite of squashing)</p></li>
<li><p><strong>exec</strong>: pause the rebasing and run a command there (e.g., a test suite)</p></li>
</ul>
<p>More information can be read
from <a class="reference external" href="https://git-scm.com/docs/git-rebase#_interactive_mode">the manual</a>.</p>
<div class="admonition-interactive-rebase-on-another-branch exercise important admonition" id="exercise-2">
<p class="admonition-title">Interactive rebase on another branch</p>
<p>You can practice interactive rebase with</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>rebase-me
<span class="gp">$ </span>git<span class="w"> </span>reset<span class="w"> </span>reset<span class="w"> </span>--hard<span class="w"> </span>d30163f<span class="w"> </span>
<span class="gp">$ </span>git<span class="w"> </span>rebase<span class="w"> </span>-i<span class="w"> </span>rebase-onto-this
</pre></div>
</div>
</div>
</section>
</section>
</div>
<div class="toctree-wrapper compound">
<span id="document-reference"></span><section id="quick-reference">
<h2>Quick reference<a class="headerlink" href="#quick-reference" title="Link to this heading"></a></h2>
<section id="other-cheatsheets">
<h3>Other cheatsheets<a class="headerlink" href="#other-cheatsheets" title="Link to this heading"></a></h3>
<p>See the <a class="reference external" href="https://coderefinery.github.io/git-intro/reference/">git-intro cheatsheet</a> for
the basics.</p>
<ul class="simple">
<li><p><a class="reference external" href="http://www.ndpsoftware.com/git-cheatsheet.html">Interactive git cheatsheet</a></p></li>
<li><p><a class="reference external" href="https://aaltoscicomp.github.io/cheatsheets/git-the-way-you-need-it-cheatsheet.pdf">Very detailed 2-page git
cheatsheet</a></p></li>
</ul>
</section>
<section id="glossary">
<h3>Glossary<a class="headerlink" href="#glossary" title="Link to this heading"></a></h3>
<dl class="simple glossary">
<dt id="term-forge">forge<a class="headerlink" href="#term-forge" title="Link to this term"></a></dt><dd><p>A web-based collaborative software platform for both developing and sharing code
(from <a class="reference external" href="https://en.wikipedia.org/wiki/Forge_(software)">wikipedia</a>).
Common example of forges are github.com, gitlab.com, codeberg.org,
and self-hosted instances of GitLab or Forgejo.</p>
</dd>
<dt id="term-remote">remote<a class="headerlink" href="#term-remote" title="Link to this term"></a></dt><dd><p>Roughly, another git repository on another computer.  A
repository can be linked to several other remotes.</p>
</dd>
<dt id="term-push">push<a class="headerlink" href="#term-push" title="Link to this term"></a></dt><dd><p>Send a branch from your current repository to another repository</p>
</dd>
<dt id="term-fetch">fetch<a class="headerlink" href="#term-fetch" title="Link to this term"></a></dt><dd><p>Update your view of another repository</p>
</dd>
<dt id="term-pull">pull<a class="headerlink" href="#term-pull" title="Link to this term"></a></dt><dd><p>Fetch (above) and then merge</p>
</dd>
<dt id="term-origin">origin<a class="headerlink" href="#term-origin" title="Link to this term"></a></dt><dd><p>Default name for a remote repository.</p>
</dd>
<dt id="term-origin-NAME">origin/NAME<a class="headerlink" href="#term-origin-NAME" title="Link to this term"></a></dt><dd><p>A branch name which represents a remote branch.</p>
</dd>
<dt id="term-main">main<a class="headerlink" href="#term-main" title="Link to this term"></a></dt><dd><p>Default name for main branch.</p>
</dd>
<dt id="term-merge">merge<a class="headerlink" href="#term-merge" title="Link to this term"></a></dt><dd><p>Combine the changes on two branches.</p>
</dd>
<dt id="term-conflict">conflict<a class="headerlink" href="#term-conflict" title="Link to this term"></a></dt><dd><p>When a merge has changes that affect the same lines,
git can not automatically figure out what to do.  It presents the
conflict to the user to resolve.</p>
</dd>
<dt id="term-issue">issue<a class="headerlink" href="#term-issue" title="Link to this term"></a></dt><dd><p>Feature of web repositories that allows discussion
related to a repository.</p>
</dd>
<dt id="term-pull-request">pull request<a class="headerlink" href="#term-pull-request" title="Link to this term"></a></dt><dd><p>A GitHub/Gitlab feature that allows you to send a
code suggestion using a branch, which allows one-button merging.  In
Gitlab, called “<strong>merge request</strong>”.</p>
</dd>
<dt id="term-git-hook">git hook<a class="headerlink" href="#term-git-hook" title="Link to this term"></a></dt><dd><p>Code that can run before or after certain actions, for
example to do tests before allowing you to commit.</p>
</dd>
<dt id="term-bare-repository">bare repository<a class="headerlink" href="#term-bare-repository" title="Link to this term"></a></dt><dd><p>A copy of a repository that only is only the <code class="docutils literal notranslate"><span class="pre">.git</span></code>
directory: there are no files actually checked out.  Directory names
usually like <code class="docutils literal notranslate"><span class="pre">something.git</span></code></p>
</dd>
<dt id="term-working-tree">working tree<a class="headerlink" href="#term-working-tree" title="Link to this term"></a></dt><dd><p>The directory where the files of your project live,
excluding the <code class="docutils literal notranslate"><span class="pre">.git</span></code> subdirectory.
It represents all that non git-aware applications can interact with,
and it exists independently of git,
but it can be manipulated by git</p>
</dd>
<dt id="term-index">index<a class="headerlink" href="#term-index" title="Link to this term"></a></dt><dd><p>Also called sometimes “staging area”.
A version of a file is added to it with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code>.</p>
</dd>
<dt id="term-object">object<a class="headerlink" href="#term-object" title="Link to this term"></a></dt><dd><p>A git object is one of 4 kinds: a commit (representing a commit or a stash),
a tree (representing a directory), a blob (representing a file)
or a tag.</p>
</dd>
</dl>
</section>
<section id="commands-we-use">
<h3>Commands we use<a class="headerlink" href="#commands-we-use" title="Link to this heading"></a></h3>
<p>This excludes most introduced in the <a class="reference external" href="https://coderefinery.github.io/git-intro/reference/">git-intro
cheatsheet</a>.</p>
<p>Setup:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">URL</span> <span class="pre">[TARGET-DIRECTORY]</span></code>: Make a copy of existing
repository at &lt;url&gt;, containing all history.</p></li>
</ul>
<p>Status:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code>: Same as in basic git, list status</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">remote</span> <span class="pre">[-v]</span></code>: List all remotes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">graph</span></code>: see a detailed graph of commits.  Create this command
with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">config</span> <span class="pre">--global</span> <span class="pre">alias.graph</span> <span class="pre">&quot;log</span> <span class="pre">--all</span> <span class="pre">--graph</span> <span class="pre">--decorate</span> <span class="pre">--oneline&quot;</span></code></p></li>
</ul>
<p>General work:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">switch</span> <span class="pre">BRANCH-NAME</span></code>: Make a branch active.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span> <span class="pre">[REMOTE-NAME]</span> <span class="pre">[BRANCH:BRANCH]</span></code>: Send commits and
update the branch on the remote.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span> <span class="pre">[REMOTE-NAME]</span> <span class="pre">[BRANCH-NAME]</span></code>: Fetch and then merge
automatically.  Can be convenient, but to be careful you can fetch
and merge separately.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">fetch</span> <span class="pre">[REMOTE-NAME]</span></code>: Get commits from the remote.  Doesn’t
update local branches, but updates the remote tracking branches
(like origin/NAME).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">merge</span> <span class="pre">[BRANCH-NAME]</span></code>: Updates your current branch with
changes from another branch.  By default, merges to the branch is is
tracking by default.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">remote</span> <span class="pre">add</span> <span class="pre">REMOTE-NAME</span> <span class="pre">URL</span></code>: Adds a new remote with a
certain name.</p></li>
</ul>
</section>
</section>
<span id="document-exercises"></span><section id="list-of-exercises">
<h2>List of exercises<a class="headerlink" href="#list-of-exercises" title="Link to this heading"></a></h2>
<section id="full-list">
<h3>Full list<a class="headerlink" href="#full-list" title="Link to this heading"></a></h3>
<p>This is a list of all exercises and solutions in this lesson, mainly
as a reference for helpers and instructors.  This list is
automatically generated from all of the other pages in the lesson.
Any single teaching event will probably cover only a subset of these,
depending on their interests.</p>
</section>
</section>
<span id="document-guide"></span><section id="instructor-guide">
<h2>Instructor guide<a class="headerlink" href="#instructor-guide" title="Link to this heading"></a></h2>
<section id="schedule">
<h3>Schedule<a class="headerlink" href="#schedule" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>08:50: Soft start</p></li>
<li><p>09:00: Necessary introductions, forming groups.</p></li>
<li><p>09:15: Recap on Git basics</p></li>
<li><p>09:40: Beyond add and commit: undoing mistakes</p></li>
<li><p>10:00: Inspecting history</p></li>
<li><p>10:30: Break</p></li>
<li><p>10:50: Concepts around collaboration</p></li>
<li><p>11:00: Collaborating within the same repository</p></li>
<li><p>11:30: Demo: Code review</p></li>
<li><p>11:40: Demo: How to contribute changes to repositories that belong to others</p></li>
<li><p>11:50: Tooling and practices</p></li>
<li><p>12:00: Merge and Beyond</p></li>
<li><p>12:10: Free practice and discussion</p></li>
</ul>
</section>
<section id="why-i-modified-this-lesson">
<h3>Why I modified this lesson<a class="headerlink" href="#why-i-modified-this-lesson" title="Link to this heading"></a></h3>
<p>The main change is that I am adding a little more content.</p>
<p>My impression is that in CodeRefinery workshops
the pace is a bit relaxed,
and more could be done in a in-person setting
(which is the plan here).</p>
<p>I would not let attendees work on their own on an exercise
for 30 minutes without feedback,
so I changed the times of the exercise lessons
to also include instructor feedback.</p>
<p>Another change is that I try not to be <a class="reference internal" href="index.html#term-forge"><span class="xref std std-term">forge</span></a>-specific.
One reason is that the expected audience
typically has access to GitLab instances,
and also someone might be concerned
about handing all their code to a Microsoft-owned platform,
so I am adding codeberg.org as an alternative.
Another reason is that actually the features of every forge
typically evolve over time.
Looking at a variety of forges at a single time point
might give an idea of the distribution of features
of a single forge at different points in time.</p>
<section id="audience-intended-for-this-course">
<h4>Audience intended for this course<a class="headerlink" href="#audience-intended-for-this-course" title="Link to this heading"></a></h4>
<p>There seems to be quite a demand
for an intermediate Git course at KIT.</p>
<p>The audience of this course is expected
to be slightly more familiar with git
than target of the original CodeRefinery workshops
(which start on day 1 assuming no git knowledge - so I think),
and definitely more advanced than the audience
that would attend a Software Carpentry lesson on Git.</p>
<p>At KIT, we do offer the software carpentry curriculum already twice a year,
complete beginners should attend those courses instead of coming to this course.</p>
</section>
</section>
<section id="intended-prerequisites">
<h3>Intended prerequisites<a class="headerlink" href="#intended-prerequisites" title="Link to this heading"></a></h3>
<p>At the beginning of this lesson, learners:</p>
<ul class="simple">
<li><p>Must know the basic git commands (status/diff/add/commit)</p></li>
<li><p>Should be comfortable with the command line</p></li>
<li><p>Should Be familiar with the usual git workflow (pull/add/commit/push)</p></li>
<li><p>Probably already have used github or similar</p></li>
<li><p><strong>Should have a way to authenticate to the chosen forge</strong></p></li>
</ul>
</section>
<section id="intended-learning-outcomes">
<h3>Intended learning outcomes<a class="headerlink" href="#intended-learning-outcomes" title="Link to this heading"></a></h3>
<p>By the end of this lesson, learners should:</p>
<ul class="simple">
<li><p>Understand the concept of remotes</p></li>
<li><p>Be able to describe the difference between local and remote branches</p></li>
<li><p>Be able to describe the difference between centralized and forking workflows</p></li>
<li><p>Be able to work efficiently with forges:</p>
<ul>
<li><p>Know how to use pull requests or merge requests to submit changes to another projects</p></li>
<li><p>Know how to reference issues in commits or pull/merge requests and how to auto-close issues</p></li>
<li><p>Know how to update a fork</p></li>
</ul>
</li>
<li><p><strong>Be able to contribute in code review as submitter or reviewer</strong></p></li>
<li><p>Know the difference between merge and rebase, in particular:</p>
<ul>
<li><p>Know the golden rule of rebase</p></li>
<li><p>What force push means (what are the consequences)</p></li>
<li><p>What are the advantages of a linear commit history</p></li>
</ul>
</li>
<li><p>Choose the right tool for fixing common problems with Git <em>(I know this is a little vague)</em>/
This includes:</p>
<ul>
<li><p>issues with lost data when using git add/checkout/restore</p></li>
<li><p>cleaning their commit history if they so wish (rebase)</p></li>
<li><p>deal with large binary files (lfs/annex)</p></li>
<li><p>deal with large repositories (partial cloning)</p></li>
<li><p>using long complex commands efficiently (aliases)</p></li>
<li><p>use git to analyse development history (pickaxe, blame, bisect)</p></li>
<li><p>re-discover which branches they had been working on before</p></li>
<li><p>dealing with nested repositories (existence of submodules)</p></li>
<li><p>when you do not want to add/commit part of the changes you made to a file,
without having to undo (potentially big) changes in your editor (-p)</p></li>
<li><p>collaboration between windows and *nix users (line ending issues)</p></li>
<li></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="instructor-guide-original">
<h2>Instructor guide - original<a class="headerlink" href="#instructor-guide-original" title="Link to this heading"></a></h2>
<section id="schedule-original">
<h3>Schedule - Original<a class="headerlink" href="#schedule-original" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>08:50 - 09:00: Soft start and icebreaker question</p></li>
<li><p>09:00 - 09:15: Recap Git, any HedgeDoc questions to highlight</p></li>
<li><p>09:15 - 09:30: <a class="reference external" href="https://coderefinery.github.io/git-intermediate/remotes/">Concepts around collaboration</a></p>
<ul>
<li><p>Explain terms: Pull, push, clone, fork. Focus on pull and not fetch.</p></li>
<li><p>Focus more on clone and less on generating from templates and importing.</p></li>
</ul>
</li>
<li><p>09:30 - 11:00: <a class="reference external" href="https://coderefinery.github.io/git-intermediate/centralized/">Centralized workflow</a></p>
<ul>
<li><p>9:30 - 9:45: Explain concepts</p></li>
<li><p>9:45 - 9:55: Break</p></li>
<li><p>9:55 - 10:00: Inform clearly what is expected outcome</p></li>
<li><p>10:00 - 10:30: <a class="reference external" href="https://coderefinery.github.io/git-intermediate/centralized/#exercise-preparation">Exercise</a></p></li>
<li><p>10:30 - 11:00: Instructors go through the exercise. Discussion and answering questions</p></li>
</ul>
</li>
<li><p>11:00 - 12:00: Lunch Break</p></li>
<li><p>12:00 - 13:10: <a class="reference external" href="https://coderefinery.github.io/git-intermediate/distributed/">Distributed version control and forking workflow</a></p>
<ul>
<li><p>12:00 - 12:15: Concepts and what are exercise outcomes</p></li>
<li><p>12:15 - 12:45: <a class="reference external" href="https://coderefinery.github.io/git-intermediate/distributed/#exercise-preparation">Exercise</a></p></li>
<li><p>12:45 - 12:55 Break</p></li>
<li><p>12:55 - 13:10: Instructors go through excercises. Discussion and answering questions</p></li>
</ul>
</li>
<li><p>13:10 - 13:30: <a class="reference external" href="https://coderefinery.github.io/git-intermediate/contributing/">How to contribute changes to somebody else’s project</a> and Q&amp;A</p></li>
</ul>
</section>
<section id="why-we-teach-this-lesson-original">
<h3>Why we teach this lesson - original<a class="headerlink" href="#why-we-teach-this-lesson-original" title="Link to this heading"></a></h3>
<p>In order to collaborate efficiently using Git,
it’s essential to have a solid understanding of how remotes work,
and how to contribute changes through pull
requests or merge requests.
The <a class="reference external" href="https://coderefinery.github.io/git-intro/">git-intro lesson</a>
teaches participants how to
work efficiently with Git when there is only one developer (more precisely: how
to work when there are no remote Git repositories yet in the picture). This
lesson dives into the collaborative aspects of Git and focuses on the possible
collaborative workflows enabled by web-based repository hosting platforms like
GitHub.</p>
<p>This lesson is meant to directly benefit workshop participants who have prior
experience with Git, enabling them to put collaborative workflows involving
code review directly into practice when they return to their normal work.</p>
<p>For novice Git users (who may have learned a lot in the git-intro lesson) this
lesson is somewhat challenging, but the lesson aims to introduce them to the
concepts and give them confidence to start using these workflows later when
they have gained some further experience in working with Git.</p>
</section>
<section id="id1">
<h3>Intended learning outcomes<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<p>By the end of this lesson, learners should:</p>
<ul class="simple">
<li><p>Understand the concept of remotes</p></li>
<li><p>Be able to describe the difference between local and remote branches</p></li>
<li><p>Be able to describe the difference between centralized and forking workflows</p></li>
<li><p>Know how to use pull requests or merge requests to submit changes to another projects</p></li>
<li><p>Know how to reference issues in commits or pull/merge requests and how to auto-close issues</p></li>
<li><p>Know how to update a fork</p></li>
<li><p><strong>Be able to contribute in code review as submitter or reviewer</strong></p></li>
</ul>
</section>
<section id="interesting-questions-you-might-get">
<h3>Interesting questions you might get<a class="headerlink" href="#interesting-questions-you-might-get" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>If participants run <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">graph</span></code> they might notice <code class="docutils literal notranslate"><span class="pre">origin/HEAD</span></code>.  This has been
omitted from the figures to not overload the presentation. This pointer represents the
default branch of the remote repository.</p></li>
</ul>
</section>
<section id="timing">
<h3>Timing<a class="headerlink" href="#timing" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>The centralized collaboration episode is densest and introduces many new concepts,
so at least an hour is required for it.</p></li>
<li><p>The forking-workflow exercise repeats familiar concepts (only
introduces forking and distributed workflows), and it takes maybe half the
time of the first episode.</p></li>
<li><p>The “How to contribute changes to somebody else’s project” episode can be
covered relatively quickly and offers room for discussion if you have time left.
However, this should not be skipped as this is perhaps the key learning outcome.</p></li>
</ul>
</section>
<section id="preparing-exercises">
<h3>Preparing exercises<a class="headerlink" href="#preparing-exercises" title="Link to this heading"></a></h3>
<p>Exercise leads typically prepare exercise repositories for the exercise group
(although the material speaks about “maintainer” who can also be one of the
learners). Preparing the first exercise (centralized workflow) will take more
time than preparing the second (forking workflow). Most preparation time is not
the generating part but will go into communicating the URL to the exercise
group, communicating their usernames, adding them as collaborators, and waiting
until everybody accepts the GitHub invitation to join the newly created
exercise repository.</p>
<p><strong>Live stream</strong>:</p>
<ul>
<li><p>Create the centralized exercises <strong>in an organization</strong> (not under your username) so
that you can give others admin access to add collaborators. Also this way you
can then fork yourself if needed.</p></li>
<li><p>For CR workshops, the exercises were placed under
<a class="reference external" href="https://github.com/cr-workshop-exercises">https://github.com/cr-workshop-exercises</a>. The instructors or team leads need to have owner status in the organization in order to invite people.</p></li>
<li><p>We have created two versions of each <strong>a day in advance</strong> to signal which one might end up
being discussed on recording/stream:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">centralized-workflow-exercise-recorded</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">centralized-workflow-exercise</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">forking-workflow-exercise-recorded</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">forking-workflow-exercise</span></code></p></li>
</ul>
</li>
<li><p>Protect the default branch of the two <code class="docutils literal notranslate"><span class="pre">centralized-*</span></code> repositories.</p></li>
<li><p>We create a organization team, <code class="docutils literal notranslate"><span class="pre">stream-exercise-participants</span></code>.  The
<em>centralized</em> workflow exercise repos have this team added as a
collaborator (<em>not</em> forking - they fork so they don’t need write
access there).</p></li>
<li><p>We have collected usernames of people who want to contribute via
issues on GitHub.  Make a fifth repository, <code class="docutils literal notranslate"><span class="pre">access-requests</span></code>,
create a sample access request issue there, and have learners make a
new issue in that repository.  The day/morning before the day of the lesson the instructor or team leader now has to invite the learners to the team. Three steps:
1. copy the learners GitHub username from the issue
2. go to <a class="reference external" href="https://github.com/orgs/cr-workshop-exercises/teams/stream-exercise-participants/members">team member page, example linked here</a> and invite that username to the team (this means first clicking invite and then scrolling down to click the “add username to …” button. This sends an email to that users email that is connected to their GitHub account.
3. In the issue, copy following text (or similar) to the issue and “close with comment”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">We</span> <span class="n">have</span> <span class="n">added</span> <span class="n">you</span> <span class="n">to</span> <span class="n">the</span> <span class="n">CodeRefinery</span> <span class="n">exercise</span> <span class="n">repository</span><span class="o">.</span>

<span class="n">What</span> <span class="n">you</span> <span class="n">should</span> <span class="n">do</span> <span class="n">before</span> <span class="n">the</span> <span class="n">exercise</span> <span class="n">starts</span><span class="p">:</span>

<span class="n">You</span> <span class="n">will</span> <span class="n">get</span> <span class="n">an</span> <span class="n">invitation</span> <span class="kn">from</span> <span class="nn">GitHub</span> <span class="n">to</span> <span class="n">your</span> <span class="n">email</span> <span class="n">address</span> <span class="p">(</span><span class="n">that</span> <span class="n">GitHub</span> <span class="n">knows</span> <span class="n">about</span><span class="p">)</span><span class="o">.</span> <span class="n">Please</span> <span class="n">accept</span> <span class="n">that</span> <span class="n">invitation</span> <span class="n">so</span> <span class="n">that</span> <span class="n">you</span> <span class="n">can</span> <span class="n">participate</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">collaborative</span> <span class="n">exercise</span><span class="o">.</span>
<span class="n">To</span> <span class="n">make</span> <span class="n">sure</span> <span class="n">you</span> <span class="n">don</span><span class="s1">&#39;t get too many emails during the exercise, don&#39;</span><span class="n">t</span> <span class="n">forget</span> <span class="n">to</span> <span class="s2">&quot;unwatch&quot;</span> <span class="n">both</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">cr</span><span class="o">-</span><span class="n">workshop</span><span class="o">-</span><span class="n">exercises</span><span class="o">/</span><span class="n">centralized</span><span class="o">-</span><span class="n">workflow</span><span class="o">-</span><span class="n">exercise</span> <span class="ow">and</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">cr</span><span class="o">-</span><span class="n">workshop</span><span class="o">-</span><span class="n">exercises</span><span class="o">/</span><span class="n">centralized</span><span class="o">-</span><span class="n">workflow</span><span class="o">-</span><span class="n">exercise</span><span class="o">-</span><span class="n">recorded</span><span class="o">.</span>
<span class="n">To</span> <span class="s2">&quot;unwatch&quot;</span><span class="p">,</span> <span class="n">go</span> <span class="n">to</span> <span class="n">the</span> <span class="n">repository</span> <span class="ow">and</span> <span class="n">click</span> <span class="n">the</span> <span class="s2">&quot;Unwatch&quot;</span> <span class="n">button</span> <span class="p">(</span><span class="n">top</span> <span class="n">middle</span> <span class="n">of</span> <span class="n">the</span> <span class="n">screen</span><span class="p">)</span> <span class="ow">and</span> <span class="n">then</span> <span class="n">select</span> <span class="s2">&quot;Participating and @mentions&quot;</span><span class="o">.</span>
</pre></div>
</div>
</li>
</ul>
<p>``</p>
<ul class="simple">
<li><p>Why a fifth repository?  So that learners don’t get emails from all
other access requests once they get added to the team</p></li>
<li><p><a class="reference external" href="https://coderefinery.github.io/2024-03-12-workshop/communication/#2024-03-12-exercise-preparation-for-learners-without-own-group">Example email requesting learners to join</a></p></li>
<li><p><a class="reference external" href="https://github.com/cr-workshop-exercises/access-requests/issues/41">Example issue comment</a></p></li>
</ul>
</section>
<section id="typical-pitfalls">
<h3>Typical pitfalls<a class="headerlink" href="#typical-pitfalls" title="Link to this heading"></a></h3>
<section id="difference-between-pull-and-pull-requests">
<h4>Difference between pull and pull requests<a class="headerlink" href="#difference-between-pull-and-pull-requests" title="Link to this heading"></a></h4>
<p>The difference between pull and pull requests can be confusing, explain clearly
that pull requests or merge requests are a different mechanism specific to
GitHub, GitLab, etc.</p>
</section>
<section id="pull-requests-are-from-branch-to-branch-not-from-commit-to-branch">
<h4>Pull requests are from branch to branch, not from commit to branch<a class="headerlink" href="#pull-requests-are-from-branch-to-branch-not-from-commit-to-branch" title="Link to this heading"></a></h4>
<p>The behavior that additional commits to a branch from which a pull request has
been created get appended to the pull request needs to be explained.</p>
</section>
</section>
<section id="other-practical-aspects">
<h3>Other practical aspects<a class="headerlink" href="#other-practical-aspects" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>In in-person workshops participants really have to sit next to someone, so
that they can see the screens. From the beginning.</p></li>
<li><p>Emphasize use of <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">graph</span></code> a lot, just like in the git-solo lesson.</p></li>
</ul>
</section>
</section>
</div>
<div class="toctree-wrapper compound">
</div>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright CodeRefinery team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>