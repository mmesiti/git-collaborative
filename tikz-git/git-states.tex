\documentclass{standalone}

\usepackage{tikz}


\begin{document}

% draw a commit node
\newcommand{\commitnode}[5]{
    {
    \node[#1, fill=white!#2, minimum width= 2.4cm, minimum height=1.2cm, text width=2.2cm, align=left] (cnew)   
    (#5) at #3  [draw] {\vbox to 1cm{\vfill \hbox{\textsf{\tiny{#4}}}}};
    }
}

   % TODO : convert into beamer


  \begin{tikzpicture}[outer sep=1]
    % this is the only version of your file that applications outside of git see.
    \node[text width=1.5cm, align=center] (wt)   at (0,2)  [draw] {working tree};

    % when git comes into play, many more versions become available
    \node[text width=1.5cm, align=center, fill=white!100!black] (git)   at (4.5,4)  {\textsf{.git}};
    \draw [dotted] (1.5,4.5) -- (1.5,0); 

    % there is the stagin area
    \node[text width=2.0cm, align=center] (idx)   at (3,2)  [draw] {index (staging area)};

    % and there are commits
    \commitnode{}{100}{(6.3,1.3)}{...........}{others}
    \commitnode{}{100}{(6.2,1.6)}{54a78ac2...}{c1}
    \commitnode{}{100}{(6.1,1.9)}{deadbeef...}{c2}
    \commitnode{}{100}{(6.0,2.2)}{eaf329aa...}{c2}


    % git add copies the version of a file to the index
    % that it, it overwrites the version in the index.

    \draw[->, auto=right] (wt) edge [ bend right=45 ] node[pos=0.5] {\tiny{add}} (idx) ;

    % new commit
    \commitnode{dotted}{50}{(5.9,2.5)}{\tiny{$<$new commit$>$}}{cnew}


    \draw[->, auto=left] (idx) edge [ bend left=45 ] node[pos=0.25] {\tiny{commit}} (cnew) ;


    % one can also commit directly from the worktree
    % this affects also the index

    \draw[->, auto=left] (wt) edge [ bend left=45 ] (cnew) ;
    \draw[->, auto=left] (wt) edge [ bend left=45 ] node[pos=0.5] {\tiny{commit -a }} (idx) ;

  \end{tikzpicture}
\end{document}
